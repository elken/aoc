<!DOCTYPE html>
<html><head><meta charset="UTF-8"><meta content="width=device-width, initial-scale=1" name="viewport"><meta content="From spotting trees to rope physics! Can&apos;t see these problems are dull at least..." property="og:description"><meta content="Solution" property="og:title"><meta content="article:clerk" property="og:type"><meta content="summary_large_image" name="twitter:card"><link href="./../../../../_data/8VsuB17ZykScJpXQavsNhPqKdep1WsCo4jHpscxg1n8oShucdSKWsgG2d7eBNNtHFCDmG5aRaKoBxBbzR15CidaGxN.css" rel="stylesheet" type="text/css"><script src="https://storage.clerk.garden/nextjournal/clerk-assets@3gzDSuxacxY4YqqmkkG2DNy4Rkux/viewer.js?immutable=true" type="module"></script><link href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css" rel="stylesheet" type="text/css"><link href="https://fonts.bunny.net" rel="preconnect"><link href="https://fonts.bunny.net/css?family=fira-mono:400,700%7Cfira-sans:400,400i,500,500i,700,700i%7Cfira-sans-condensed:700,700i%7Cpt-serif:400,400i,700,700i" rel="stylesheet" type="text/css"><style id="extra-styles">em {
    font-style: normal !important;
}

html:not(.dark) pre {
    background-color: #f1f5f9 !important;
    color: #7aaac4 !important;
}

.dark em {
    color: #fff !important;
    text-shadow: 0 0 5px #fff !important;
}

.dark pre {
    background-color: rgb(31 41 55 / var(--tw-bg-opacity)) !important;
}

html:not(.dark) em {
    color: #000 !important;
    text-shadow: 0 0 2px #000 !important;
}

.viewer-result:first-child {
    display: none !important;
}
</style><style id="extra-styles">em {
    font-style: normal !important;
}

html:not(.dark) pre {
    background-color: #f1f5f9 !important;
    color: #7aaac4 !important;
}

.dark em {
    color: #fff !important;
    text-shadow: 0 0 5px #fff !important;
}

.dark pre {
    background-color: rgb(31 41 55 / var(--tw-bg-opacity)) !important;
}

html:not(.dark) em {
    color: #000 !important;
    text-shadow: 0 0 2px #000 !important;
}

.viewer-result:first-child {
    display: none !important;
}
</style></head><body class="dark:bg-gray-900"><div id="clerk"><div class="flex"><div class="fixed top-2 left-2 md:left-auto md:right-2 z-10"><div class="relative dark-mode-toggle"><button class="text-slate-400 hover:text-slate-600 dark:hover:text-white cursor-pointer"><svg class="w-5 h-5 md:w-4 md:h-4" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="11.9998" cy="11.9998" r="5.75375" fill="currentColor"></circle><g><circle cx="3.08982" cy="6.85502" r="1.71143" transform="rotate(-60 3.08982 6.85502)" fill="currentColor"></circle><circle cx="3.0903" cy="17.1436" r="1.71143" transform="rotate(-120 3.0903 17.1436)" fill="currentColor"></circle><circle cx="12" cy="22.2881" r="1.71143" fill="currentColor"></circle><circle cx="20.9101" cy="17.1436" r="1.71143" transform="rotate(-60 20.9101 17.1436)" fill="currentColor"></circle><circle cx="20.9101" cy="6.8555" r="1.71143" transform="rotate(-120 20.9101 6.8555)" fill="currentColor"></circle><circle cx="12" cy="1.71143" r="1.71143" fill="currentColor"></circle></g></svg></button></div></div><div class="flex-auto w-screen scroll-container"><div class="flex flex-col items-center notebook-viewer flex-auto" style="margin-left:0px"><div class="viewer w-full max-w-prose px-8 not-prose mt-3"><div class="mb-8 text-xs sans-serif text-slate-400"><a href="./../../../../" class="font-medium border-b border-dotted border-slate-300 hover:text-indigo-500 hover:border-indigo-500 dark:border-slate-500 dark:hover:text-white dark:hover:border-white transition">Index</a><span class="mx-2">•</span><span>Generated with <a href="https://clerk.vision" class="font-medium border-b border-dotted border-slate-300 hover:text-indigo-500 hover:border-indigo-500 dark:border-slate-500 dark:hover:text-white dark:hover:border-white transition">Clerk</a> from <a class="font-medium border-b border-dotted border-slate-300 hover:text-indigo-500 hover:border-indigo-500 dark:border-slate-500 dark:hover:text-white dark:hover:border-white transition">src/solutions/2022/day09.clj</a></span></div></div><div class="result-viewer viewer html-viewer w-full max-w-prose px-8" data-block-id="solutions.2022.day09/anon-expr-5duJTchqbH1QGrJ1yWgVk6pU5Nkpii-result"><div class="relative"><div class="overflow-x-auto"><div><article class="day-desc"><h2>--- Day 9: Rope Bridge ---</h2><p>This rope bridge creaks as you walk along it. You aren't sure how old it is, or whether it can even support your weight.</p>
<p>It seems to support the Elves just fine, though. The bridge spans a gorge which was carved out by the massive river far below you.</p>
<p>You step carefully; as you do, the ropes stretch and twist. You decide to distract yourself by modeling rope physics; maybe you can even figure out where <em>not</em> to step.</p>
<p>Consider a rope with a knot at each end; these knots mark the <em>head</em> and the <em>tail</em> of the rope. If the head moves far enough away from the tail, the tail is pulled toward the head.</p>
<p>Due to nebulous reasoning involving <a href="https://en.wikipedia.org/wiki/Planck_units#Planck_length" target="_blank">Planck lengths</a>, you should be able to model the positions of the knots on a two-dimensional grid. Then, by following a hypothetical <em>series of motions</em> (your puzzle input) for the head, you can determine how the tail will move.</p>
<p><span title="I'm an engineer, not a physicist!">Due to the aforementioned Planck lengths</span>, the rope must be quite short; in fact, the head (<code>H</code>) and tail (<code>T</code>) must <em>always be touching</em> (diagonally adjacent and even overlapping both count as touching):</p>
<pre><code>....
.TH.
....

....
.H..
..T.
....

...
.H. (H covers T)
...
</code></pre>
<p>If the head is ever two steps directly up, down, left, or right from the tail, the tail must also move one step in that direction so it remains close enough:</p>
<pre><code>.....    .....    .....
.TH.. -&gt; .T.H. -&gt; ..TH.
.....    .....    .....

...    ...    ...
.T.    .T.    ...
.H. -&gt; ... -&gt; .T.
...    .H.    .H.
...    ...    ...
</code></pre>
<p>Otherwise, if the head and tail aren't touching and aren't in the same row or column, the tail always moves one step diagonally to keep up:</p>
<pre><code>.....    .....    .....
.....    ..H..    ..H..
..H.. -&gt; ..... -&gt; ..T..
.T...    .T...    .....
.....    .....    .....

.....    .....    .....
.....    .....    .....
..H.. -&gt; ...H. -&gt; ..TH.
.T...    .T...    .....
.....    .....    .....
</code></pre>
<p>You just need to work out where the tail goes as the head follows a series of motions. Assume the head and the tail both start at the same position, overlapping.</p>
<p>For example:</p>
<pre><code>R 4
U 4
L 3
D 1
R 4
D 1
L 5
R 2
</code></pre>
<p>This series of motions moves the head <em>right</em> four steps, then <em>up</em> four steps, then <em>left</em> three steps, then <em>down</em> one step, and so on. After each step, you'll need to update the position of the tail if the step means the head is no longer adjacent to the tail. Visually, these motions occur as follows (<code>s</code> marks the starting position as a reference point):</p>
<pre><code>== Initial State ==

......
......
......
......
H.....  (H covers T, s)

== R 4 ==

......
......
......
......
TH....  (T covers s)

......
......
......
......
sTH...

......
......
......
......
s.TH..

......
......
......
......
s..TH.

== U 4 ==

......
......
......
....H.
s..T..

......
......
....H.
....T.
s.....

......
....H.
....T.
......
s.....

....H.
....T.
......
......
s.....

== L 3 ==

...H..
....T.
......
......
s.....

..HT..
......
......
......
s.....

.HT...
......
......
......
s.....

== D 1 ==

..T...
.H....
......
......
s.....

== R 4 ==

..T...
..H...
......
......
s.....

..T...
...H..
......
......
s.....

......
...TH.
......
......
s.....

......
....TH
......
......
s.....

== D 1 ==

......
....T.
.....H
......
s.....

== L 5 ==

......
....T.
....H.
......
s.....

......
....T.
...H..
......
s.....

......
......
..HT..
......
s.....

......
......
.HT...
......
s.....

......
......
HT....
......
s.....

== R 2 ==

......
......
.H....  (H covers T)
......
s.....

......
......
.TH...
......
s.....
</code></pre>
<p>After simulating the rope, you can count up all of the positions the <em>tail visited at least once</em>. In this diagram, <code>s</code> again marks the starting position (which the tail also visited) and <code>#</code> marks other positions the tail visited:</p>
<pre><code>..##..
...##.
.####.
....#.
s###..
</code></pre>
<p>So, there are <code><em>13</em></code> positions the tail visited at least once.</p>
<p>Simulate your complete hypothetical series of motions. <em>How many positions does the tail of the rope visit at least once?</em></p>
</article></div></div></div></div><div data-block-id="solutions.2022.day09/markdown-5dtzyKViAUAsCBmZN7GF6UJn8WKPfH" class="viewer markdown-viewer w-full max-w-prose px-8"><h2 id="solution">Solution</h2><p>From spotting trees to rope physics! Can&#x27;t see these problems are dull at<!-- --> <!-- -->least...</p><p>This one stumped me for a while too, doesn&#x27;t bode well for the rest<!-- --> <!-- -->of the week but c&#x27;est la vie. Onwards and upwards.</p><p>Today we&#x27;re tasked with tracing &quot;rope physics&quot;, given the head and the tail<!-- --> <!-- -->of a rope and certain rules; map out all the spots the rope has been. Those<!-- --> <!-- -->rules are defined as:</p><ul><li>The head and tail of the rope must always be touching (adjacent and overlapping count)</li><li>If the head is two steps away cardinally, the tail must move one step in that direction</li><li>If they&#x27;re not touching or in the same row/colum, the tail moves diagonally once to keep up</li></ul><p>That&#x27;s explained more with examples above, so let&#x27;s dive right into solving it.</p><p>First things first, let&#x27;s load our input and parse it</p><p>Given the list of movement commands <code>(&quot;R 4&quot; &quot;L 2&quot;)</code>, this is exactly the same<!-- --> <!-- -->as <code>(&quot;R&quot; &quot;R&quot; &quot;R&quot; &quot;R&quot; &quot;L&quot; &quot;L&quot;)</code>; so let&#x27;s transform the input to look like that<!-- --> <!-- -->to make things easier and let us easily handle the tail movement rules.</p></div><div data-block-id="solutions.2022.day09/input-code" class="viewer code-viewer w-full max-w-wide"><div class="cm-editor"><cm-scroller><div class="cm-content whitespace-pre"><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">(<span class="cmt-keyword">def</span> <span class="cmt-variableName">input</span> (<span class="cmt-keyword">-&gt;&gt;</span> (<span class="cmt-keyword">slurp</span> (<span class="cmt-keyword">io/resource</span> <span class="cmt-string">&quot;</span><span class="cmt-string">inputs/2022/day09.txt</span><span class="cmt-string">&quot;</span>))            <span class="cmt-comment">;; Load the resource</span></div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">                str/split-lines                                          <span class="cmt-comment">;; Split into lines</span></div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">                (<span class="cmt-keyword">mapcat</span> #(<span class="cmt-keyword">let</span> [[dir c] (<span class="cmt-keyword">str/split</span> % #<span class="cmt-string">&quot;</span><span class="cmt-string"> </span><span class="cmt-string">&quot;</span>)]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">                           (<span class="cmt-keyword">repeat</span> (<span class="cmt-keyword">parse-long</span> (<span class="cmt-keyword">str</span> c)) (<span class="cmt-keyword">str</span> dir))))))   <span class="cmt-comment">;; Spread commands out individually</span></div></div></cm-scroller></div></div><div class="result-viewer viewer sequential-viewer w-full max-w-prose px-8" data-block-id="solutions.2022.day09/input-result"><div class="relative"><div class="overflow-x-auto"><span class="inspected-value whitespace-nowrap"><span><span class="group hover:bg-indigo-100 rounded-sm hover:shadow cursor-pointer"><span class="text-slate-400 group-hover:text-indigo-700"><svg viewBox="0 0 100 100" class="w-[7px] h-[7px] fill-current inline-block transition-all mr-[1px] -mt-[2px] rotate-90"><polygon points="5.9,88.2 50,11.8 94.1,88.2 "></polygon></svg></span><span class="group-hover:text-indigo-700">(</span></span><span class="inspected-value inline-flex"><span class="cmt-string"><span>&quot;</span></span><div><span class="cmt-string"><span class="whitespace-pre">D</span>&quot;</span></div></span> <span class="inspected-value inline-flex"><span class="cmt-string"><span>&quot;</span></span><div><span class="cmt-string"><span class="whitespace-pre">D</span>&quot;</span></div></span> <span class="inspected-value inline-flex"><span class="cmt-string"><span>&quot;</span></span><div><span class="cmt-string"><span class="whitespace-pre">R</span>&quot;</span></div></span> <span class="inspected-value inline-flex"><span class="cmt-string"><span>&quot;</span></span><div><span class="cmt-string"><span class="whitespace-pre">R</span>&quot;</span></div></span> <span class="inspected-value inline-flex"><span class="cmt-string"><span>&quot;</span></span><div><span class="cmt-string"><span class="whitespace-pre">D</span>&quot;</span></div></span> <span class="inspected-value inline-flex"><span class="cmt-string"><span>&quot;</span></span><div><span class="cmt-string"><span class="whitespace-pre">U</span>&quot;</span></div></span> <span class="inspected-value inline-flex"><span class="cmt-string"><span>&quot;</span></span><div><span class="cmt-string"><span class="whitespace-pre">L</span>&quot;</span></div></span> <span class="inspected-value inline-flex"><span class="cmt-string"><span>&quot;</span></span><div><span class="cmt-string"><span class="whitespace-pre">L</span>&quot;</span></div></span> <span class="inspected-value inline-flex"><span class="cmt-string"><span>&quot;</span></span><div><span class="cmt-string"><span class="whitespace-pre">U</span>&quot;</span></div></span> <span class="inspected-value inline-flex"><span class="cmt-string"><span>&quot;</span></span><div><span class="cmt-string"><span class="whitespace-pre">U</span>&quot;</span></div></span> <span class="inspected-value inline-flex"><span class="cmt-string"><span>&quot;</span></span><div><span class="cmt-string"><span class="whitespace-pre">D</span>&quot;</span></div></span> <span class="inspected-value inline-flex"><span class="cmt-string"><span>&quot;</span></span><div><span class="cmt-string"><span class="whitespace-pre">R</span>&quot;</span></div></span> <span class="inspected-value inline-flex"><span class="cmt-string"><span>&quot;</span></span><div><span class="cmt-string"><span class="whitespace-pre">R</span>&quot;</span></div></span> <span class="inspected-value inline-flex"><span class="cmt-string"><span>&quot;</span></span><div><span class="cmt-string"><span class="whitespace-pre">U</span>&quot;</span></div></span> <span class="inspected-value inline-flex"><span class="cmt-string"><span>&quot;</span></span><div><span class="cmt-string"><span class="whitespace-pre">U</span>&quot;</span></div></span> <span class="inspected-value inline-flex"><span class="cmt-string"><span>&quot;</span></span><div><span class="cmt-string"><span class="whitespace-pre">R</span>&quot;</span></div></span> <span class="inspected-value inline-flex"><span class="cmt-string"><span>&quot;</span></span><div><span class="cmt-string"><span class="whitespace-pre">R</span>&quot;</span></div></span> <span class="inspected-value inline-flex"><span class="cmt-string"><span>&quot;</span></span><div><span class="cmt-string"><span class="whitespace-pre">L</span>&quot;</span></div></span> <span class="inspected-value inline-flex"><span class="cmt-string"><span>&quot;</span></span><div><span class="cmt-string"><span class="whitespace-pre">D</span>&quot;</span></div></span> <span class="inspected-value inline-flex"><span class="cmt-string"><span>&quot;</span></span><div><span class="cmt-string"><span class="whitespace-pre">D</span>&quot;</span></div></span> <span style="border-radius:2px;font-size:11px;top:-1px" class="sans-serif relative whitespace-nowrap text-gray-400 dark:text-slate-300">11327<!-- --> more elided</span><span>)</span></span></span></div></div></div><div data-block-id="solutions.2022.day09/markdown-5dr9AWWqc5X7WyXh7KZsHNPLuG65mS" class="viewer markdown-viewer w-full max-w-prose px-8"><p>Smashing. Now we have a flat input, it&#x27;s just a case of reducing over it to<!-- --> <!-- -->advance the state.</p><p>Next we define a function to move the head of the rope. Since we have<!-- --> <!-- -->single-step movements now, we can just use <code>inc</code> and <code>dec</code>.</p></div><div data-block-id="solutions.2022.day09/move-head-code" class="viewer code-viewer w-full max-w-wide"><div class="cm-editor"><cm-scroller><div class="cm-content whitespace-pre"><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">(<span class="cmt-keyword">defn</span> <span class="cmt-variableName">move-head</span> [[x y] direction]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">  (<span class="cmt-keyword">condp</span> = direction</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">    <span class="cmt-string">&quot;</span><span class="cmt-string">R</span><span class="cmt-string">&quot;</span> [x (<span class="cmt-keyword">inc</span> y)]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">    <span class="cmt-string">&quot;</span><span class="cmt-string">U</span><span class="cmt-string">&quot;</span> [(<span class="cmt-keyword">dec</span> x) y]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">    <span class="cmt-string">&quot;</span><span class="cmt-string">L</span><span class="cmt-string">&quot;</span> [x (<span class="cmt-keyword">dec</span> y)]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">    <span class="cmt-string">&quot;</span><span class="cmt-string">D</span><span class="cmt-string">&quot;</span> [(<span class="cmt-keyword">inc</span> x) y]))</div></div></cm-scroller></div></div><div data-block-id="solutions.2022.day09/markdown-5drgoChe4mWcoeuvU52Rk5dfPqMERU" class="viewer markdown-viewer w-full max-w-prose px-8"><p>Then we have a function to mvoe the tail of the rope.</p><p>This handles all our rules, ensuring that the tail is always at least next to<!-- --> <!-- -->the head by updating the co-ordinate using <code>clojure.math/signum</code> to return<!-- --> <!-- -->the sign of the change (new in 1.11).</p></div><div data-block-id="solutions.2022.day09/move-tail-code" class="viewer code-viewer w-full max-w-wide"><div class="cm-editor"><cm-scroller><div class="cm-content whitespace-pre"><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">(<span class="cmt-keyword">defn</span> <span class="cmt-variableName">move-tail</span> [[head-x head-y] [tail-x tail-y]]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">  (<span class="cmt-keyword">let</span> [dx (<span class="cmt-keyword">-</span> head-x tail-x)</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">        dy (<span class="cmt-keyword">-</span> head-y tail-y)]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">    (<span class="cmt-keyword">if</span> (<span class="cmt-keyword">and</span> (<span class="cmt-keyword">&lt;</span> (<span class="cmt-keyword">abs</span> dx) <span class="cmt-literal">2</span>)</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">             (<span class="cmt-keyword">&lt;</span> (<span class="cmt-keyword">abs</span> dy) <span class="cmt-literal">2</span>))</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">      [tail-x tail-y]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">      [(<span class="cmt-keyword">+</span> tail-x (<span class="cmt-keyword">math/signum</span> dx)) (<span class="cmt-keyword">+</span> tail-y (<span class="cmt-keyword">math/signum</span> dy))])))</div></div></cm-scroller></div></div><div data-block-id="solutions.2022.day09/markdown-5dskBJoLHmvMom3TZYnhs4wfrHCfM7" class="viewer markdown-viewer w-full max-w-prose px-8"><p>Next we have a function to perform a movement command given a rope vector<!-- --> <!-- -->(more on that in the next function) and a single-step movement command.</p><p>We loop over the rope vector and update the vector based on how far through<!-- --> <!-- -->it we are. The first element is the head, and once we reach the end we can<!-- --> <!-- -->return the new vector.</p></div><div data-block-id="solutions.2022.day09/move-code" class="viewer code-viewer w-full max-w-wide"><div class="cm-editor"><cm-scroller><div class="cm-content whitespace-pre"><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">(<span class="cmt-keyword">defn</span> <span class="cmt-variableName">move</span> [rope-vec direction]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">  (<span class="cmt-keyword">loop</span> [ropes rope-vec</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">         index <span class="cmt-literal">0</span>]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">    (<span class="cmt-keyword">let</span> [next-pos (<span class="cmt-keyword">inc</span> index)]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">      (<span class="cmt-keyword">cond</span></div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">        (<span class="cmt-keyword">=</span> index (<span class="cmt-keyword">count</span> rope-vec)) ropes</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">        (<span class="cmt-keyword">=</span> index <span class="cmt-literal">0</span>) (<span class="cmt-keyword">recur</span> (<span class="cmt-keyword">assoc</span> ropes index (<span class="cmt-keyword">move-head</span> (<span class="cmt-keyword">ropes</span> index) direction)) next-pos)</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">        <span class="cmt-atom">:else</span> (<span class="cmt-keyword">recur</span> (<span class="cmt-keyword">assoc</span> ropes index (<span class="cmt-keyword">move-tail</span> (<span class="cmt-keyword">ropes</span> (<span class="cmt-keyword">dec</span> index)) (<span class="cmt-keyword">ropes</span> index))) next-pos)))))</div></div></cm-scroller></div></div><div data-block-id="solutions.2022.day09/markdown-5dtUtSSxaymRRigP1AiyGzZ6Y9kfNm" class="viewer markdown-viewer w-full max-w-prose px-8"><p>Lastly we have a general solution for both parts, since they share a common<!-- --> <em>thread</em> (I&#x27;m here all week) in that part 1 has 2 knots and part 2 has 10<!-- --> <!-- -->knots, so we can abstract the implementation to use a vector instead and act<!-- --> <!-- -->accordingly.</p><p>So we take the length of the vector and the movement commands, and iterate<!-- --> <!-- -->through the commands until none are left. We use a set for <code>past-tails</code> so we<!-- --> <!-- -->don&#x27;t have to worry about handling duplicates later.</p></div><div data-block-id="solutions.2022.day09/move-length-code" class="viewer code-viewer w-full max-w-wide"><div class="cm-editor"><cm-scroller><div class="cm-content whitespace-pre"><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">(<span class="cmt-keyword">defn</span> <span class="cmt-variableName">move-length</span> [length input]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">  (<span class="cmt-keyword">loop</span> [rope-vec (<span class="cmt-keyword">vec</span> (<span class="cmt-keyword">repeat</span> length [<span class="cmt-literal">0</span> <span class="cmt-literal">0</span>]))</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">         past-tails #{}</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">         cmds input]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">    (<span class="cmt-keyword">let</span> [tails (<span class="cmt-keyword">conj</span> past-tails (<span class="cmt-keyword">last</span> rope-vec))</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">          [cmd &amp; rst] cmds]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">      (<span class="cmt-keyword">if</span> (<span class="cmt-keyword">empty?</span> cmds)</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">        (<span class="cmt-keyword">count</span> tails)</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">        (<span class="cmt-keyword">recur</span> (<span class="cmt-keyword">move</span> rope-vec cmd) tails rst)))))</div></div></cm-scroller></div></div><div data-block-id="solutions.2022.day09/markdown-5duBv1e2NWRGvcRasNUkD8JFHUgDhm" class="viewer markdown-viewer w-full max-w-prose px-8"><p>As above, part 1 is just 2 knots</p></div><div data-block-id="solutions.2022.day09/part-1-code" class="viewer code-viewer w-full max-w-wide"><div class="cm-editor"><cm-scroller><div class="cm-content whitespace-pre"><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">(<span class="cmt-keyword">defn</span> <span class="cmt-variableName">part-1</span></div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">  [input]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">  (<span class="cmt-keyword">move-length</span> <span class="cmt-literal">2</span> input))</div></div></cm-scroller></div></div><div data-block-id="solutions.2022.day09/markdown-5dspMqxdw3uNK6Pgan8eaYi57sm4wP" class="viewer markdown-viewer w-full max-w-prose px-8"><p>Which gives our answer</p></div><div class="result-viewer viewer number-viewer w-full max-w-prose px-8" data-block-id="solutions.2022.day09/anon-expr-5dshGnyCYVfgr3cV4vKRqeFt2v8Fqp-result"><div class="relative"><div class="overflow-x-auto"><span class="cmt-number inspected-value">5930</span></div></div></div><div data-block-id="solutions.2022.day09/markdown-5dtB6RiPGKdNv3iHE7ZhAu7Ysma6TP" class="viewer markdown-viewer w-full max-w-prose px-8"><p>And part 2 is <em>10</em> knots</p></div><div data-block-id="solutions.2022.day09/part-2-code" class="viewer code-viewer w-full max-w-wide"><div class="cm-editor"><cm-scroller><div class="cm-content whitespace-pre"><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">(<span class="cmt-keyword">defn</span> <span class="cmt-variableName">part-2</span></div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">  [input]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">  (<span class="cmt-keyword">move-length</span> <span class="cmt-literal">10</span> input))</div></div></cm-scroller></div></div><div data-block-id="solutions.2022.day09/markdown-5dspMqxdw3uNK6Pgan8eaYi57sm4wP#2" class="viewer markdown-viewer w-full max-w-prose px-8"><p>Which gives our answer</p></div><div class="result-viewer viewer number-viewer w-full max-w-prose px-8" data-block-id="solutions.2022.day09/anon-expr-5ds3NJhiXAVBTLsVFex2mJDuuDv1Lr-result"><div class="relative"><div class="overflow-x-auto"><span class="cmt-number inspected-value">2443</span></div></div></div></div></div></div><div class="fixed w-full z-20 top-0 left-0 w-full"></div>
</div><script type="module">let viewer = nextjournal.clerk.sci_env
let state = "{:bundle? false, :path->doc {\"src/solutions/2022/day09\" {:path [], :nextjournal/value {:toc [{:title \"\", :emoji nil, :path \"#\", :items [{:title \"Solution\", :emoji nil, :path \"#solution\", :items []}]}], :sidenotes? false, :toc-visibility false, :atom-var-name->state #viewer-eval (nextjournal.clerk.render/intern-atoms! {}), :ns #viewer-eval (ns solutions.2022.day09), :file \"src/solutions/2022/day09.clj\", :scope solutions.2022.day09, :bundle? false, :header {:path [], :nextjournal/value [:div.viewer.w-full.max-w-prose.px-8.not-prose.mt-3 [:div.mb-8.text-xs.sans-serif.text-slate-400 nil [:<> [:a.font-medium.border-b.border-dotted.border-slate-300.hover:text-indigo-500.hover:border-indigo-500.dark:border-slate-500.dark:hover:text-white.dark:hover:border-white.transition {:href \"./../../../../\"} \"Index\"] [:span.mx-2 \"•\"]] [:span \"Generated with \" [:a.font-medium.border-b.border-dotted.border-slate-300.hover:text-indigo-500.hover:border-indigo-500.dark:border-slate-500.dark:hover:text-white.dark:hover:border-white.transition {:href \"https://clerk.vision\"} \"Clerk\"] \" from \" [:a.font-medium.border-b.border-dotted.border-slate-300.hover:text-indigo-500.hover:border-indigo-500.dark:border-slate-500.dark:hover:text-white.dark:hover:border-white.transition {:href nil} \"src/solutions/2022/day09.clj\" nil]]]], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}, :open-graph {:type \"article:clerk\", :title \"Solution\", :description \"From spotting trees to rope physics! Can't see these problems are dull at least...\"}, :title \"Solution\", :blocks [{:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [:div {:dangerouslySetInnerHTML {:__html \"<article class=\\\"day-desc\\\"><h2>--- Day 9: Rope Bridge ---</h2><p>This rope bridge creaks as you walk along it. You aren't sure how old it is, or whether it can even support your weight.</p>\\n<p>It seems to support the Elves just fine, though. The bridge spans a gorge which was carved out by the massive river far below you.</p>\\n<p>You step carefully; as you do, the ropes stretch and twist. You decide to distract yourself by modeling rope physics; maybe you can even figure out where <em>not</em> to step.</p>\\n<p>Consider a rope with a knot at each end; these knots mark the <em>head</em> and the <em>tail</em> of the rope. If the head moves far enough away from the tail, the tail is pulled toward the head.</p>\\n<p>Due to nebulous reasoning involving <a href=\\\"https://en.wikipedia.org/wiki/Planck_units#Planck_length\\\" target=\\\"_blank\\\">Planck lengths</a>, you should be able to model the positions of the knots on a two-dimensional grid. Then, by following a hypothetical <em>series of motions</em> (your puzzle input) for the head, you can determine how the tail will move.</p>\\n<p><span title=\\\"I'm an engineer, not a physicist!\\\">Due to the aforementioned Planck lengths</span>, the rope must be quite short; in fact, the head (<code>H</code>) and tail (<code>T</code>) must <em>always be touching</em> (diagonally adjacent and even overlapping both count as touching):</p>\\n<pre><code>....\\n.TH.\\n....\\n\\n....\\n.H..\\n..T.\\n....\\n\\n...\\n.H. (H covers T)\\n...\\n</code></pre>\\n<p>If the head is ever two steps directly up, down, left, or right from the tail, the tail must also move one step in that direction so it remains close enough:</p>\\n<pre><code>.....    .....    .....\\n.TH.. -&gt; .T.H. -&gt; ..TH.\\n.....    .....    .....\\n\\n...    ...    ...\\n.T.    .T.    ...\\n.H. -&gt; ... -&gt; .T.\\n...    .H.    .H.\\n...    ...    ...\\n</code></pre>\\n<p>Otherwise, if the head and tail aren't touching and aren't in the same row or column, the tail always moves one step diagonally to keep up:</p>\\n<pre><code>.....    .....    .....\\n.....    ..H..    ..H..\\n..H.. -&gt; ..... -&gt; ..T..\\n.T...    .T...    .....\\n.....    .....    .....\\n\\n.....    .....    .....\\n.....    .....    .....\\n..H.. -&gt; ...H. -&gt; ..TH.\\n.T...    .T...    .....\\n.....    .....    .....\\n</code></pre>\\n<p>You just need to work out where the tail goes as the head follows a series of motions. Assume the head and the tail both start at the same position, overlapping.</p>\\n<p>For example:</p>\\n<pre><code>R 4\\nU 4\\nL 3\\nD 1\\nR 4\\nD 1\\nL 5\\nR 2\\n</code></pre>\\n<p>This series of motions moves the head <em>right</em> four steps, then <em>up</em> four steps, then <em>left</em> three steps, then <em>down</em> one step, and so on. After each step, you'll need to update the position of the tail if the step means the head is no longer adjacent to the tail. Visually, these motions occur as follows (<code>s</code> marks the starting position as a reference point):</p>\\n<pre><code>== Initial State ==\\n\\n......\\n......\\n......\\n......\\nH.....  (H covers T, s)\\n\\n== R 4 ==\\n\\n......\\n......\\n......\\n......\\nTH....  (T covers s)\\n\\n......\\n......\\n......\\n......\\nsTH...\\n\\n......\\n......\\n......\\n......\\ns.TH..\\n\\n......\\n......\\n......\\n......\\ns..TH.\\n\\n== U 4 ==\\n\\n......\\n......\\n......\\n....H.\\ns..T..\\n\\n......\\n......\\n....H.\\n....T.\\ns.....\\n\\n......\\n....H.\\n....T.\\n......\\ns.....\\n\\n....H.\\n....T.\\n......\\n......\\ns.....\\n\\n== L 3 ==\\n\\n...H..\\n....T.\\n......\\n......\\ns.....\\n\\n..HT..\\n......\\n......\\n......\\ns.....\\n\\n.HT...\\n......\\n......\\n......\\ns.....\\n\\n== D 1 ==\\n\\n..T...\\n.H....\\n......\\n......\\ns.....\\n\\n== R 4 ==\\n\\n..T...\\n..H...\\n......\\n......\\ns.....\\n\\n..T...\\n...H..\\n......\\n......\\ns.....\\n\\n......\\n...TH.\\n......\\n......\\ns.....\\n\\n......\\n....TH\\n......\\n......\\ns.....\\n\\n== D 1 ==\\n\\n......\\n....T.\\n.....H\\n......\\ns.....\\n\\n== L 5 ==\\n\\n......\\n....T.\\n....H.\\n......\\ns.....\\n\\n......\\n....T.\\n...H..\\n......\\ns.....\\n\\n......\\n......\\n..HT..\\n......\\ns.....\\n\\n......\\n......\\n.HT...\\n......\\ns.....\\n\\n......\\n......\\nHT....\\n......\\ns.....\\n\\n== R 2 ==\\n\\n......\\n......\\n.H....  (H covers T)\\n......\\ns.....\\n\\n......\\n......\\n.TH...\\n......\\ns.....\\n</code></pre>\\n<p>After simulating the rope, you can count up all of the positions the <em>tail visited at least once</em>. In this diagram, <code>s</code> again marks the starting position (which the tail also visited) and <code>#</code> marks other positions the tail visited:</p>\\n<pre><code>..##..\\n...##.\\n.####.\\n....#.\\ns###..\\n</code></pre>\\n<p>So, there are <code><em>13</em></code> positions the tail visited at least once.</p>\\n<p>Simulate your complete hypothetical series of motions. <em>How many positions does the tail of the rope visit at least once?</em></p>\\n</article>\"}}], :nextjournal/visibility {:code :hide, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}, :nextjournal/render-opts {:id \"solutions.2022.day09/anon-expr-5duJTchqbH1QGrJ1yWgVk6pU5Nkpii-result\"}}, :nextjournal/blob-id \"5drTgnRYpqEQyhbDckxvn8VMayZ2iP\"}, :nextjournal/render-opts {:id \"solutions.2022.day09/anon-expr-5duJTchqbH1QGrJ1yWgVk6pU5Nkpii-result\"}, :nextjournal/visibility {:code :hide, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day09/markdown-5dtzyKViAUAsCBmZN7GF6UJn8WKPfH\"} [\"h2\" {:id \"solution\"} [:<> \"Solution\"]] [:p [:<> \"From spotting trees to rope physics! Can't see these problems are dull at\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"least...\"]] [:p [:<> \"This one stumped me for a while too, doesn't bode well for the rest\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"of the week but c'est la vie. Onwards and upwards.\"]] [:p [:<> \"Today we're tasked with tracing \\\"rope physics\\\", given the head and the tail\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"of a rope and certain rules; map out all the spots the rope has been. Those\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"rules are defined as:\"]] [:ul [:li [:<> [:<> \"The head and tail of the rope must always be touching (adjacent and overlapping count)\"]]] [:li [:<> [:<> \"If the head is two steps away cardinally, the tail must move one step in that direction\"]]] [:li [:<> [:<> \"If they're not touching or in the same row/colum, the tail moves diagonally once to keep up\"]]]] [:p [:<> \"That's explained more with examples above, so let's dive right into solving it.\"]] [:p [:<> \"First things first, let's load our input and parse it\"]] [:p [:<> \"Given the list of movement commands \"] [:code [:<> \"(\\\"R 4\\\" \\\"L 2\\\")\"]] [:<> \", this is exactly the same\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"as \"] [:code [:<> \"(\\\"R\\\" \\\"R\\\" \\\"R\\\" \\\"R\\\" \\\"L\\\" \\\"L\\\")\"]] [:<> \"; so let's transform the input to look like that\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"to make things easier and let us easily handle the tail movement rules.\"]]], :nextjournal/render-opts {:id \"solutions.2022.day09/markdown-5dtzyKViAUAsCBmZN7GF6UJn8WKPfH\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe\"}} {:path [], :nextjournal/value \"(def input (->> (slurp (io/resource \\\"inputs/2022/day09.txt\\\"))            ;; Load the resource\\n                str/split-lines                                          ;; Split into lines\\n                (mapcat #(let [[dir c] (str/split % #\\\" \\\")]\\n                           (repeat (parse-long (str c)) (str dir))))))   ;; Spread commands out individually\", :nextjournal/render-opts {:loc {:line 39, :end-line 42, :column 1, :end-column 71}, :id \"solutions.2022.day09/input-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [{:path [0], :nextjournal/value \"D\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsDiKZaSjZpuyav79P69dRKiDtE2s\"}} {:path [1], :nextjournal/value \"D\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsDiKZaSjZpuyav79P69dRKiDtE2s\"}} {:path [2], :nextjournal/value \"R\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsDiKZaSjZpuyav79P69dRKiDtE2s\"}} {:path [3], :nextjournal/value \"R\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsDiKZaSjZpuyav79P69dRKiDtE2s\"}} {:path [4], :nextjournal/value \"D\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsDiKZaSjZpuyav79P69dRKiDtE2s\"}} {:path [5], :nextjournal/value \"U\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsDiKZaSjZpuyav79P69dRKiDtE2s\"}} {:path [6], :nextjournal/value \"L\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsDiKZaSjZpuyav79P69dRKiDtE2s\"}} {:path [7], :nextjournal/value \"L\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsDiKZaSjZpuyav79P69dRKiDtE2s\"}} {:path [8], :nextjournal/value \"U\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsDiKZaSjZpuyav79P69dRKiDtE2s\"}} {:path [9], :nextjournal/value \"U\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsDiKZaSjZpuyav79P69dRKiDtE2s\"}} {:path [10], :nextjournal/value \"D\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsDiKZaSjZpuyav79P69dRKiDtE2s\"}} {:path [11], :nextjournal/value \"R\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsDiKZaSjZpuyav79P69dRKiDtE2s\"}} {:path [12], :nextjournal/value \"R\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsDiKZaSjZpuyav79P69dRKiDtE2s\"}} {:path [13], :nextjournal/value \"U\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsDiKZaSjZpuyav79P69dRKiDtE2s\"}} {:path [14], :nextjournal/value \"U\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsDiKZaSjZpuyav79P69dRKiDtE2s\"}} {:path [15], :nextjournal/value \"R\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsDiKZaSjZpuyav79P69dRKiDtE2s\"}} {:path [16], :nextjournal/value \"R\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsDiKZaSjZpuyav79P69dRKiDtE2s\"}} {:path [17], :nextjournal/value \"L\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsDiKZaSjZpuyav79P69dRKiDtE2s\"}} {:path [18], :nextjournal/value \"D\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsDiKZaSjZpuyav79P69dRKiDtE2s\"}} {:path [19], :nextjournal/value \"D\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsDiKZaSjZpuyav79P69dRKiDtE2s\"}} {:nextjournal/value {:n 20, :path [], :total 11347, :offset 20}, :nextjournal/viewer {:name nextjournal.clerk.viewer/elision-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-elision, :hash \"5drduatKq2QJCDhSX1Pu45i4whSPHk\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/sequential-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-coll, :opening-paren \"(\", :closing-paren (\")\"), :page-size 20, :hash \"5dsgY1QgV2KqnvvrRRC3HXgCeF3Qge\"}, :nextjournal/render-opts {:id \"solutions.2022.day09/input-result\"}}, :nextjournal/blob-id \"5dtd5Qr7iBYb9qC1uLhHRfX7uL5nuY\"}, :nextjournal/render-opts {:id \"solutions.2022.day09/input-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day09/markdown-5dr9AWWqc5X7WyXh7KZsHNPLuG65mS\"} [:p [:<> \"Smashing. Now we have a flat input, it's just a case of reducing over it to\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"advance the state.\"]] [:p [:<> \"Next we define a function to move the head of the rope. Since we have\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"single-step movements now, we can just use \"] [:code [:<> \"inc\"]] [:<> \" and \"] [:code [:<> \"dec\"]] [:<> \".\"]]], :nextjournal/render-opts {:id \"solutions.2022.day09/markdown-5dr9AWWqc5X7WyXh7KZsHNPLuG65mS\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe\"}} {:path [], :nextjournal/value \"(defn move-head [[x y] direction]\\n  (condp = direction\\n    \\\"R\\\" [x (inc y)]\\n    \\\"U\\\" [(dec x) y]\\n    \\\"L\\\" [x (dec y)]\\n    \\\"D\\\" [(inc x) y]))\", :nextjournal/render-opts {:loc {:line 50, :end-line 55, :column 1, :end-column 22}, :id \"solutions.2022.day09/move-head-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day09/markdown-5drgoChe4mWcoeuvU52Rk5dfPqMERU\"} [:p [:<> \"Then we have a function to mvoe the tail of the rope.\"]] [:p [:<> \"This handles all our rules, ensuring that the tail is always at least next to\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"the head by updating the co-ordinate using \"] [:code [:<> \"clojure.math/signum\"]] [:<> \" to return\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"the sign of the change (new in 1.11).\"]]], :nextjournal/render-opts {:id \"solutions.2022.day09/markdown-5drgoChe4mWcoeuvU52Rk5dfPqMERU\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe\"}} {:path [], :nextjournal/value \"(defn move-tail [[head-x head-y] [tail-x tail-y]]\\n  (let [dx (- head-x tail-x)\\n        dy (- head-y tail-y)]\\n    (if (and (< (abs dx) 2)\\n             (< (abs dy) 2))\\n      [tail-x tail-y]\\n      [(+ tail-x (math/signum dx)) (+ tail-y (math/signum dy))])))\", :nextjournal/render-opts {:loc {:line 63, :end-line 69, :column 1, :end-column 67}, :id \"solutions.2022.day09/move-tail-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day09/markdown-5dskBJoLHmvMom3TZYnhs4wfrHCfM7\"} [:p [:<> \"Next we have a function to perform a movement command given a rope vector\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"(more on that in the next function) and a single-step movement command.\"]] [:p [:<> \"We loop over the rope vector and update the vector based on how far through\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"it we are. The first element is the head, and once we reach the end we can\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"return the new vector.\"]]], :nextjournal/render-opts {:id \"solutions.2022.day09/markdown-5dskBJoLHmvMom3TZYnhs4wfrHCfM7\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe\"}} {:path [], :nextjournal/value \"(defn move [rope-vec direction]\\n  (loop [ropes rope-vec\\n         index 0]\\n    (let [next-pos (inc index)]\\n      (cond\\n        (= index (count rope-vec)) ropes\\n        (= index 0) (recur (assoc ropes index (move-head (ropes index) direction)) next-pos)\\n        :else (recur (assoc ropes index (move-tail (ropes (dec index)) (ropes index))) next-pos)))))\", :nextjournal/render-opts {:loc {:line 78, :end-line 85, :column 1, :end-column 101}, :id \"solutions.2022.day09/move-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day09/markdown-5dtUtSSxaymRRigP1AiyGzZ6Y9kfNm\"} [:p [:<> \"Lastly we have a general solution for both parts, since they share a common\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:em [:<> \"thread\"]] [:<> \" (I'm here all week) in that part 1 has 2 knots and part 2 has 10\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"knots, so we can abstract the implementation to use a vector instead and act\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"accordingly.\"]] [:p [:<> \"So we take the length of the vector and the movement commands, and iterate\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"through the commands until none are left. We use a set for \"] [:code [:<> \"past-tails\"]] [:<> \" so we\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"don't have to worry about handling duplicates later.\"]]], :nextjournal/render-opts {:id \"solutions.2022.day09/markdown-5dtUtSSxaymRRigP1AiyGzZ6Y9kfNm\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe\"}} {:path [], :nextjournal/value \"(defn move-length [length input]\\n  (loop [rope-vec (vec (repeat length [0 0]))\\n         past-tails #{}\\n         cmds input]\\n    (let [tails (conj past-tails (last rope-vec))\\n          [cmd & rst] cmds]\\n      (if (empty? cmds)\\n        (count tails)\\n        (recur (move rope-vec cmd) tails rst)))))\", :nextjournal/render-opts {:loc {:line 96, :end-line 104, :column 1, :end-column 50}, :id \"solutions.2022.day09/move-length-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day09/markdown-5duBv1e2NWRGvcRasNUkD8JFHUgDhm\"} [:p [:<> \"As above, part 1 is just 2 knots\"]]], :nextjournal/render-opts {:id \"solutions.2022.day09/markdown-5duBv1e2NWRGvcRasNUkD8JFHUgDhm\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe\"}} {:path [], :nextjournal/value \"(defn part-1\\n  [input]\\n  (move-length 2 input))\", :nextjournal/render-opts {:loc {:line 108, :end-line 110, :column 1, :end-column 25}, :id \"solutions.2022.day09/part-1-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day09/markdown-5dspMqxdw3uNK6Pgan8eaYi57sm4wP\"} [:p [:<> \"Which gives our answer\"]]], :nextjournal/render-opts {:id \"solutions.2022.day09/markdown-5dspMqxdw3uNK6Pgan8eaYi57sm4wP\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value 5930, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5dr3R1ZvHCoRHpxsQq4D4ARv9BQC7o\"}, :nextjournal/render-opts {:id \"solutions.2022.day09/anon-expr-5dshGnyCYVfgr3cV4vKRqeFt2v8Fqp-result\"}}, :nextjournal/blob-id \"5dqp5DDgsJEr3EopKtFdgMB7WQpexv\"}, :nextjournal/render-opts {:id \"solutions.2022.day09/anon-expr-5dshGnyCYVfgr3cV4vKRqeFt2v8Fqp-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day09/markdown-5dtB6RiPGKdNv3iHE7ZhAu7Ysma6TP\"} [:p [:<> \"And part 2 is \"] [:em [:<> \"10\"]] [:<> \" knots\"]]], :nextjournal/render-opts {:id \"solutions.2022.day09/markdown-5dtB6RiPGKdNv3iHE7ZhAu7Ysma6TP\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe\"}} {:path [], :nextjournal/value \"(defn part-2\\n  [input]\\n  (move-length 10 input))\", :nextjournal/render-opts {:loc {:line 118, :end-line 120, :column 1, :end-column 26}, :id \"solutions.2022.day09/part-2-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day09/markdown-5dspMqxdw3uNK6Pgan8eaYi57sm4wP#2\"} [:p [:<> \"Which gives our answer\"]]], :nextjournal/render-opts {:id \"solutions.2022.day09/markdown-5dspMqxdw3uNK6Pgan8eaYi57sm4wP#2\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value 2443, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5dr3R1ZvHCoRHpxsQq4D4ARv9BQC7o\"}, :nextjournal/render-opts {:id \"solutions.2022.day09/anon-expr-5ds3NJhiXAVBTLsVFex2mJDuuDv1Lr-result\"}}, :nextjournal/blob-id \"5dsT8AjCXgfv5zbS6WKE7iigEjqSod\"}, :nextjournal/render-opts {:id \"solutions.2022.day09/anon-expr-5ds3NJhiXAVBTLsVFex2mJDuuDv1Lr-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}}]}, :nextjournal/viewer {:name nextjournal.clerk.viewer/notebook-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-notebook, :hash \"5duAFDxE4sCnRX71Wo6zeCpC9C3djE\"}}}, :current-path \"src/solutions/2022/day09\", :resource->url {\"/js/viewer.js\" \"https://storage.clerk.garden/nextjournal/clerk-assets@3gzDSuxacxY4YqqmkkG2DNy4Rkux/viewer.js?immutable=true\", \"/css/viewer.css\" \"_data/8VsuB17ZykScJpXQavsNhPqKdep1WsCo4jHpscxg1n8oShucdSKWsgG2d7eBNNtHFCDmG5aRaKoBxBbzR15CidaGxN.css\"}, :index \"src/index.clj\", :html \"<div class=\\\"flex\\\"><div class=\\\"fixed top-2 left-2 md:left-auto md:right-2 z-10\\\"><div class=\\\"relative dark-mode-toggle\\\"><button class=\\\"text-slate-400 hover:text-slate-600 dark:hover:text-white cursor-pointer\\\"><svg class=\\\"w-5 h-5 md:w-4 md:h-4\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"11.9998\\\" cy=\\\"11.9998\\\" r=\\\"5.75375\\\" fill=\\\"currentColor\\\"></circle><g><circle cx=\\\"3.08982\\\" cy=\\\"6.85502\\\" r=\\\"1.71143\\\" transform=\\\"rotate(-60 3.08982 6.85502)\\\" fill=\\\"currentColor\\\"></circle><circle cx=\\\"3.0903\\\" cy=\\\"17.1436\\\" r=\\\"1.71143\\\" transform=\\\"rotate(-120 3.0903 17.1436)\\\" fill=\\\"currentColor\\\"></circle><circle cx=\\\"12\\\" cy=\\\"22.2881\\\" r=\\\"1.71143\\\" fill=\\\"currentColor\\\"></circle><circle cx=\\\"20.9101\\\" cy=\\\"17.1436\\\" r=\\\"1.71143\\\" transform=\\\"rotate(-60 20.9101 17.1436)\\\" fill=\\\"currentColor\\\"></circle><circle cx=\\\"20.9101\\\" cy=\\\"6.8555\\\" r=\\\"1.71143\\\" transform=\\\"rotate(-120 20.9101 6.8555)\\\" fill=\\\"currentColor\\\"></circle><circle cx=\\\"12\\\" cy=\\\"1.71143\\\" r=\\\"1.71143\\\" fill=\\\"currentColor\\\"></circle></g></svg></button></div></div><div class=\\\"flex-auto w-screen scroll-container\\\"><div class=\\\"flex flex-col items-center notebook-viewer flex-auto\\\" style=\\\"margin-left:0px\\\"><div class=\\\"viewer w-full max-w-prose px-8 not-prose mt-3\\\"><div class=\\\"mb-8 text-xs sans-serif text-slate-400\\\"><a href=\\\"./../../../../\\\" class=\\\"font-medium border-b border-dotted border-slate-300 hover:text-indigo-500 hover:border-indigo-500 dark:border-slate-500 dark:hover:text-white dark:hover:border-white transition\\\">Index</a><span class=\\\"mx-2\\\">•</span><span>Generated with <a href=\\\"https://clerk.vision\\\" class=\\\"font-medium border-b border-dotted border-slate-300 hover:text-indigo-500 hover:border-indigo-500 dark:border-slate-500 dark:hover:text-white dark:hover:border-white transition\\\">Clerk</a> from <a class=\\\"font-medium border-b border-dotted border-slate-300 hover:text-indigo-500 hover:border-indigo-500 dark:border-slate-500 dark:hover:text-white dark:hover:border-white transition\\\">src/solutions/2022/day09.clj</a></span></div></div><div class=\\\"result-viewer viewer html-viewer w-full max-w-prose px-8\\\" data-block-id=\\\"solutions.2022.day09/anon-expr-5duJTchqbH1QGrJ1yWgVk6pU5Nkpii-result\\\"><div class=\\\"relative\\\"><div class=\\\"overflow-x-auto\\\"><div><article class=\\\"day-desc\\\"><h2>--- Day 9: Rope Bridge ---</h2><p>This rope bridge creaks as you walk along it. You aren't sure how old it is, or whether it can even support your weight.</p>\\n<p>It seems to support the Elves just fine, though. The bridge spans a gorge which was carved out by the massive river far below you.</p>\\n<p>You step carefully; as you do, the ropes stretch and twist. You decide to distract yourself by modeling rope physics; maybe you can even figure out where <em>not</em> to step.</p>\\n<p>Consider a rope with a knot at each end; these knots mark the <em>head</em> and the <em>tail</em> of the rope. If the head moves far enough away from the tail, the tail is pulled toward the head.</p>\\n<p>Due to nebulous reasoning involving <a href=\\\"https://en.wikipedia.org/wiki/Planck_units#Planck_length\\\" target=\\\"_blank\\\">Planck lengths</a>, you should be able to model the positions of the knots on a two-dimensional grid. Then, by following a hypothetical <em>series of motions</em> (your puzzle input) for the head, you can determine how the tail will move.</p>\\n<p><span title=\\\"I'm an engineer, not a physicist!\\\">Due to the aforementioned Planck lengths</span>, the rope must be quite short; in fact, the head (<code>H</code>) and tail (<code>T</code>) must <em>always be touching</em> (diagonally adjacent and even overlapping both count as touching):</p>\\n<pre><code>....\\n.TH.\\n....\\n\\n....\\n.H..\\n..T.\\n....\\n\\n...\\n.H. (H covers T)\\n...\\n</code></pre>\\n<p>If the head is ever two steps directly up, down, left, or right from the tail, the tail must also move one step in that direction so it remains close enough:</p>\\n<pre><code>.....    .....    .....\\n.TH.. -&gt; .T.H. -&gt; ..TH.\\n.....    .....    .....\\n\\n...    ...    ...\\n.T.    .T.    ...\\n.H. -&gt; ... -&gt; .T.\\n...    .H.    .H.\\n...    ...    ...\\n</code></pre>\\n<p>Otherwise, if the head and tail aren't touching and aren't in the same row or column, the tail always moves one step diagonally to keep up:</p>\\n<pre><code>.....    .....    .....\\n.....    ..H..    ..H..\\n..H.. -&gt; ..... -&gt; ..T..\\n.T...    .T...    .....\\n.....    .....    .....\\n\\n.....    .....    .....\\n.....    .....    .....\\n..H.. -&gt; ...H. -&gt; ..TH.\\n.T...    .T...    .....\\n.....    .....    .....\\n</code></pre>\\n<p>You just need to work out where the tail goes as the head follows a series of motions. Assume the head and the tail both start at the same position, overlapping.</p>\\n<p>For example:</p>\\n<pre><code>R 4\\nU 4\\nL 3\\nD 1\\nR 4\\nD 1\\nL 5\\nR 2\\n</code></pre>\\n<p>This series of motions moves the head <em>right</em> four steps, then <em>up</em> four steps, then <em>left</em> three steps, then <em>down</em> one step, and so on. After each step, you'll need to update the position of the tail if the step means the head is no longer adjacent to the tail. Visually, these motions occur as follows (<code>s</code> marks the starting position as a reference point):</p>\\n<pre><code>== Initial State ==\\n\\n......\\n......\\n......\\n......\\nH.....  (H covers T, s)\\n\\n== R 4 ==\\n\\n......\\n......\\n......\\n......\\nTH....  (T covers s)\\n\\n......\\n......\\n......\\n......\\nsTH...\\n\\n......\\n......\\n......\\n......\\ns.TH..\\n\\n......\\n......\\n......\\n......\\ns..TH.\\n\\n== U 4 ==\\n\\n......\\n......\\n......\\n....H.\\ns..T..\\n\\n......\\n......\\n....H.\\n....T.\\ns.....\\n\\n......\\n....H.\\n....T.\\n......\\ns.....\\n\\n....H.\\n....T.\\n......\\n......\\ns.....\\n\\n== L 3 ==\\n\\n...H..\\n....T.\\n......\\n......\\ns.....\\n\\n..HT..\\n......\\n......\\n......\\ns.....\\n\\n.HT...\\n......\\n......\\n......\\ns.....\\n\\n== D 1 ==\\n\\n..T...\\n.H....\\n......\\n......\\ns.....\\n\\n== R 4 ==\\n\\n..T...\\n..H...\\n......\\n......\\ns.....\\n\\n..T...\\n...H..\\n......\\n......\\ns.....\\n\\n......\\n...TH.\\n......\\n......\\ns.....\\n\\n......\\n....TH\\n......\\n......\\ns.....\\n\\n== D 1 ==\\n\\n......\\n....T.\\n.....H\\n......\\ns.....\\n\\n== L 5 ==\\n\\n......\\n....T.\\n....H.\\n......\\ns.....\\n\\n......\\n....T.\\n...H..\\n......\\ns.....\\n\\n......\\n......\\n..HT..\\n......\\ns.....\\n\\n......\\n......\\n.HT...\\n......\\ns.....\\n\\n......\\n......\\nHT....\\n......\\ns.....\\n\\n== R 2 ==\\n\\n......\\n......\\n.H....  (H covers T)\\n......\\ns.....\\n\\n......\\n......\\n.TH...\\n......\\ns.....\\n</code></pre>\\n<p>After simulating the rope, you can count up all of the positions the <em>tail visited at least once</em>. In this diagram, <code>s</code> again marks the starting position (which the tail also visited) and <code>#</code> marks other positions the tail visited:</p>\\n<pre><code>..##..\\n...##.\\n.####.\\n....#.\\ns###..\\n</code></pre>\\n<p>So, there are <code><em>13</em></code> positions the tail visited at least once.</p>\\n<p>Simulate your complete hypothetical series of motions. <em>How many positions does the tail of the rope visit at least once?</em></p>\\n</article></div></div></div></div><div data-block-id=\\\"solutions.2022.day09/markdown-5dtzyKViAUAsCBmZN7GF6UJn8WKPfH\\\" class=\\\"viewer markdown-viewer w-full max-w-prose px-8\\\"><h2 id=\\\"solution\\\">Solution</h2><p>From spotting trees to rope physics! Can&#x27;t see these problems are dull at<!-- --> <!-- -->least...</p><p>This one stumped me for a while too, doesn&#x27;t bode well for the rest<!-- --> <!-- -->of the week but c&#x27;est la vie. Onwards and upwards.</p><p>Today we&#x27;re tasked with tracing &quot;rope physics&quot;, given the head and the tail<!-- --> <!-- -->of a rope and certain rules; map out all the spots the rope has been. Those<!-- --> <!-- -->rules are defined as:</p><ul><li>The head and tail of the rope must always be touching (adjacent and overlapping count)</li><li>If the head is two steps away cardinally, the tail must move one step in that direction</li><li>If they&#x27;re not touching or in the same row/colum, the tail moves diagonally once to keep up</li></ul><p>That&#x27;s explained more with examples above, so let&#x27;s dive right into solving it.</p><p>First things first, let&#x27;s load our input and parse it</p><p>Given the list of movement commands <code>(&quot;R 4&quot; &quot;L 2&quot;)</code>, this is exactly the same<!-- --> <!-- -->as <code>(&quot;R&quot; &quot;R&quot; &quot;R&quot; &quot;R&quot; &quot;L&quot; &quot;L&quot;)</code>; so let&#x27;s transform the input to look like that<!-- --> <!-- -->to make things easier and let us easily handle the tail movement rules.</p></div><div data-block-id=\\\"solutions.2022.day09/input-code\\\" class=\\\"viewer code-viewer w-full max-w-wide\\\"><div class=\\\"cm-editor\\\"><cm-scroller><div class=\\\"cm-content whitespace-pre\\\"><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">(<span class=\\\"cmt-keyword\\\">def</span> <span class=\\\"cmt-variableName\\\">input</span> (<span class=\\\"cmt-keyword\\\">-&gt;&gt;</span> (<span class=\\\"cmt-keyword\\\">slurp</span> (<span class=\\\"cmt-keyword\\\">io/resource</span> <span class=\\\"cmt-string\\\">&quot;</span><span class=\\\"cmt-string\\\">inputs/2022/day09.txt</span><span class=\\\"cmt-string\\\">&quot;</span>))            <span class=\\\"cmt-comment\\\">;; Load the resource</span></div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">                str/split-lines                                          <span class=\\\"cmt-comment\\\">;; Split into lines</span></div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">                (<span class=\\\"cmt-keyword\\\">mapcat</span> #(<span class=\\\"cmt-keyword\\\">let</span> [[dir c] (<span class=\\\"cmt-keyword\\\">str/split</span> % #<span class=\\\"cmt-string\\\">&quot;</span><span class=\\\"cmt-string\\\"> </span><span class=\\\"cmt-string\\\">&quot;</span>)]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">                           (<span class=\\\"cmt-keyword\\\">repeat</span> (<span class=\\\"cmt-keyword\\\">parse-long</span> (<span class=\\\"cmt-keyword\\\">str</span> c)) (<span class=\\\"cmt-keyword\\\">str</span> dir))))))   <span class=\\\"cmt-comment\\\">;; Spread commands out individually</span></div></div></cm-scroller></div></div><div class=\\\"result-viewer viewer sequential-viewer w-full max-w-prose px-8\\\" data-block-id=\\\"solutions.2022.day09/input-result\\\"><div class=\\\"relative\\\"><div class=\\\"overflow-x-auto\\\"><span class=\\\"inspected-value whitespace-nowrap\\\"><span><span class=\\\"group hover:bg-indigo-100 rounded-sm hover:shadow cursor-pointer\\\"><span class=\\\"text-slate-400 group-hover:text-indigo-700\\\"><svg viewBox=\\\"0 0 100 100\\\" class=\\\"w-[7px] h-[7px] fill-current inline-block transition-all mr-[1px] -mt-[2px] rotate-90\\\"><polygon points=\\\"5.9,88.2 50,11.8 94.1,88.2 \\\"></polygon></svg></span><span class=\\\"group-hover:text-indigo-700\\\">(</span></span><span class=\\\"inspected-value inline-flex\\\"><span class=\\\"cmt-string\\\"><span>&quot;</span></span><div><span class=\\\"cmt-string\\\"><span class=\\\"whitespace-pre\\\">D</span>&quot;</span></div></span> <span class=\\\"inspected-value inline-flex\\\"><span class=\\\"cmt-string\\\"><span>&quot;</span></span><div><span class=\\\"cmt-string\\\"><span class=\\\"whitespace-pre\\\">D</span>&quot;</span></div></span> <span class=\\\"inspected-value inline-flex\\\"><span class=\\\"cmt-string\\\"><span>&quot;</span></span><div><span class=\\\"cmt-string\\\"><span class=\\\"whitespace-pre\\\">R</span>&quot;</span></div></span> <span class=\\\"inspected-value inline-flex\\\"><span class=\\\"cmt-string\\\"><span>&quot;</span></span><div><span class=\\\"cmt-string\\\"><span class=\\\"whitespace-pre\\\">R</span>&quot;</span></div></span> <span class=\\\"inspected-value inline-flex\\\"><span class=\\\"cmt-string\\\"><span>&quot;</span></span><div><span class=\\\"cmt-string\\\"><span class=\\\"whitespace-pre\\\">D</span>&quot;</span></div></span> <span class=\\\"inspected-value inline-flex\\\"><span class=\\\"cmt-string\\\"><span>&quot;</span></span><div><span class=\\\"cmt-string\\\"><span class=\\\"whitespace-pre\\\">U</span>&quot;</span></div></span> <span class=\\\"inspected-value inline-flex\\\"><span class=\\\"cmt-string\\\"><span>&quot;</span></span><div><span class=\\\"cmt-string\\\"><span class=\\\"whitespace-pre\\\">L</span>&quot;</span></div></span> <span class=\\\"inspected-value inline-flex\\\"><span class=\\\"cmt-string\\\"><span>&quot;</span></span><div><span class=\\\"cmt-string\\\"><span class=\\\"whitespace-pre\\\">L</span>&quot;</span></div></span> <span class=\\\"inspected-value inline-flex\\\"><span class=\\\"cmt-string\\\"><span>&quot;</span></span><div><span class=\\\"cmt-string\\\"><span class=\\\"whitespace-pre\\\">U</span>&quot;</span></div></span> <span class=\\\"inspected-value inline-flex\\\"><span class=\\\"cmt-string\\\"><span>&quot;</span></span><div><span class=\\\"cmt-string\\\"><span class=\\\"whitespace-pre\\\">U</span>&quot;</span></div></span> <span class=\\\"inspected-value inline-flex\\\"><span class=\\\"cmt-string\\\"><span>&quot;</span></span><div><span class=\\\"cmt-string\\\"><span class=\\\"whitespace-pre\\\">D</span>&quot;</span></div></span> <span class=\\\"inspected-value inline-flex\\\"><span class=\\\"cmt-string\\\"><span>&quot;</span></span><div><span class=\\\"cmt-string\\\"><span class=\\\"whitespace-pre\\\">R</span>&quot;</span></div></span> <span class=\\\"inspected-value inline-flex\\\"><span class=\\\"cmt-string\\\"><span>&quot;</span></span><div><span class=\\\"cmt-string\\\"><span class=\\\"whitespace-pre\\\">R</span>&quot;</span></div></span> <span class=\\\"inspected-value inline-flex\\\"><span class=\\\"cmt-string\\\"><span>&quot;</span></span><div><span class=\\\"cmt-string\\\"><span class=\\\"whitespace-pre\\\">U</span>&quot;</span></div></span> <span class=\\\"inspected-value inline-flex\\\"><span class=\\\"cmt-string\\\"><span>&quot;</span></span><div><span class=\\\"cmt-string\\\"><span class=\\\"whitespace-pre\\\">U</span>&quot;</span></div></span> <span class=\\\"inspected-value inline-flex\\\"><span class=\\\"cmt-string\\\"><span>&quot;</span></span><div><span class=\\\"cmt-string\\\"><span class=\\\"whitespace-pre\\\">R</span>&quot;</span></div></span> <span class=\\\"inspected-value inline-flex\\\"><span class=\\\"cmt-string\\\"><span>&quot;</span></span><div><span class=\\\"cmt-string\\\"><span class=\\\"whitespace-pre\\\">R</span>&quot;</span></div></span> <span class=\\\"inspected-value inline-flex\\\"><span class=\\\"cmt-string\\\"><span>&quot;</span></span><div><span class=\\\"cmt-string\\\"><span class=\\\"whitespace-pre\\\">L</span>&quot;</span></div></span> <span class=\\\"inspected-value inline-flex\\\"><span class=\\\"cmt-string\\\"><span>&quot;</span></span><div><span class=\\\"cmt-string\\\"><span class=\\\"whitespace-pre\\\">D</span>&quot;</span></div></span> <span class=\\\"inspected-value inline-flex\\\"><span class=\\\"cmt-string\\\"><span>&quot;</span></span><div><span class=\\\"cmt-string\\\"><span class=\\\"whitespace-pre\\\">D</span>&quot;</span></div></span> <span style=\\\"border-radius:2px;font-size:11px;top:-1px\\\" class=\\\"sans-serif relative whitespace-nowrap text-gray-400 dark:text-slate-300\\\">11327<!-- --> more elided</span><span>)</span></span></span></div></div></div><div data-block-id=\\\"solutions.2022.day09/markdown-5dr9AWWqc5X7WyXh7KZsHNPLuG65mS\\\" class=\\\"viewer markdown-viewer w-full max-w-prose px-8\\\"><p>Smashing. Now we have a flat input, it&#x27;s just a case of reducing over it to<!-- --> <!-- -->advance the state.</p><p>Next we define a function to move the head of the rope. Since we have<!-- --> <!-- -->single-step movements now, we can just use <code>inc</code> and <code>dec</code>.</p></div><div data-block-id=\\\"solutions.2022.day09/move-head-code\\\" class=\\\"viewer code-viewer w-full max-w-wide\\\"><div class=\\\"cm-editor\\\"><cm-scroller><div class=\\\"cm-content whitespace-pre\\\"><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">(<span class=\\\"cmt-keyword\\\">defn</span> <span class=\\\"cmt-variableName\\\">move-head</span> [[x y] direction]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">  (<span class=\\\"cmt-keyword\\\">condp</span> = direction</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">    <span class=\\\"cmt-string\\\">&quot;</span><span class=\\\"cmt-string\\\">R</span><span class=\\\"cmt-string\\\">&quot;</span> [x (<span class=\\\"cmt-keyword\\\">inc</span> y)]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">    <span class=\\\"cmt-string\\\">&quot;</span><span class=\\\"cmt-string\\\">U</span><span class=\\\"cmt-string\\\">&quot;</span> [(<span class=\\\"cmt-keyword\\\">dec</span> x) y]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">    <span class=\\\"cmt-string\\\">&quot;</span><span class=\\\"cmt-string\\\">L</span><span class=\\\"cmt-string\\\">&quot;</span> [x (<span class=\\\"cmt-keyword\\\">dec</span> y)]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">    <span class=\\\"cmt-string\\\">&quot;</span><span class=\\\"cmt-string\\\">D</span><span class=\\\"cmt-string\\\">&quot;</span> [(<span class=\\\"cmt-keyword\\\">inc</span> x) y]))</div></div></cm-scroller></div></div><div data-block-id=\\\"solutions.2022.day09/markdown-5drgoChe4mWcoeuvU52Rk5dfPqMERU\\\" class=\\\"viewer markdown-viewer w-full max-w-prose px-8\\\"><p>Then we have a function to mvoe the tail of the rope.</p><p>This handles all our rules, ensuring that the tail is always at least next to<!-- --> <!-- -->the head by updating the co-ordinate using <code>clojure.math/signum</code> to return<!-- --> <!-- -->the sign of the change (new in 1.11).</p></div><div data-block-id=\\\"solutions.2022.day09/move-tail-code\\\" class=\\\"viewer code-viewer w-full max-w-wide\\\"><div class=\\\"cm-editor\\\"><cm-scroller><div class=\\\"cm-content whitespace-pre\\\"><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">(<span class=\\\"cmt-keyword\\\">defn</span> <span class=\\\"cmt-variableName\\\">move-tail</span> [[head-x head-y] [tail-x tail-y]]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">  (<span class=\\\"cmt-keyword\\\">let</span> [dx (<span class=\\\"cmt-keyword\\\">-</span> head-x tail-x)</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">        dy (<span class=\\\"cmt-keyword\\\">-</span> head-y tail-y)]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">    (<span class=\\\"cmt-keyword\\\">if</span> (<span class=\\\"cmt-keyword\\\">and</span> (<span class=\\\"cmt-keyword\\\">&lt;</span> (<span class=\\\"cmt-keyword\\\">abs</span> dx) <span class=\\\"cmt-literal\\\">2</span>)</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">             (<span class=\\\"cmt-keyword\\\">&lt;</span> (<span class=\\\"cmt-keyword\\\">abs</span> dy) <span class=\\\"cmt-literal\\\">2</span>))</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">      [tail-x tail-y]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">      [(<span class=\\\"cmt-keyword\\\">+</span> tail-x (<span class=\\\"cmt-keyword\\\">math/signum</span> dx)) (<span class=\\\"cmt-keyword\\\">+</span> tail-y (<span class=\\\"cmt-keyword\\\">math/signum</span> dy))])))</div></div></cm-scroller></div></div><div data-block-id=\\\"solutions.2022.day09/markdown-5dskBJoLHmvMom3TZYnhs4wfrHCfM7\\\" class=\\\"viewer markdown-viewer w-full max-w-prose px-8\\\"><p>Next we have a function to perform a movement command given a rope vector<!-- --> <!-- -->(more on that in the next function) and a single-step movement command.</p><p>We loop over the rope vector and update the vector based on how far through<!-- --> <!-- -->it we are. The first element is the head, and once we reach the end we can<!-- --> <!-- -->return the new vector.</p></div><div data-block-id=\\\"solutions.2022.day09/move-code\\\" class=\\\"viewer code-viewer w-full max-w-wide\\\"><div class=\\\"cm-editor\\\"><cm-scroller><div class=\\\"cm-content whitespace-pre\\\"><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">(<span class=\\\"cmt-keyword\\\">defn</span> <span class=\\\"cmt-variableName\\\">move</span> [rope-vec direction]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">  (<span class=\\\"cmt-keyword\\\">loop</span> [ropes rope-vec</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">         index <span class=\\\"cmt-literal\\\">0</span>]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">    (<span class=\\\"cmt-keyword\\\">let</span> [next-pos (<span class=\\\"cmt-keyword\\\">inc</span> index)]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">      (<span class=\\\"cmt-keyword\\\">cond</span></div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">        (<span class=\\\"cmt-keyword\\\">=</span> index (<span class=\\\"cmt-keyword\\\">count</span> rope-vec)) ropes</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">        (<span class=\\\"cmt-keyword\\\">=</span> index <span class=\\\"cmt-literal\\\">0</span>) (<span class=\\\"cmt-keyword\\\">recur</span> (<span class=\\\"cmt-keyword\\\">assoc</span> ropes index (<span class=\\\"cmt-keyword\\\">move-head</span> (<span class=\\\"cmt-keyword\\\">ropes</span> index) direction)) next-pos)</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">        <span class=\\\"cmt-atom\\\">:else</span> (<span class=\\\"cmt-keyword\\\">recur</span> (<span class=\\\"cmt-keyword\\\">assoc</span> ropes index (<span class=\\\"cmt-keyword\\\">move-tail</span> (<span class=\\\"cmt-keyword\\\">ropes</span> (<span class=\\\"cmt-keyword\\\">dec</span> index)) (<span class=\\\"cmt-keyword\\\">ropes</span> index))) next-pos)))))</div></div></cm-scroller></div></div><div data-block-id=\\\"solutions.2022.day09/markdown-5dtUtSSxaymRRigP1AiyGzZ6Y9kfNm\\\" class=\\\"viewer markdown-viewer w-full max-w-prose px-8\\\"><p>Lastly we have a general solution for both parts, since they share a common<!-- --> <em>thread</em> (I&#x27;m here all week) in that part 1 has 2 knots and part 2 has 10<!-- --> <!-- -->knots, so we can abstract the implementation to use a vector instead and act<!-- --> <!-- -->accordingly.</p><p>So we take the length of the vector and the movement commands, and iterate<!-- --> <!-- -->through the commands until none are left. We use a set for <code>past-tails</code> so we<!-- --> <!-- -->don&#x27;t have to worry about handling duplicates later.</p></div><div data-block-id=\\\"solutions.2022.day09/move-length-code\\\" class=\\\"viewer code-viewer w-full max-w-wide\\\"><div class=\\\"cm-editor\\\"><cm-scroller><div class=\\\"cm-content whitespace-pre\\\"><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">(<span class=\\\"cmt-keyword\\\">defn</span> <span class=\\\"cmt-variableName\\\">move-length</span> [length input]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">  (<span class=\\\"cmt-keyword\\\">loop</span> [rope-vec (<span class=\\\"cmt-keyword\\\">vec</span> (<span class=\\\"cmt-keyword\\\">repeat</span> length [<span class=\\\"cmt-literal\\\">0</span> <span class=\\\"cmt-literal\\\">0</span>]))</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">         past-tails #{}</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">         cmds input]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">    (<span class=\\\"cmt-keyword\\\">let</span> [tails (<span class=\\\"cmt-keyword\\\">conj</span> past-tails (<span class=\\\"cmt-keyword\\\">last</span> rope-vec))</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">          [cmd &amp; rst] cmds]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">      (<span class=\\\"cmt-keyword\\\">if</span> (<span class=\\\"cmt-keyword\\\">empty?</span> cmds)</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">        (<span class=\\\"cmt-keyword\\\">count</span> tails)</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">        (<span class=\\\"cmt-keyword\\\">recur</span> (<span class=\\\"cmt-keyword\\\">move</span> rope-vec cmd) tails rst)))))</div></div></cm-scroller></div></div><div data-block-id=\\\"solutions.2022.day09/markdown-5duBv1e2NWRGvcRasNUkD8JFHUgDhm\\\" class=\\\"viewer markdown-viewer w-full max-w-prose px-8\\\"><p>As above, part 1 is just 2 knots</p></div><div data-block-id=\\\"solutions.2022.day09/part-1-code\\\" class=\\\"viewer code-viewer w-full max-w-wide\\\"><div class=\\\"cm-editor\\\"><cm-scroller><div class=\\\"cm-content whitespace-pre\\\"><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">(<span class=\\\"cmt-keyword\\\">defn</span> <span class=\\\"cmt-variableName\\\">part-1</span></div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">  [input]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">  (<span class=\\\"cmt-keyword\\\">move-length</span> <span class=\\\"cmt-literal\\\">2</span> input))</div></div></cm-scroller></div></div><div data-block-id=\\\"solutions.2022.day09/markdown-5dspMqxdw3uNK6Pgan8eaYi57sm4wP\\\" class=\\\"viewer markdown-viewer w-full max-w-prose px-8\\\"><p>Which gives our answer</p></div><div class=\\\"result-viewer viewer number-viewer w-full max-w-prose px-8\\\" data-block-id=\\\"solutions.2022.day09/anon-expr-5dshGnyCYVfgr3cV4vKRqeFt2v8Fqp-result\\\"><div class=\\\"relative\\\"><div class=\\\"overflow-x-auto\\\"><span class=\\\"cmt-number inspected-value\\\">5930</span></div></div></div><div data-block-id=\\\"solutions.2022.day09/markdown-5dtB6RiPGKdNv3iHE7ZhAu7Ysma6TP\\\" class=\\\"viewer markdown-viewer w-full max-w-prose px-8\\\"><p>And part 2 is <em>10</em> knots</p></div><div data-block-id=\\\"solutions.2022.day09/part-2-code\\\" class=\\\"viewer code-viewer w-full max-w-wide\\\"><div class=\\\"cm-editor\\\"><cm-scroller><div class=\\\"cm-content whitespace-pre\\\"><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">(<span class=\\\"cmt-keyword\\\">defn</span> <span class=\\\"cmt-variableName\\\">part-2</span></div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">  [input]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">  (<span class=\\\"cmt-keyword\\\">move-length</span> <span class=\\\"cmt-literal\\\">10</span> input))</div></div></cm-scroller></div></div><div data-block-id=\\\"solutions.2022.day09/markdown-5dspMqxdw3uNK6Pgan8eaYi57sm4wP#2\\\" class=\\\"viewer markdown-viewer w-full max-w-prose px-8\\\"><p>Which gives our answer</p></div><div class=\\\"result-viewer viewer number-viewer w-full max-w-prose px-8\\\" data-block-id=\\\"solutions.2022.day09/anon-expr-5ds3NJhiXAVBTLsVFex2mJDuuDv1Lr-result\\\"><div class=\\\"relative\\\"><div class=\\\"overflow-x-auto\\\"><span class=\\\"cmt-number inspected-value\\\">2443</span></div></div></div></div></div></div><div class=\\\"fixed w-full z-20 top-0 left-0 w-full\\\"></div>\\n\"}".replaceAll('nextjournal.clerk.view/escape-closing-script-tag', 'script')
viewer.init(viewer.read_string(state))
</script></body></html>