<!DOCTYPE html>
<html><head><meta charset="UTF-8"><meta content="width=device-width, initial-scale=1" name="viewport"><meta content="Another whiplash back to difficulty. This one stumped me for a little bit, took a while to have the sizes compute recursively cleanly. But we made it, so let&apos;s run through everything." property="og:description"><meta content="Problem" property="og:title"><meta content="article:clerk" property="og:type"><meta content="summary_large_image" name="twitter:card"><link href="./../../../../_data/8VtDnQGgPmpY9sEDrrcAF9en62cCkj8LzQSfBzwMbkBxxCsmXPFU7wkvzUwha6kzvjGXkj3XRbD4gaW2CrqWE52L9j.css" rel="stylesheet" type="text/css"><script src="https://storage.clerk.garden/nextjournal/clerk-assets@43sknWSpfsWGp1HAfZe1dLuBjmWH/viewer.js?immutable=true" type="module"></script><link href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css" rel="stylesheet" type="text/css"><link href="https://fonts.bunny.net" rel="preconnect"><link href="https://fonts.bunny.net/css?family=fira-mono:400,700%7Cfira-sans:400,400i,500,500i,700,700i%7Cfira-sans-condensed:700,700i%7Cpt-serif:400,400i,700,700i" rel="stylesheet" type="text/css"><style id="extra-styles">em {
    font-style: normal !important;
}

html:not(.dark) pre {
    background-color: #f1f5f9 !important;
    color: #7aaac4 !important;
}

.dark em {
    color: #fff !important;
    text-shadow: 0 0 5px #fff !important;
}

.dark pre {
    background-color: rgb(31 41 55 / var(--tw-bg-opacity)) !important;
}

html:not(.dark) em {
    color: #000 !important;
    text-shadow: 0 0 2px #000 !important;
}

.viewer-result:first-child {
    display: none !important;
}
</style></head><body class="dark:bg-gray-900"><div id="clerk"></div><script type="module">let viewer = nextjournal.clerk.sci_env
let state = "{:bundle? false, :path->doc {\"src/solutions/2022/day07\" {:path [], :nextjournal/value {:toc [{:title \"Problem\", :emoji nil, :path \"#problem\", :items []} {:title \"Solution\", :emoji nil, :path \"#solution\", :items [{:title \"Compute current stack size\", :emoji nil, :path \"#compute-current-stack-size\", :items []} {:title \"Compute all sizes\", :emoji nil, :path \"#compute-all-sizes\", :items []} {:title \"Part 1\", :emoji nil, :path \"#part-1\", :items []} {:title \"Part 2\", :emoji nil, :path \"#part-2\", :items []}]}], :sidenotes? false, :toc-visibility true, :atom-var-name->state #viewer-eval (nextjournal.clerk.render/intern-atoms! {}), :ns #viewer-eval (ns solutions.2022.day07), :file \"src/solutions/2022/day07.clj\", :scope solutions.2022.day07, :bundle? false, :header {:path [], :nextjournal/value [:div.viewer.w-full.max-w-prose.px-8.not-prose.mt-3 [:div.mb-8.text-xs.sans-serif.text-slate-400 nil [:<> [:a.font-medium.border-b.border-dotted.border-slate-300.hover:text-indigo-500.hover:border-indigo-500.dark:border-slate-500.dark:hover:text-white.dark:hover:border-white.transition {:href \"./../../../../\"} \"Index\"] [:span.mx-2 \"â€¢\"]] [:span \"Served from \" [:a.font-medium.border-b.border-dotted.border-slate-300.hover:text-indigo-500.hover:border-indigo-500.dark:border-slate-500.dark:hover:text-white.dark:hover:border-white.transition {:href \"https://clerk.vision\"} \"Clerk\"] nil]]], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}, :open-graph {:type \"article:clerk\", :title \"Problem\", :description \"Another whiplash back to difficulty. This one stumped me for a little bit, took a while to have the sizes compute recursively cleanly. But we made it, so let's run through everything.\"}, :title \"Problem\", :blocks [{:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day07/markdown-5dqq5acBASUPKy7JX3Uoyxc1KPMN9A\"} [\"h1\" {:id \"problem\"} [:<> \"Problem\"]]], :nextjournal/render-opts {:id \"solutions.2022.day07/markdown-5dqq5acBASUPKy7JX3Uoyxc1KPMN9A\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [:div {:dangerouslySetInnerHTML {:__html \"<article class=\\\"day-desc\\\"><h2>--- Day 7: No Space Left On Device ---</h2><p>You can hear birds chirping and raindrops hitting leaves as the expedition proceeds. Occasionally, you can even hear much louder sounds in the distance; how big do the animals get out here, anyway?</p>\\n<p>The device the Elves gave you has problems with more than just its communication system. You try to run a system update:</p>\\n<pre><code>$ system-update --please --pretty-please-with-sugar-on-top\\n<span title=\\\"E099 PROGRAMMER IS OVERLY POLITE\\\">Error</span>: No space left on device\\n</code></pre>\\n<p>Perhaps you can delete some files to make space for the update?</p>\\n<p>You browse around the filesystem to assess the situation and save the resulting terminal output (your puzzle input). For example:</p>\\n<pre><code>$ cd /\\n$ ls\\ndir a\\n14848514 b.txt\\n8504156 c.dat\\ndir d\\n$ cd a\\n$ ls\\ndir e\\n29116 f\\n2557 g\\n62596 h.lst\\n$ cd e\\n$ ls\\n584 i\\n$ cd ..\\n$ cd ..\\n$ cd d\\n$ ls\\n4060174 j\\n8033020 d.log\\n5626152 d.ext\\n7214296 k\\n</code></pre>\\n<p>The filesystem consists of a tree of files (plain data) and directories (which can contain other directories or files). The outermost directory is called <code>/</code>. You can navigate around the filesystem, moving into or out of directories and listing the contents of the directory you're currently in.</p>\\n<p>Within the terminal output, lines that begin with <code>$</code> are <em>commands you executed</em>, very much like some modern computers:</p>\\n<ul>\\n<li><code>cd</code> means <em>change directory</em>. This changes which directory is the current directory, but the specific result depends on the argument:\\n  <ul>\\n  <li><code>cd x</code> moves <em>in</em> one level: it looks in the current directory for the directory named <code>x</code> and makes it the current directory.</li>\\n  <li><code>cd ..</code> moves <em>out</em> one level: it finds the directory that contains the current directory, then makes that directory the current directory.</li>\\n  <li><code>cd /</code> switches the current directory to the outermost directory, <code>/</code>.</li>\\n  </ul>\\n</li>\\n<li><code>ls</code> means <em>list</em>. It prints out all of the files and directories immediately contained by the current directory:\\n  <ul>\\n  <li><code>123 abc</code> means that the current directory contains a file named <code>abc</code> with size <code>123</code>.</li>\\n  <li><code>dir xyz</code> means that the current directory contains a directory named <code>xyz</code>.</li>\\n  </ul>\\n</li>\\n</ul>\\n<p>Given the commands and output in the example above, you can determine that the filesystem looks visually like this:</p>\\n<pre><code>- / (dir)\\n  - a (dir)\\n    - e (dir)\\n      - i (file, size=584)\\n    - f (file, size=29116)\\n    - g (file, size=2557)\\n    - h.lst (file, size=62596)\\n  - b.txt (file, size=14848514)\\n  - c.dat (file, size=8504156)\\n  - d (dir)\\n    - j (file, size=4060174)\\n    - d.log (file, size=8033020)\\n    - d.ext (file, size=5626152)\\n    - k (file, size=7214296)\\n</code></pre>\\n<p>Here, there are four directories: <code>/</code> (the outermost directory), <code>a</code> and <code>d</code> (which are in <code>/</code>), and <code>e</code> (which is in <code>a</code>). These directories also contain files of various sizes.</p>\\n<p>Since the disk is full, your first step should probably be to find directories that are good candidates for deletion. To do this, you need to determine the <em>total size</em> of each directory. The total size of a directory is the sum of the sizes of the files it contains, directly or indirectly. (Directories themselves do not count as having any intrinsic size.)</p>\\n<p>The total sizes of the directories above can be found as follows:</p>\\n<ul>\\n<li>The total size of directory <code>e</code> is <em>584</em> because it contains a single file <code>i</code> of size 584 and no other directories.</li>\\n<li>The directory <code>a</code> has total size <em>94853</em> because it contains files <code>f</code> (size 29116), <code>g</code> (size 2557), and <code>h.lst</code> (size 62596), plus file <code>i</code> indirectly (<code>a</code> contains <code>e</code> which contains <code>i</code>).</li>\\n<li>Directory <code>d</code> has total size <em>24933642</em>.</li>\\n<li>As the outermost directory, <code>/</code> contains every file. Its total size is <em>48381165</em>, the sum of the size of every file.</li>\\n</ul>\\n<p>To begin, find all of the directories with a total size of <em>at most 100000</em>, then calculate the sum of their total sizes. In the example above, these directories are <code>a</code> and <code>e</code>; the sum of their total sizes is <code><em>95437</em></code> (94853 + 584). (As in this example, this process can count files more than once!)</p>\\n<p>Find all of the directories with a total size of at most 100000. <em>What is the sum of the total sizes of those directories?</em></p>\\n</article><article class=\\\"day-desc\\\"><h2 id=\\\"part2\\\">--- Part Two ---</h2><p>Now, you're ready to choose a directory to delete.</p>\\n<p>The total disk space available to the filesystem is <code><em>70000000</em></code>. To run the update, you need unused space of at least <code><em>30000000</em></code>. You need to find a directory you can delete that will <em>free up enough space</em> to run the update.</p>\\n<p>In the example above, the total size of the outermost directory (and thus the total amount of used space) is <code>48381165</code>; this means that the size of the <em>unused</em> space must currently be <code>21618835</code>, which isn't quite the <code>30000000</code> required by the update. Therefore, the update still requires a directory with total size of at least <code>8381165</code> to be deleted before it can run.</p>\\n<p>To achieve this, you have the following options:</p>\\n<ul>\\n<li>Delete directory <code>e</code>, which would increase unused space by <code>584</code>.</li>\\n<li>Delete directory <code>a</code>, which would increase unused space by <code>94853</code>.</li>\\n<li>Delete directory <code>d</code>, which would increase unused space by <code>24933642</code>.</li>\\n<li>Delete directory <code>/</code>, which would increase unused space by <code>48381165</code>.</li>\\n</ul>\\n<p>Directories <code>e</code> and <code>a</code> are both too small; deleting them would not free up enough space. However, directories <code>d</code> and <code>/</code> are both big enough! Between these, choose the <em>smallest</em>: <code>d</code>, increasing unused space by <code><em>24933642</em></code>.</p>\\n<p>Find the smallest directory that, if deleted, would free up enough space on the filesystem to run the update. <em>What is the total size of that directory?</em></p>\\n</article>\"}}], :nextjournal/visibility {:code :hide, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}, :nextjournal/render-opts {:id \"solutions.2022.day07/anon-expr-5dsfEkcGLGaU6tu352PuCT8dB54tdk-result\"}}, :nextjournal/blob-id \"5dtycB4GjMwRhSwqvctwEtUcFY1gFh\", :nextjournal/fetch-opts {:blob-id \"5dtycB4GjMwRhSwqvctwEtUcFY1gFh\"}, :nextjournal/hash \"8Vvs6rP16GpLH4x9AC7K1rRz2nRJxeh4fXpEYyJ8c8VavS4fKxZ4p4kJQdtQtwreDewRWKwSs8cNjoUekvoWmqwbSr\"}, :nextjournal/render-opts {:id \"solutions.2022.day07/anon-expr-5dsfEkcGLGaU6tu352PuCT8dB54tdk-result\"}, :nextjournal/visibility {:code :hide, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day07/markdown-5dtxnQYeLw5iNDgVU9YxfZLeqB73wW\"} [\"h1\" {:id \"solution\"} [:<> \"Solution\"]] [:p [:<> \"Another whiplash back to difficulty. This one stumped me for a little bit,\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"took a while to have the sizes compute recursively cleanly. But we made it,\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"so let's run through everything.\"]] [:p [:<> \"Today, we have an interesting one; we have to understand a directory tree\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"from a listing of commands!\"]] [:p [:<> \"The demo input explains things quite well, but in essence we have to create a\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"mapping of all the directory sizes, then reason on it. The first thought here\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"screams \\\"build a tree!\\\", but it turns out to actually be quite overkill. All\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"we need to care about is the total size of a directory, so we can maintain\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"everything in a simple map.\"]] [:p [:<> \"First things first, let's load our input and parse it\"]]], :nextjournal/render-opts {:id \"solutions.2022.day07/markdown-5dtxnQYeLw5iNDgVU9YxfZLeqB73wW\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(def input (->> (slurp (io/resource \\\"inputs/2022/day07.txt\\\")) ;; Load the resource\\n                (str/split-lines)))                            ;; Split into lines\", :nextjournal/render-opts {:loc {:line 30, :end-line 31, :column 1, :end-column 36}, :id \"solutions.2022.day07/input-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [{:path [0], :nextjournal/value \"$ cd /\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsoVKnSNgnKXj1Cv4qvD6xr6wMks7\"}} {:path [1], :nextjournal/value \"$ ls\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsoVKnSNgnKXj1Cv4qvD6xr6wMks7\"}} {:path [2], :nextjournal/value \"dir bgmjrlz\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsoVKnSNgnKXj1Cv4qvD6xr6wMks7\"}} {:path [3], :nextjournal/value \"dir bhp\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsoVKnSNgnKXj1Cv4qvD6xr6wMks7\"}} {:path [4], :nextjournal/value \"dir cbcwz\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsoVKnSNgnKXj1Cv4qvD6xr6wMks7\"}} {:path [5], :nextjournal/value \"169838 fddw.bgw\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsoVKnSNgnKXj1Cv4qvD6xr6wMks7\"}} {:path [6], :nextjournal/value \"dir fvhmzqc\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsoVKnSNgnKXj1Cv4qvD6xr6wMks7\"}} {:path [7], :nextjournal/value \"dir hqmlnpn\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsoVKnSNgnKXj1Cv4qvD6xr6wMks7\"}} {:path [8], :nextjournal/value \"248637 jtwpn.lnr\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsoVKnSNgnKXj1Cv4qvD6xr6wMks7\"}} {:path [9], :nextjournal/value \"319470 lnmrrht.zbn\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsoVKnSNgnKXj1Cv4qvD6xr6wMks7\"}} {:path [10], :nextjournal/value \"99548 pqpslbtn\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsoVKnSNgnKXj1Cv4qvD6xr6wMks7\"}} {:path [11], :nextjournal/value \"dir rbztmqjn\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsoVKnSNgnKXj1Cv4qvD6xr6wMks7\"}} {:path [12], :nextjournal/value \"102720 rqpt\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsoVKnSNgnKXj1Cv4qvD6xr6wMks7\"}} {:path [13], :nextjournal/value \"dir vfrtt\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsoVKnSNgnKXj1Cv4qvD6xr6wMks7\"}} {:path [14], :nextjournal/value \"$ cd bgmjrlz\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsoVKnSNgnKXj1Cv4qvD6xr6wMks7\"}} {:path [15], :nextjournal/value \"$ ls\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsoVKnSNgnKXj1Cv4qvD6xr6wMks7\"}} {:path [16], :nextjournal/value \"dir dhqzgdl\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsoVKnSNgnKXj1Cv4qvD6xr6wMks7\"}} {:path [17], :nextjournal/value \"dir djtchhmw\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsoVKnSNgnKXj1Cv4qvD6xr6wMks7\"}} {:path [18], :nextjournal/value \"dir tvq\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsoVKnSNgnKXj1Cv4qvD6xr6wMks7\"}} {:path [19], :nextjournal/value \"$ cd dhqzgdl\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsoVKnSNgnKXj1Cv4qvD6xr6wMks7\"}} {:nextjournal/value {:n 20, :path [], :total 934, :offset 20}, :nextjournal/viewer {:name nextjournal.clerk.viewer/elision-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-elision, :hash \"5dspwtw9QTXohtFfqtoeWBkFHRFp9w\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/vector-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-coll, :opening-paren \"[\", :closing-paren (\"]\"), :page-size 20, :hash \"5dsPqhnXQ6NY7bfSdVZe5SH2Voaoff\"}, :nextjournal/render-opts {:id \"solutions.2022.day07/input-result\"}}, :nextjournal/blob-id \"5dtn2LFgeL4GgyLCaLKDxQvqn9ZRSG\", :nextjournal/fetch-opts {:blob-id \"5dtn2LFgeL4GgyLCaLKDxQvqn9ZRSG\"}, :nextjournal/hash \"8Vvw9KvDDmb4rJ6JY3my6e6dE1LT7V6E1zpUUTxupUvcok9epzxaCVnpvReBiq499UBScp3S8WjpHa3ajPSobR4CPD\"}, :nextjournal/render-opts {:id \"solutions.2022.day07/input-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day07/markdown-5drKE8XGwHFcuNLAkJdzpSPFiD2yFW\"} [\"h2\" {:id \"compute-current-stack-size\"} [:<> \"Compute current stack size\"]] [:p [:<> \"A helper function to help compute the meat of the problem.\"]] [:p [:<> \"Given the current directory stack and a size, recurse calling with an empty size map and parsing the size.\"]] [:p [:<> \"Given the current directory stack, a map of all the current sizes and a new\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"size; recurse up the directory stack and update the size for every entry.\"]]], :nextjournal/render-opts {:id \"solutions.2022.day07/markdown-5drKE8XGwHFcuNLAkJdzpSPFiD2yFW\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(defn compute-size\\n  ([dir-stack size] (compute-size dir-stack {} (parse-long size)))\\n  ([dir-stack size-map size]\\n   (if (empty? dir-stack)\\n     size-map\\n     (compute-size (pop dir-stack)\\n                   (merge-with + size-map {(apply str dir-stack) size})\\n                   size))))\", :nextjournal/render-opts {:loc {:line 42, :end-line 49, :column 1, :end-column 28}, :id \"solutions.2022.day07/compute-size-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day07/markdown-5drnMnBaV8DyjCguVpCtznB4b2HE9N\"} [:p [:<> \"The main function to give us our directory sizes.\"]] [:p [:<> \"Using \"] [:a {:href \"https://github.com/clojure/core.match\"} [:<> \"core.match\"]] [:<> \" to greatly simplify\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"the parsing logic, we determine what needs to happen given each kind of\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"input.\"]]], :nextjournal/render-opts {:id \"solutions.2022.day07/markdown-5drnMnBaV8DyjCguVpCtznB4b2HE9N\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [{:path [0], :nextjournal/value [{:path [0 0], :nextjournal/value [{:path [0 0 0], :nextjournal/value \"$ cd <dir>\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-string, :page-size 80, :hash \"5drQUUMNRFgC5rkd3p25naP9ThRnCw\"}} {:path [0 0 1], :nextjournal/value \"Update the directory stack. If <dir> is .., pop the stack\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-string, :page-size 80, :hash \"5drQUUMNRFgC5rkd3p25naP9ThRnCw\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/table-row-viewer, :render-fn #viewer-fn (fn [row {:as opts, :keys [path number-col?]}] (into [:tr.hover:bg-gray-200.dark:hover:bg-slate-700 {:class (if (even? (peek path)) \"bg-black/5 dark:bg-gray-800\" \"bg-white dark:bg-gray-900\")}] (map-indexed (fn [idx cell] [:td.pl-6.pr-2.py-1 (when (and (ifn? number-col?) (number-col? idx)) {:class \"text-right\"}) (nextjournal.clerk.render/inspect-presented opts cell)])) row)), :hash \"5dt2e64fJZQ8AecSLyWZUvmr3GpKEs\"}} {:path [0 1], :nextjournal/value [{:path [0 1 0], :nextjournal/value \"$ ls\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-string, :page-size 80, :hash \"5drQUUMNRFgC5rkd3p25naP9ThRnCw\"}} {:path [0 1 1], :nextjournal/value \"Do nothing. This is a trap, we can safely ignore this command and the output\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-string, :page-size 80, :hash \"5drQUUMNRFgC5rkd3p25naP9ThRnCw\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/table-row-viewer, :render-fn #viewer-fn (fn [row {:as opts, :keys [path number-col?]}] (into [:tr.hover:bg-gray-200.dark:hover:bg-slate-700 {:class (if (even? (peek path)) \"bg-black/5 dark:bg-gray-800\" \"bg-white dark:bg-gray-900\")}] (map-indexed (fn [idx cell] [:td.pl-6.pr-2.py-1 (when (and (ifn? number-col?) (number-col? idx)) {:class \"text-right\"}) (nextjournal.clerk.render/inspect-presented opts cell)])) row)), :hash \"5dt2e64fJZQ8AecSLyWZUvmr3GpKEs\"}} {:path [0 2], :nextjournal/value [{:path [0 2 0], :nextjournal/value \"dir <dir>\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-string, :page-size 80, :hash \"5drQUUMNRFgC5rkd3p25naP9ThRnCw\"}} {:path [0 2 1], :nextjournal/value \"Do nothing. Also a trap, since we need to see what's in the directory\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-string, :page-size 80, :hash \"5drQUUMNRFgC5rkd3p25naP9ThRnCw\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/table-row-viewer, :render-fn #viewer-fn (fn [row {:as opts, :keys [path number-col?]}] (into [:tr.hover:bg-gray-200.dark:hover:bg-slate-700 {:class (if (even? (peek path)) \"bg-black/5 dark:bg-gray-800\" \"bg-white dark:bg-gray-900\")}] (map-indexed (fn [idx cell] [:td.pl-6.pr-2.py-1 (when (and (ifn? number-col?) (number-col? idx)) {:class \"text-right\"}) (nextjournal.clerk.render/inspect-presented opts cell)])) row)), :hash \"5dt2e64fJZQ8AecSLyWZUvmr3GpKEs\"}} {:path [0 3], :nextjournal/value [{:path [0 3 0], :nextjournal/value \"<size> <file>\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-string, :page-size 80, :hash \"5drQUUMNRFgC5rkd3p25naP9ThRnCw\"}} {:path [0 3 1], :nextjournal/value \"Compute the size given the current directory stack\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-string, :page-size 80, :hash \"5drQUUMNRFgC5rkd3p25naP9ThRnCw\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/table-row-viewer, :render-fn #viewer-fn (fn [row {:as opts, :keys [path number-col?]}] (into [:tr.hover:bg-gray-200.dark:hover:bg-slate-700 {:class (if (even? (peek path)) \"bg-black/5 dark:bg-gray-800\" \"bg-white dark:bg-gray-900\")}] (map-indexed (fn [idx cell] [:td.pl-6.pr-2.py-1 (when (and (ifn? number-col?) (number-col? idx)) {:class \"text-right\"}) (nextjournal.clerk.render/inspect-presented opts cell)])) row)), :hash \"5dt2e64fJZQ8AecSLyWZUvmr3GpKEs\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/table-body-viewer, :render-fn #viewer-fn (fn [rows opts] (into [:tbody] (map-indexed (fn [idx row] (nextjournal.clerk.render/inspect-presented (update opts :path conj idx) row))) rows)), :hash \"5drS7uu9cHLufmVW24GCUNLcASJ37e\"}}], :nextjournal/width :wide, :nextjournal/render-opts {:num-cols 2, :number-col? #{}, :id \"solutions.2022.day07/anon-expr-5drKKxPCSGyyyfjYzhLCi6ahvzK6BD-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/table-markup-viewer, :render-fn #viewer-fn (fn [head+body opts] [:div (into [nextjournal.clerk.render/render-table-with-sticky-header] (nextjournal.clerk.render/inspect-children opts) head+body)]), :hash \"5dsufpmFMps3gZ2XtLHm3e5XorYXmR\"}}, :nextjournal/blob-id \"5dsXzZKVhADX1iyg79uoAQhFpT2Fen\", :nextjournal/fetch-opts {:blob-id \"5dsXzZKVhADX1iyg79uoAQhFpT2Fen\"}, :nextjournal/hash \"8VuwWpr7sNZUa1bzipUqb88vrQt5oLbLVqYDJCjauErpAsTbYnYDuz1NFHspw7DPFn2u3fTZbxtC7FxZn4YYXPSN4j\"}, :nextjournal/width :wide, :nextjournal/render-opts {:num-cols 2, :number-col? #{}, :id \"solutions.2022.day07/anon-expr-5drKKxPCSGyyyfjYzhLCi6ahvzK6BD-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day07/markdown-5druVgDn67m88dzeHATz3BxSkjHzTh\"} [\"h2\" {:id \"compute-all-sizes\"} [:<> \"Compute all sizes\"]] [:p [:<> \"The table above summarises the match conditions, the bulk of the work happens\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"when we find a file with a size. The size of the file is computed and merged\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"into the size map, along with anything else in the current directory stack.\"]]], :nextjournal/render-opts {:id \"solutions.2022.day07/markdown-5druVgDn67m88dzeHATz3BxSkjHzTh\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(defn compute-sizes [input]\\n  (loop [size-map {}\\n         dir-stack []\\n         cmds input]\\n    (if (empty? cmds)\\n      size-map\\n      (let [[cmd & rst] cmds]\\n        (match/match [(str/split cmd #\\\" \\\")]\\n          [[\\\"$\\\" \\\"cd\\\" \\\"..\\\"]]                 (recur size-map (pop dir-stack) rst)\\n          [[\\\"$\\\" \\\"cd\\\" dir]]                  (recur size-map (conj dir-stack dir) rst)\\n          [(:or [\\\"$\\\" \\\"ls\\\"] [\\\"dir\\\" _])]      (recur size-map dir-stack rst)\\n          [[val _]]                         (recur (merge-with + size-map (compute-size dir-stack val)) dir-stack rst))))))\", :nextjournal/render-opts {:loc {:line 69, :end-line 80, :column 1, :end-column 124}, :id \"solutions.2022.day07/compute-sizes-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day07/markdown-5dtgETDLRuZYKZnxMDEJDxWPCQ9ykZ\"} [\"h2\" {:id \"part-1\"} [:<> \"Part 1\"]] [:p [:<> \"Part 1 is just a case of getting all the directories with a size less than\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"100kb and summing the sizes.\"]] [:p [:<> \"You know the drill here, transducers!\"]]], :nextjournal/render-opts {:id \"solutions.2022.day07/markdown-5dtgETDLRuZYKZnxMDEJDxWPCQ9ykZ\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(defn part-1\\n  [input]\\n  (transduce\\n   (filter (partial >= 100000))\\n   +\\n   0\\n   (vals (compute-sizes input))))\", :nextjournal/render-opts {:loc {:line 88, :end-line 94, :column 1, :end-column 34}, :id \"solutions.2022.day07/part-1-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day07/markdown-5dsCmyHsvB8C19ZLVyDeAMusv11HXT\"} [:p [:<> \"Which gives our answer\"]]], :nextjournal/render-opts {:id \"solutions.2022.day07/markdown-5dsCmyHsvB8C19ZLVyDeAMusv11HXT\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value 1555642, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5drsU4XXFvRiNxHZXiNRRP4gBX7jiW\"}, :nextjournal/render-opts {:id \"solutions.2022.day07/anon-expr-5dqyLURFdt23SKEykkvPQp381ApJNL-result\"}}, :nextjournal/blob-id \"5dtJTpEjvQQnNxwthuNjmJVrzkeE7K\", :nextjournal/fetch-opts {:blob-id \"5dtJTpEjvQQnNxwthuNjmJVrzkeE7K\"}, :nextjournal/hash \"8VvWZBdLuWpeCWyGjgG1bsFC5vfQUKLoaR3GCAW6pzxK67R96mEXQ3vA8Y4JpHENAcLoZdhrcC98MEvUtZeaUVeEwJ\"}, :nextjournal/render-opts {:id \"solutions.2022.day07/anon-expr-5dqyLURFdt23SKEykkvPQp381ApJNL-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day07/markdown-5dss9x4gh9GMpUStoPyrxzsTJv7bNc\"} [\"h2\" {:id \"part-2\"} [:<> \"Part 2\"]] [:p [:<> \"Part 2 we have to find the smallest directory that when deleted frees up\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"enough space.\"]] [:p [:<> \"Let-binding variables so we don't have to compute them more than once\"]]], :nextjournal/render-opts {:id \"solutions.2022.day07/markdown-5dss9x4gh9GMpUStoPyrxzsTJv7bNc\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(defn part-2\\n  [input]\\n  (let [sizes (vals (compute-sizes input))\\n        max (apply max sizes)]\\n    (->> sizes\\n         (filter (partial <= (- max 40000000)))\\n         sort\\n         first)))\", :nextjournal/render-opts {:loc {:line 106, :end-line 113, :column 1, :end-column 18}, :id \"solutions.2022.day07/part-2-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day07/markdown-5dsCmyHsvB8C19ZLVyDeAMusv11HXT#2\"} [:p [:<> \"Which gives our answer\"]]], :nextjournal/render-opts {:id \"solutions.2022.day07/markdown-5dsCmyHsvB8C19ZLVyDeAMusv11HXT#2\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value 5974547, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5drsU4XXFvRiNxHZXiNRRP4gBX7jiW\"}, :nextjournal/render-opts {:id \"solutions.2022.day07/anon-expr-5dstDS4zmbArT87H81wfsNt68WWiqo-result\"}}, :nextjournal/blob-id \"5du7ugAHcyAMxzGC4K7afNid7MgxDs\", :nextjournal/fetch-opts {:blob-id \"5du7ugAHcyAMxzGC4K7afNid7MgxDs\"}, :nextjournal/hash \"8VwdcEyTV2UtvUxUAksvPtctT1r9Go9hkZGBefacpRYh5E4yGbQbwNPD8hBkFSZt2sLeoBjYM4ZGptLRuaNvTUwHbK\"}, :nextjournal/render-opts {:id \"solutions.2022.day07/anon-expr-5dstDS4zmbArT87H81wfsNt68WWiqo-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}}]}, :nextjournal/viewer {:name nextjournal.clerk.viewer/notebook-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-notebook, :hash \"5dsiHybTyGGTEpReRaV7nfNxoDgnKx\"}}}, :current-path \"src/solutions/2022/day07\", :resource->url {\"/js/viewer.js\" \"https://storage.clerk.garden/nextjournal/clerk-assets@43sknWSpfsWGp1HAfZe1dLuBjmWH/viewer.js?immutable=true\", \"/css/viewer.css\" \"_data/8VtDnQGgPmpY9sEDrrcAF9en62cCkj8LzQSfBzwMbkBxxCsmXPFU7wkvzUwha6kzvjGXkj3XRbD4gaW2CrqWE52L9j.css\"}, :index \"src/index.clj\"}".replaceAll('nextjournal.clerk.view/escape-closing-script-tag', 'script')
viewer.init(viewer.read_string(state))
</script></body></html>