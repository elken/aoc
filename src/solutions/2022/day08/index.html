<!DOCTYPE html>
<html><head><meta charset="UTF-8"><meta content="width=device-width, initial-scale=1" name="viewport"><meta content="Ho boy, this was a pain. I couldn&apos;t find a decent library to handle matrices/co-ordinates so writing most of this took paper." property="og:description"><meta content="Solution" property="og:title"><meta content="article:clerk" property="og:type"><meta content="summary_large_image" name="twitter:card"><link href="./../../../../_data/8VsuB17ZykScJpXQavsNhPqKdep1WsCo4jHpscxg1n8oShucdSKWsgG2d7eBNNtHFCDmG5aRaKoBxBbzR15CidaGxN.css" rel="stylesheet" type="text/css"><script src="https://storage.clerk.garden/nextjournal/clerk-assets@3gzDSuxacxY4YqqmkkG2DNy4Rkux/viewer.js?immutable=true" type="module"></script><link href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css" rel="stylesheet" type="text/css"><link href="https://fonts.bunny.net" rel="preconnect"><link href="https://fonts.bunny.net/css?family=fira-mono:400,700%7Cfira-sans:400,400i,500,500i,700,700i%7Cfira-sans-condensed:700,700i%7Cpt-serif:400,400i,700,700i" rel="stylesheet" type="text/css"><style id="extra-styles">em {
    font-style: normal !important;
}

html:not(.dark) pre {
    background-color: #f1f5f9 !important;
    color: #7aaac4 !important;
}

.dark em {
    color: #fff !important;
    text-shadow: 0 0 5px #fff !important;
}

.dark pre {
    background-color: rgb(31 41 55 / var(--tw-bg-opacity)) !important;
}

html:not(.dark) em {
    color: #000 !important;
    text-shadow: 0 0 2px #000 !important;
}

.viewer-result:first-child {
    display: none !important;
}
</style><style id="extra-styles">em {
    font-style: normal !important;
}

html:not(.dark) pre {
    background-color: #f1f5f9 !important;
    color: #7aaac4 !important;
}

.dark em {
    color: #fff !important;
    text-shadow: 0 0 5px #fff !important;
}

.dark pre {
    background-color: rgb(31 41 55 / var(--tw-bg-opacity)) !important;
}

html:not(.dark) em {
    color: #000 !important;
    text-shadow: 0 0 2px #000 !important;
}

.viewer-result:first-child {
    display: none !important;
}
</style></head><body class="dark:bg-gray-900"><div id="clerk"><div class="flex"><div class="fixed top-2 left-2 md:left-auto md:right-2 z-10"><div class="relative dark-mode-toggle"><button class="text-slate-400 hover:text-slate-600 dark:hover:text-white cursor-pointer"><svg class="w-5 h-5 md:w-4 md:h-4" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="11.9998" cy="11.9998" r="5.75375" fill="currentColor"></circle><g><circle cx="3.08982" cy="6.85502" r="1.71143" transform="rotate(-60 3.08982 6.85502)" fill="currentColor"></circle><circle cx="3.0903" cy="17.1436" r="1.71143" transform="rotate(-120 3.0903 17.1436)" fill="currentColor"></circle><circle cx="12" cy="22.2881" r="1.71143" fill="currentColor"></circle><circle cx="20.9101" cy="17.1436" r="1.71143" transform="rotate(-60 20.9101 17.1436)" fill="currentColor"></circle><circle cx="20.9101" cy="6.8555" r="1.71143" transform="rotate(-120 20.9101 6.8555)" fill="currentColor"></circle><circle cx="12" cy="1.71143" r="1.71143" fill="currentColor"></circle></g></svg></button></div></div><div class="flex-auto w-screen scroll-container"><div class="flex flex-col items-center notebook-viewer flex-auto" style="margin-left:0px"><div class="viewer w-full max-w-prose px-8 not-prose mt-3"><div class="mb-8 text-xs sans-serif text-slate-400"><a href="./../../../../" class="font-medium border-b border-dotted border-slate-300 hover:text-indigo-500 hover:border-indigo-500 dark:border-slate-500 dark:hover:text-white dark:hover:border-white transition">Index</a><span class="mx-2">•</span><span>Generated with <a href="https://clerk.vision" class="font-medium border-b border-dotted border-slate-300 hover:text-indigo-500 hover:border-indigo-500 dark:border-slate-500 dark:hover:text-white dark:hover:border-white transition">Clerk</a> from <a class="font-medium border-b border-dotted border-slate-300 hover:text-indigo-500 hover:border-indigo-500 dark:border-slate-500 dark:hover:text-white dark:hover:border-white transition">src/solutions/2022/day08.clj</a></span></div></div><div class="result-viewer viewer html-viewer w-full max-w-prose px-8" data-block-id="solutions.2022.day08/anon-expr-5dtQTNYZ1zbLq4ur2SUEFhbkzrqQUu-result"><div class="relative"><div class="overflow-x-auto"><div><article class="day-desc"><h2>--- Day 8: Treetop Tree House ---</h2><p>The expedition comes across a peculiar patch of tall trees all planted carefully in a grid. The Elves explain that a previous expedition planted these trees as a reforestation effort. Now, they're curious if this would be a good location for a <a href="https://en.wikipedia.org/wiki/Tree_house" target="_blank">tree house</a>.</p>
<p>First, determine whether there is enough tree cover here to keep a tree house <em>hidden</em>. To do this, you need to count the number of trees that are <em>visible from outside the grid</em> when looking directly along a row or column.</p>
<p>The Elves have already launched a <a href="https://en.wikipedia.org/wiki/Quadcopter" target="_blank">quadcopter</a> to generate a map with the height of each tree (<span title="The Elves have already launched a quadcopter (your puzzle input).">your puzzle input</span>). For example:</p>
<pre><code>30373
25512
65332
33549
35390
</code></pre>
<p>Each tree is represented as a single digit whose value is its height, where <code>0</code> is the shortest and <code>9</code> is the tallest.</p>
<p>A tree is <em>visible</em> if all of the other trees between it and an edge of the grid are <em>shorter</em> than it. Only consider trees in the same row or column; that is, only look up, down, left, or right from any given tree.</p>
<p>All of the trees around the edge of the grid are <em>visible</em> - since they are already on the edge, there are no trees to block the view. In this example, that only leaves the <em>interior nine trees</em> to consider:</p>
<ul>
<li>The top-left <code>5</code> is <em>visible</em> from the left and top. (It isn't visible from the right or bottom since other trees of height <code>5</code> are in the way.)</li>
<li>The top-middle <code>5</code> is <em>visible</em> from the top and right.</li>
<li>The top-right <code>1</code> is not visible from any direction; for it to be visible, there would need to only be trees of height <em>0</em> between it and an edge.</li>
<li>The left-middle <code>5</code> is <em>visible</em>, but only from the right.</li>
<li>The center <code>3</code> is not visible from any direction; for it to be visible, there would need to be only trees of at most height <code>2</code> between it and an edge.</li>
<li>The right-middle <code>3</code> is <em>visible</em> from the right.</li>
<li>In the bottom row, the middle <code>5</code> is <em>visible</em>, but the <code>3</code> and <code>4</code> are not.</li>
</ul>
<p>With 16 trees visible on the edge and another 5 visible in the interior, a total of <code><em>21</em></code> trees are visible in this arrangement.</p>
<p>Consider your map; <em>how many trees are visible from outside the grid?</em></p>
</article></div></div></div></div><div data-block-id="solutions.2022.day08/markdown-5dtzdDXqU3zynn1H9YGw6fQBudUaLe" class="viewer markdown-viewer w-full max-w-prose px-8"><h2 id="solution">Solution</h2><p>Ho boy, this was a <em>pain</em>. I couldn&#x27;t find a decent library to handle<!-- --> <!-- -->matrices/co-ordinates so writing most of this took <strong><em>paper</em></strong>.</p><p>It&#x27;s a standard &quot;maximum neighbour&quot; type problem, but this stuff always goes<!-- --> <!-- -->over my head. To simplify, we have to count the number of trees visible in at<!-- --> <!-- -->least one direction (visibility here being whether or not a tree has the<!-- --> <!-- -->largest height to a given edge).</p><p>First things first, let&#x27;s load our input and parse it</p><p>We have to use a function to create the map format we need to solve this<!-- --> <!-- -->problem, which lets us treat the matrix as a simple map without worrying<!-- --> <!-- -->about columns or rows.</p></div><div data-block-id="solutions.2022.day08/range-&gt;coords-code" class="viewer code-viewer w-full max-w-wide"><div class="cm-editor"><cm-scroller><div class="cm-content whitespace-pre"><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">(<span class="cmt-keyword">defn</span> <span class="cmt-variableName">range-&gt;coords</span></div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">  [matrix]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">  (<span class="cmt-keyword">into</span> {}</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">        (<span class="cmt-keyword">for</span> [x (<span class="cmt-keyword">range</span> (<span class="cmt-keyword">count</span> matrix))</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">              y (<span class="cmt-keyword">range</span> (<span class="cmt-keyword">count</span> (<span class="cmt-keyword">first</span> matrix)))]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">          [[x y] (<span class="cmt-keyword">parse-long</span> (<span class="cmt-keyword">str</span> (<span class="cmt-keyword">get</span> (<span class="cmt-keyword">get</span> matrix x) y)))])))</div></div></cm-scroller></div></div><div data-block-id="solutions.2022.day08/markdown-5dtkWWC29mt9RocAAah8Loh78AAKb4" class="viewer markdown-viewer w-full max-w-prose px-8"><p>Where a call like</p></div><div data-block-id="solutions.2022.day08/anon-expr-5dtdn8og1St9F6X74LjCdEQYDAKSJi-code" class="viewer code-viewer w-full max-w-wide"><div class="cm-editor"><cm-scroller><div class="cm-content whitespace-pre"><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">(<span class="cmt-keyword">range-&gt;coords</span> [<span class="cmt-string">&quot;</span><span class="cmt-string">123</span><span class="cmt-string">&quot;</span> <span class="cmt-string">&quot;</span><span class="cmt-string">456</span><span class="cmt-string">&quot;</span>])</div></div></cm-scroller></div></div><div data-block-id="solutions.2022.day08/markdown-5druQQm6QyiqA1KfA9MLcYznPcvBKq" class="viewer markdown-viewer w-full max-w-prose px-8"><p>Looks like</p></div><div class="result-viewer viewer table-markup-viewer w-full max-w-wide" data-block-id="solutions.2022.day08/anon-expr-5drNevFNEx4dHgPFHuVkdHoVRyJjbn-result"><div class="relative"><div class="overflow-x-auto"><div><div><div class="overflow-x-auto overflow-y-hidden w-full"><table class="text-xs sans-serif text-gray-900 dark:text-white not-prose"><tbody><tr class="hover:bg-gray-200 dark:hover:bg-slate-700 bg-black/5 dark:bg-gray-800"><td class="pl-6 pr-2 py-1"><span class="inspected-value whitespace-nowrap"><span><span class="group hover:bg-indigo-100 rounded-sm hover:shadow cursor-pointer"><span class="text-slate-400 group-hover:text-indigo-700"><svg viewBox="0 0 100 100" class="w-[7px] h-[7px] fill-current inline-block transition-all mr-[1px] -mt-[2px] rotate-90"><polygon points="5.9,88.2 50,11.8 94.1,88.2 "></polygon></svg></span><span class="group-hover:text-indigo-700">[</span></span><span class="tabular-nums">0</span> <span class="tabular-nums">0</span><span>]</span></span></span></td><td class="pl-6 pr-2 py-1 text-right"><span class="tabular-nums">1</span></td></tr><tr class="hover:bg-gray-200 dark:hover:bg-slate-700 bg-white dark:bg-gray-900"><td class="pl-6 pr-2 py-1"><span class="inspected-value whitespace-nowrap"><span><span class="group hover:bg-indigo-100 rounded-sm hover:shadow cursor-pointer"><span class="text-slate-400 group-hover:text-indigo-700"><svg viewBox="0 0 100 100" class="w-[7px] h-[7px] fill-current inline-block transition-all mr-[1px] -mt-[2px] rotate-90"><polygon points="5.9,88.2 50,11.8 94.1,88.2 "></polygon></svg></span><span class="group-hover:text-indigo-700">[</span></span><span class="tabular-nums">0</span> <span class="tabular-nums">1</span><span>]</span></span></span></td><td class="pl-6 pr-2 py-1 text-right"><span class="tabular-nums">2</span></td></tr><tr class="hover:bg-gray-200 dark:hover:bg-slate-700 bg-black/5 dark:bg-gray-800"><td class="pl-6 pr-2 py-1"><span class="inspected-value whitespace-nowrap"><span><span class="group hover:bg-indigo-100 rounded-sm hover:shadow cursor-pointer"><span class="text-slate-400 group-hover:text-indigo-700"><svg viewBox="0 0 100 100" class="w-[7px] h-[7px] fill-current inline-block transition-all mr-[1px] -mt-[2px] rotate-90"><polygon points="5.9,88.2 50,11.8 94.1,88.2 "></polygon></svg></span><span class="group-hover:text-indigo-700">[</span></span><span class="tabular-nums">0</span> <span class="tabular-nums">2</span><span>]</span></span></span></td><td class="pl-6 pr-2 py-1 text-right"><span class="tabular-nums">3</span></td></tr><tr class="hover:bg-gray-200 dark:hover:bg-slate-700 bg-white dark:bg-gray-900"><td class="pl-6 pr-2 py-1"><span class="inspected-value whitespace-nowrap"><span><span class="group hover:bg-indigo-100 rounded-sm hover:shadow cursor-pointer"><span class="text-slate-400 group-hover:text-indigo-700"><svg viewBox="0 0 100 100" class="w-[7px] h-[7px] fill-current inline-block transition-all mr-[1px] -mt-[2px] rotate-90"><polygon points="5.9,88.2 50,11.8 94.1,88.2 "></polygon></svg></span><span class="group-hover:text-indigo-700">[</span></span><span class="tabular-nums">1</span> <span class="tabular-nums">0</span><span>]</span></span></span></td><td class="pl-6 pr-2 py-1 text-right"><span class="tabular-nums">4</span></td></tr><tr class="hover:bg-gray-200 dark:hover:bg-slate-700 bg-black/5 dark:bg-gray-800"><td class="pl-6 pr-2 py-1"><span class="inspected-value whitespace-nowrap"><span><span class="group hover:bg-indigo-100 rounded-sm hover:shadow cursor-pointer"><span class="text-slate-400 group-hover:text-indigo-700"><svg viewBox="0 0 100 100" class="w-[7px] h-[7px] fill-current inline-block transition-all mr-[1px] -mt-[2px] rotate-90"><polygon points="5.9,88.2 50,11.8 94.1,88.2 "></polygon></svg></span><span class="group-hover:text-indigo-700">[</span></span><span class="tabular-nums">1</span> <span class="tabular-nums">1</span><span>]</span></span></span></td><td class="pl-6 pr-2 py-1 text-right"><span class="tabular-nums">5</span></td></tr><tr class="hover:bg-gray-200 dark:hover:bg-slate-700 bg-white dark:bg-gray-900"><td class="pl-6 pr-2 py-1"><span class="inspected-value whitespace-nowrap"><span><span class="group hover:bg-indigo-100 rounded-sm hover:shadow cursor-pointer"><span class="text-slate-400 group-hover:text-indigo-700"><svg viewBox="0 0 100 100" class="w-[7px] h-[7px] fill-current inline-block transition-all mr-[1px] -mt-[2px] rotate-90"><polygon points="5.9,88.2 50,11.8 94.1,88.2 "></polygon></svg></span><span class="group-hover:text-indigo-700">[</span></span><span class="tabular-nums">1</span> <span class="tabular-nums">2</span><span>]</span></span></span></td><td class="pl-6 pr-2 py-1 text-right"><span class="tabular-nums">6</span></td></tr></tbody></table></div><div class="overflow-x-auto overflow-y-hidden w-full shadow sticky-table-header"><table style="margin:0" class="text-xs sans-serif text-gray-900 dark:text-white not-prose"></table></div></div></div></div></div></div><div data-block-id="solutions.2022.day08/markdown-5dsS4JUAiHGXrFu8FnSegBSQht3R3T" class="viewer markdown-viewer w-full max-w-prose px-8"><p>Ok, now we can load our input</p></div><div data-block-id="solutions.2022.day08/input-code" class="viewer code-viewer w-full max-w-wide"><div class="cm-editor"><cm-scroller><div class="cm-content whitespace-pre"><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">(<span class="cmt-keyword">def</span> <span class="cmt-variableName">input</span> (<span class="cmt-keyword">-&gt;&gt;</span> (<span class="cmt-keyword">slurp</span> (<span class="cmt-keyword">io/resource</span> <span class="cmt-string">&quot;</span><span class="cmt-string">inputs/2022/day08.txt</span><span class="cmt-string">&quot;</span>)) <span class="cmt-comment">;; Load the resource</span></div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">                str/split-lines                               <span class="cmt-comment">;; Split into lines</span></div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">                range-&gt;coords))                               <span class="cmt-comment">;; Parse to a map of &#x27;(1 2 3) =&gt; {[0 0] 1 [0 1] 2 [0 2] 3}</span></div></div></cm-scroller></div></div><div data-block-id="solutions.2022.day08/markdown-5dtnES7n5TFNx27d3rWBZ9N5jKarze" class="viewer markdown-viewer w-full max-w-prose px-8"><p>Now let&#x27;s solve it! First we create a convenience vector of all the<!-- --> <!-- -->&quot;neighbour&quot; vectors.</p><p>We made a guess that part 2 wouldn&#x27;t involve diagonals, and we called it!</p></div><div data-block-id="solutions.2022.day08/directions-code" class="viewer code-viewer w-full max-w-wide"><div class="cm-editor"><cm-scroller><div class="cm-content whitespace-pre"><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">(<span class="cmt-keyword">def</span> <span class="cmt-variableName">directions</span> [[<span class="cmt-literal">-1</span> <span class="cmt-literal">0</span>] [<span class="cmt-literal">1</span> <span class="cmt-literal">0</span>] [<span class="cmt-literal">0</span> <span class="cmt-literal">-1</span>] [<span class="cmt-literal">0</span> <span class="cmt-literal">1</span>]])</div></div></cm-scroller></div></div><div data-block-id="solutions.2022.day08/markdown-5dsqi8xfsevV34B8ZztE9gxJWZxHRF" class="viewer markdown-viewer w-full max-w-prose px-8"><p>Then we compute all the trees from a given tree to the edge in a given direction.</p><p>Given the coordinate list, a tree to compute from and a direction vector;<!-- --> <!-- -->iterate until we hit an edge.</p></div><div data-block-id="solutions.2022.day08/trees-in-code" class="viewer code-viewer w-full max-w-wide"><div class="cm-editor"><cm-scroller><div class="cm-content whitespace-pre"><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">(<span class="cmt-keyword">defn</span> <span class="cmt-variableName">trees-in</span> [coords tree direction]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">  (<span class="cmt-keyword">let</span> [[_ &amp; trees] (<span class="cmt-keyword">map</span> coords (<span class="cmt-keyword">iterate</span> (<span class="cmt-keyword">partial</span> mapv + direction) tree))]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">    (<span class="cmt-keyword">take-while</span> some? trees)))</div></div></cm-scroller></div></div><div data-block-id="solutions.2022.day08/markdown-5dsU46isw8zSzQTsDxbKd7HmaTkYFY" class="viewer markdown-viewer w-full max-w-prose px-8"><p>Compute in all directions if a tree can see an edge in a given direction.</p></div><div data-block-id="solutions.2022.day08/visible?-code" class="viewer code-viewer w-full max-w-wide"><div class="cm-editor"><cm-scroller><div class="cm-content whitespace-pre"><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">(<span class="cmt-keyword">defn</span> <span class="cmt-variableName">visible?</span></div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">  [coords tree]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">  (<span class="cmt-keyword">some</span> #(<span class="cmt-keyword">every?</span> (<span class="cmt-keyword">partial</span> &gt; (<span class="cmt-keyword">coords</span> tree)) (<span class="cmt-keyword">trees-in</span> coords tree %)) directions))</div></div></cm-scroller></div></div><div data-block-id="solutions.2022.day08/markdown-5ds964nbBut4mQyEnKe9kDBrvWXSkS" class="viewer markdown-viewer w-full max-w-prose px-8"><p>Compute the viewing distance; that is how many trees the current tree can see.</p></div><div data-block-id="solutions.2022.day08/viewing-distance-code" class="viewer code-viewer w-full max-w-wide"><div class="cm-editor"><cm-scroller><div class="cm-content whitespace-pre"><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">(<span class="cmt-keyword">defn</span> <span class="cmt-variableName">viewing-distance</span></div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">  [coords tree]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">  (<span class="cmt-keyword">transduce</span></div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">   (<span class="cmt-keyword">map</span> (<span class="cmt-keyword">fn</span> [direction]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">          (<span class="cmt-keyword">reduce</span> (<span class="cmt-keyword">fn</span> [distance cand] (<span class="cmt-keyword">if</span> (<span class="cmt-keyword">&gt;=</span> cand (<span class="cmt-keyword">coords</span> tree)) (<span class="cmt-keyword">reduced</span> (<span class="cmt-keyword">inc</span> distance)) (<span class="cmt-keyword">inc</span> distance)))</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">                  <span class="cmt-literal">0</span></div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">                  (<span class="cmt-keyword">trees-in</span> coords tree direction))))</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">   *</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">   directions))</div></div></cm-scroller></div></div><div data-block-id="solutions.2022.day08/markdown-5dtWepf62DJo6zKtPsoSETtXmdSm1y" class="viewer markdown-viewer w-full max-w-prose px-8"><p>That&#x27;s everything! Now we can run through part 1. Here, all we care about is<!-- --> <!-- -->how many trees can see an edge. A simple count of all the trees that have a<!-- --> <!-- -->visible edge.</p><p>There&#x27;s almost certainly a cleaner transducer way to do this, maybe I&#x27;ll<!-- --> <!-- -->revisit after the fact.</p></div><div data-block-id="solutions.2022.day08/part-1-code" class="viewer code-viewer w-full max-w-wide"><div class="cm-editor"><cm-scroller><div class="cm-content whitespace-pre"><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">(<span class="cmt-keyword">defn</span> <span class="cmt-variableName">part-1</span></div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">  [input]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">  (<span class="cmt-keyword">count</span> (<span class="cmt-keyword">filter</span> (<span class="cmt-keyword">partial</span> visible? input) (<span class="cmt-keyword">keys</span> input))))</div></div></cm-scroller></div></div><div data-block-id="solutions.2022.day08/markdown-5dtvYRc5DtC3RPzuvhsx5HbbXH1rS7" class="viewer markdown-viewer w-full max-w-prose px-8"><p>Running this part gives our answer</p></div><div class="result-viewer viewer number-viewer w-full max-w-prose px-8" data-block-id="solutions.2022.day08/anon-expr-5dshGnyCYVfgr3cV4vKRqeFt2v8Fqp-result"><div class="relative"><div class="overflow-x-auto"><span class="cmt-number inspected-value">1684</span></div></div></div><div data-block-id="solutions.2022.day08/markdown-5dswa3vvsqV7VD77bXdWvgyNAmkRdg" class="viewer markdown-viewer w-full max-w-prose px-8"><p>Part 2 is a bit more involved, now we have to find the most scenic tree by<!-- --> <!-- -->multiplying together all the viewing distances and finding the biggest<!-- --> <!-- -->number.</p></div><div data-block-id="solutions.2022.day08/part-2-code" class="viewer code-viewer w-full max-w-wide"><div class="cm-editor"><cm-scroller><div class="cm-content whitespace-pre"><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">(<span class="cmt-keyword">defn</span> <span class="cmt-variableName">part-2</span></div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">  [input]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">  (<span class="cmt-keyword">transduce</span> (<span class="cmt-keyword">map</span> (<span class="cmt-keyword">partial</span> viewing-distance input)) max <span class="cmt-literal">0</span> (<span class="cmt-keyword">keys</span> input)))</div></div></cm-scroller></div></div><div data-block-id="solutions.2022.day08/markdown-5dspMqxdw3uNK6Pgan8eaYi57sm4wP" class="viewer markdown-viewer w-full max-w-prose px-8"><p>Which gives our answer</p></div><div class="result-viewer viewer number-viewer w-full max-w-prose px-8" data-block-id="solutions.2022.day08/anon-expr-5ds3NJhiXAVBTLsVFex2mJDuuDv1Lr-result"><div class="relative"><div class="overflow-x-auto"><span class="cmt-number inspected-value">486540</span></div></div></div></div></div></div><div class="fixed w-full z-20 top-0 left-0 w-full"></div>
</div><script type="module">let viewer = nextjournal.clerk.sci_env
let state = "{:bundle? false, :path->doc {\"src/solutions/2022/day08\" {:path [], :nextjournal/value {:toc [{:title \"\", :emoji nil, :path \"#\", :items [{:title \"Solution\", :emoji nil, :path \"#solution\", :items []}]}], :sidenotes? false, :toc-visibility false, :atom-var-name->state #viewer-eval (nextjournal.clerk.render/intern-atoms! {}), :ns #viewer-eval (ns solutions.2022.day08), :file \"src/solutions/2022/day08.clj\", :scope solutions.2022.day08, :bundle? false, :header {:path [], :nextjournal/value [:div.viewer.w-full.max-w-prose.px-8.not-prose.mt-3 [:div.mb-8.text-xs.sans-serif.text-slate-400 nil [:<> [:a.font-medium.border-b.border-dotted.border-slate-300.hover:text-indigo-500.hover:border-indigo-500.dark:border-slate-500.dark:hover:text-white.dark:hover:border-white.transition {:href \"./../../../../\"} \"Index\"] [:span.mx-2 \"•\"]] [:span \"Generated with \" [:a.font-medium.border-b.border-dotted.border-slate-300.hover:text-indigo-500.hover:border-indigo-500.dark:border-slate-500.dark:hover:text-white.dark:hover:border-white.transition {:href \"https://clerk.vision\"} \"Clerk\"] \" from \" [:a.font-medium.border-b.border-dotted.border-slate-300.hover:text-indigo-500.hover:border-indigo-500.dark:border-slate-500.dark:hover:text-white.dark:hover:border-white.transition {:href nil} \"src/solutions/2022/day08.clj\" nil]]]], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}, :open-graph {:type \"article:clerk\", :title \"Solution\", :description \"Ho boy, this was a pain. I couldn't find a decent library to handle matrices/co-ordinates so writing most of this took paper.\"}, :title \"Solution\", :blocks [{:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [:div {:dangerouslySetInnerHTML {:__html \"<article class=\\\"day-desc\\\"><h2>--- Day 8: Treetop Tree House ---</h2><p>The expedition comes across a peculiar patch of tall trees all planted carefully in a grid. The Elves explain that a previous expedition planted these trees as a reforestation effort. Now, they're curious if this would be a good location for a <a href=\\\"https://en.wikipedia.org/wiki/Tree_house\\\" target=\\\"_blank\\\">tree house</a>.</p>\\n<p>First, determine whether there is enough tree cover here to keep a tree house <em>hidden</em>. To do this, you need to count the number of trees that are <em>visible from outside the grid</em> when looking directly along a row or column.</p>\\n<p>The Elves have already launched a <a href=\\\"https://en.wikipedia.org/wiki/Quadcopter\\\" target=\\\"_blank\\\">quadcopter</a> to generate a map with the height of each tree (<span title=\\\"The Elves have already launched a quadcopter (your puzzle input).\\\">your puzzle input</span>). For example:</p>\\n<pre><code>30373\\n25512\\n65332\\n33549\\n35390\\n</code></pre>\\n<p>Each tree is represented as a single digit whose value is its height, where <code>0</code> is the shortest and <code>9</code> is the tallest.</p>\\n<p>A tree is <em>visible</em> if all of the other trees between it and an edge of the grid are <em>shorter</em> than it. Only consider trees in the same row or column; that is, only look up, down, left, or right from any given tree.</p>\\n<p>All of the trees around the edge of the grid are <em>visible</em> - since they are already on the edge, there are no trees to block the view. In this example, that only leaves the <em>interior nine trees</em> to consider:</p>\\n<ul>\\n<li>The top-left <code>5</code> is <em>visible</em> from the left and top. (It isn't visible from the right or bottom since other trees of height <code>5</code> are in the way.)</li>\\n<li>The top-middle <code>5</code> is <em>visible</em> from the top and right.</li>\\n<li>The top-right <code>1</code> is not visible from any direction; for it to be visible, there would need to only be trees of height <em>0</em> between it and an edge.</li>\\n<li>The left-middle <code>5</code> is <em>visible</em>, but only from the right.</li>\\n<li>The center <code>3</code> is not visible from any direction; for it to be visible, there would need to be only trees of at most height <code>2</code> between it and an edge.</li>\\n<li>The right-middle <code>3</code> is <em>visible</em> from the right.</li>\\n<li>In the bottom row, the middle <code>5</code> is <em>visible</em>, but the <code>3</code> and <code>4</code> are not.</li>\\n</ul>\\n<p>With 16 trees visible on the edge and another 5 visible in the interior, a total of <code><em>21</em></code> trees are visible in this arrangement.</p>\\n<p>Consider your map; <em>how many trees are visible from outside the grid?</em></p>\\n</article>\"}}], :nextjournal/visibility {:code :hide, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}, :nextjournal/render-opts {:id \"solutions.2022.day08/anon-expr-5dtQTNYZ1zbLq4ur2SUEFhbkzrqQUu-result\"}}, :nextjournal/blob-id \"5dtcZHAKc5MUkGwhCCmDPC7MUg13uL\"}, :nextjournal/render-opts {:id \"solutions.2022.day08/anon-expr-5dtQTNYZ1zbLq4ur2SUEFhbkzrqQUu-result\"}, :nextjournal/visibility {:code :hide, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day08/markdown-5dtzdDXqU3zynn1H9YGw6fQBudUaLe\"} [\"h2\" {:id \"solution\"} [:<> \"Solution\"]] [:p [:<> \"Ho boy, this was a \"] [:em [:<> \"pain\"]] [:<> \". I couldn't find a decent library to handle\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"matrices/co-ordinates so writing most of this took \"] [:strong [:em [:<> \"paper\"]]] [:<> \".\"]] [:p [:<> \"It's a standard \\\"maximum neighbour\\\" type problem, but this stuff always goes\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"over my head. To simplify, we have to count the number of trees visible in at\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"least one direction (visibility here being whether or not a tree has the\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"largest height to a given edge).\"]] [:p [:<> \"First things first, let's load our input and parse it\"]] [:p [:<> \"We have to use a function to create the map format we need to solve this\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"problem, which lets us treat the matrix as a simple map without worrying\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"about columns or rows.\"]]], :nextjournal/render-opts {:id \"solutions.2022.day08/markdown-5dtzdDXqU3zynn1H9YGw6fQBudUaLe\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe\"}} {:path [], :nextjournal/value \"(defn range->coords\\n  [matrix]\\n  (into {}\\n        (for [x (range (count matrix))\\n              y (range (count (first matrix)))]\\n          [[x y] (parse-long (str (get (get matrix x) y)))])))\", :nextjournal/render-opts {:loc {:line 29, :end-line 34, :column 1, :end-column 63}, :id \"solutions.2022.day08/range->coords-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day08/markdown-5dtkWWC29mt9RocAAah8Loh78AAKb4\"} [:p [:<> \"Where a call like\"]]], :nextjournal/render-opts {:id \"solutions.2022.day08/markdown-5dtkWWC29mt9RocAAah8Loh78AAKb4\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe\"}} {:path [], :nextjournal/value \"(range->coords [\\\"123\\\" \\\"456\\\"])\", :nextjournal/render-opts {:loc {:line 39, :end-line 39, :column 1, :end-column 30}, :id \"solutions.2022.day08/anon-expr-5dtdn8og1St9F6X74LjCdEQYDAKSJi-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day08/markdown-5druQQm6QyiqA1KfA9MLcYznPcvBKq\"} [:p [:<> \"Looks like\"]]], :nextjournal/render-opts {:id \"solutions.2022.day08/markdown-5druQQm6QyiqA1KfA9MLcYznPcvBKq\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [{:path [0], :nextjournal/value [{:path [0 0], :nextjournal/value [{:path [0 0 0], :nextjournal/value [{:path [0 0 0 0], :nextjournal/value 0, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn (fn [x] [:span.tabular-nums (if (js/Number.isNaN x) \"NaN\" (str x))]), :hash \"5dtSPVSEW3qPeoxNNZg38s5GL6mDPm\"}} {:path [0 0 0 1], :nextjournal/value 0, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn (fn [x] [:span.tabular-nums (if (js/Number.isNaN x) \"NaN\" (str x))]), :hash \"5dtSPVSEW3qPeoxNNZg38s5GL6mDPm\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/vector-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-coll, :opening-paren \"[\", :closing-paren (\"]\"), :page-size 20, :hash \"5dsD1KJESfc8Dy8gPeGQfZCX2ayE8f\"}} {:path [0 0 1], :nextjournal/value 1, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn (fn [x] [:span.tabular-nums (if (js/Number.isNaN x) \"NaN\" (str x))]), :hash \"5dtSPVSEW3qPeoxNNZg38s5GL6mDPm\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/table-row-viewer, :render-fn #viewer-fn (fn [row {:as opts, :keys [path number-col?]}] (into [:tr.hover:bg-gray-200.dark:hover:bg-slate-700 {:class (if (even? (peek path)) \"bg-black/5 dark:bg-gray-800\" \"bg-white dark:bg-gray-900\")}] (map-indexed (fn [idx cell] [:td.pl-6.pr-2.py-1 (when (and (ifn? number-col?) (number-col? idx)) {:class \"text-right\"}) (nextjournal.clerk.render/inspect-presented opts cell)])) row)), :hash \"5dtg13f6kzx61PbKKYuxWbebVhDnYN\"}} {:path [0 1], :nextjournal/value [{:path [0 1 0], :nextjournal/value [{:path [0 1 0 0], :nextjournal/value 0, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn (fn [x] [:span.tabular-nums (if (js/Number.isNaN x) \"NaN\" (str x))]), :hash \"5dtSPVSEW3qPeoxNNZg38s5GL6mDPm\"}} {:path [0 1 0 1], :nextjournal/value 1, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn (fn [x] [:span.tabular-nums (if (js/Number.isNaN x) \"NaN\" (str x))]), :hash \"5dtSPVSEW3qPeoxNNZg38s5GL6mDPm\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/vector-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-coll, :opening-paren \"[\", :closing-paren (\"]\"), :page-size 20, :hash \"5dsD1KJESfc8Dy8gPeGQfZCX2ayE8f\"}} {:path [0 1 1], :nextjournal/value 2, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn (fn [x] [:span.tabular-nums (if (js/Number.isNaN x) \"NaN\" (str x))]), :hash \"5dtSPVSEW3qPeoxNNZg38s5GL6mDPm\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/table-row-viewer, :render-fn #viewer-fn (fn [row {:as opts, :keys [path number-col?]}] (into [:tr.hover:bg-gray-200.dark:hover:bg-slate-700 {:class (if (even? (peek path)) \"bg-black/5 dark:bg-gray-800\" \"bg-white dark:bg-gray-900\")}] (map-indexed (fn [idx cell] [:td.pl-6.pr-2.py-1 (when (and (ifn? number-col?) (number-col? idx)) {:class \"text-right\"}) (nextjournal.clerk.render/inspect-presented opts cell)])) row)), :hash \"5dtg13f6kzx61PbKKYuxWbebVhDnYN\"}} {:path [0 2], :nextjournal/value [{:path [0 2 0], :nextjournal/value [{:path [0 2 0 0], :nextjournal/value 0, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn (fn [x] [:span.tabular-nums (if (js/Number.isNaN x) \"NaN\" (str x))]), :hash \"5dtSPVSEW3qPeoxNNZg38s5GL6mDPm\"}} {:path [0 2 0 1], :nextjournal/value 2, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn (fn [x] [:span.tabular-nums (if (js/Number.isNaN x) \"NaN\" (str x))]), :hash \"5dtSPVSEW3qPeoxNNZg38s5GL6mDPm\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/vector-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-coll, :opening-paren \"[\", :closing-paren (\"]\"), :page-size 20, :hash \"5dsD1KJESfc8Dy8gPeGQfZCX2ayE8f\"}} {:path [0 2 1], :nextjournal/value 3, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn (fn [x] [:span.tabular-nums (if (js/Number.isNaN x) \"NaN\" (str x))]), :hash \"5dtSPVSEW3qPeoxNNZg38s5GL6mDPm\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/table-row-viewer, :render-fn #viewer-fn (fn [row {:as opts, :keys [path number-col?]}] (into [:tr.hover:bg-gray-200.dark:hover:bg-slate-700 {:class (if (even? (peek path)) \"bg-black/5 dark:bg-gray-800\" \"bg-white dark:bg-gray-900\")}] (map-indexed (fn [idx cell] [:td.pl-6.pr-2.py-1 (when (and (ifn? number-col?) (number-col? idx)) {:class \"text-right\"}) (nextjournal.clerk.render/inspect-presented opts cell)])) row)), :hash \"5dtg13f6kzx61PbKKYuxWbebVhDnYN\"}} {:path [0 3], :nextjournal/value [{:path [0 3 0], :nextjournal/value [{:path [0 3 0 0], :nextjournal/value 1, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn (fn [x] [:span.tabular-nums (if (js/Number.isNaN x) \"NaN\" (str x))]), :hash \"5dtSPVSEW3qPeoxNNZg38s5GL6mDPm\"}} {:path [0 3 0 1], :nextjournal/value 0, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn (fn [x] [:span.tabular-nums (if (js/Number.isNaN x) \"NaN\" (str x))]), :hash \"5dtSPVSEW3qPeoxNNZg38s5GL6mDPm\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/vector-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-coll, :opening-paren \"[\", :closing-paren (\"]\"), :page-size 20, :hash \"5dsD1KJESfc8Dy8gPeGQfZCX2ayE8f\"}} {:path [0 3 1], :nextjournal/value 4, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn (fn [x] [:span.tabular-nums (if (js/Number.isNaN x) \"NaN\" (str x))]), :hash \"5dtSPVSEW3qPeoxNNZg38s5GL6mDPm\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/table-row-viewer, :render-fn #viewer-fn (fn [row {:as opts, :keys [path number-col?]}] (into [:tr.hover:bg-gray-200.dark:hover:bg-slate-700 {:class (if (even? (peek path)) \"bg-black/5 dark:bg-gray-800\" \"bg-white dark:bg-gray-900\")}] (map-indexed (fn [idx cell] [:td.pl-6.pr-2.py-1 (when (and (ifn? number-col?) (number-col? idx)) {:class \"text-right\"}) (nextjournal.clerk.render/inspect-presented opts cell)])) row)), :hash \"5dtg13f6kzx61PbKKYuxWbebVhDnYN\"}} {:path [0 4], :nextjournal/value [{:path [0 4 0], :nextjournal/value [{:path [0 4 0 0], :nextjournal/value 1, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn (fn [x] [:span.tabular-nums (if (js/Number.isNaN x) \"NaN\" (str x))]), :hash \"5dtSPVSEW3qPeoxNNZg38s5GL6mDPm\"}} {:path [0 4 0 1], :nextjournal/value 1, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn (fn [x] [:span.tabular-nums (if (js/Number.isNaN x) \"NaN\" (str x))]), :hash \"5dtSPVSEW3qPeoxNNZg38s5GL6mDPm\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/vector-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-coll, :opening-paren \"[\", :closing-paren (\"]\"), :page-size 20, :hash \"5dsD1KJESfc8Dy8gPeGQfZCX2ayE8f\"}} {:path [0 4 1], :nextjournal/value 5, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn (fn [x] [:span.tabular-nums (if (js/Number.isNaN x) \"NaN\" (str x))]), :hash \"5dtSPVSEW3qPeoxNNZg38s5GL6mDPm\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/table-row-viewer, :render-fn #viewer-fn (fn [row {:as opts, :keys [path number-col?]}] (into [:tr.hover:bg-gray-200.dark:hover:bg-slate-700 {:class (if (even? (peek path)) \"bg-black/5 dark:bg-gray-800\" \"bg-white dark:bg-gray-900\")}] (map-indexed (fn [idx cell] [:td.pl-6.pr-2.py-1 (when (and (ifn? number-col?) (number-col? idx)) {:class \"text-right\"}) (nextjournal.clerk.render/inspect-presented opts cell)])) row)), :hash \"5dtg13f6kzx61PbKKYuxWbebVhDnYN\"}} {:path [0 5], :nextjournal/value [{:path [0 5 0], :nextjournal/value [{:path [0 5 0 0], :nextjournal/value 1, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn (fn [x] [:span.tabular-nums (if (js/Number.isNaN x) \"NaN\" (str x))]), :hash \"5dtSPVSEW3qPeoxNNZg38s5GL6mDPm\"}} {:path [0 5 0 1], :nextjournal/value 2, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn (fn [x] [:span.tabular-nums (if (js/Number.isNaN x) \"NaN\" (str x))]), :hash \"5dtSPVSEW3qPeoxNNZg38s5GL6mDPm\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/vector-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-coll, :opening-paren \"[\", :closing-paren (\"]\"), :page-size 20, :hash \"5dsD1KJESfc8Dy8gPeGQfZCX2ayE8f\"}} {:path [0 5 1], :nextjournal/value 6, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn (fn [x] [:span.tabular-nums (if (js/Number.isNaN x) \"NaN\" (str x))]), :hash \"5dtSPVSEW3qPeoxNNZg38s5GL6mDPm\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/table-row-viewer, :render-fn #viewer-fn (fn [row {:as opts, :keys [path number-col?]}] (into [:tr.hover:bg-gray-200.dark:hover:bg-slate-700 {:class (if (even? (peek path)) \"bg-black/5 dark:bg-gray-800\" \"bg-white dark:bg-gray-900\")}] (map-indexed (fn [idx cell] [:td.pl-6.pr-2.py-1 (when (and (ifn? number-col?) (number-col? idx)) {:class \"text-right\"}) (nextjournal.clerk.render/inspect-presented opts cell)])) row)), :hash \"5dtg13f6kzx61PbKKYuxWbebVhDnYN\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/table-body-viewer, :render-fn #viewer-fn (fn [rows opts] (into [:tbody] (map-indexed (fn [idx row] (nextjournal.clerk.render/inspect-presented (update opts :path conj idx) row))) rows)), :hash \"5drW2utzBNMwKp9jMUoYps5tBVrqRh\"}}], :nextjournal/width :wide, :nextjournal/render-opts {:num-cols 2, :number-col? #{1}, :id \"solutions.2022.day08/anon-expr-5drNevFNEx4dHgPFHuVkdHoVRyJjbn-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/table-markup-viewer, :render-fn #viewer-fn (fn [head+body opts] [:div (into [nextjournal.clerk.render/render-table-with-sticky-header] (nextjournal.clerk.render/inspect-children opts) head+body)]), :hash \"5duKJNfpXnG6f5iBHEcwDTg24nDMsU\"}}, :nextjournal/blob-id \"5dtnavbxc6Uq9X81n2LeiXRxrrwShz\"}, :nextjournal/width :wide, :nextjournal/render-opts {:num-cols 2, :number-col? #{1}, :id \"solutions.2022.day08/anon-expr-5drNevFNEx4dHgPFHuVkdHoVRyJjbn-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day08/markdown-5dsS4JUAiHGXrFu8FnSegBSQht3R3T\"} [:p [:<> \"Ok, now we can load our input\"]]], :nextjournal/render-opts {:id \"solutions.2022.day08/markdown-5dsS4JUAiHGXrFu8FnSegBSQht3R3T\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe\"}} {:path [], :nextjournal/value \"(def input (->> (slurp (io/resource \\\"inputs/2022/day08.txt\\\")) ;; Load the resource\\n                str/split-lines                               ;; Split into lines\\n                range->coords))                               ;; Parse to a map of '(1 2 3) => {[0 0] 1 [0 1] 2 [0 2] 3}\", :nextjournal/render-opts {:loc {:line 46, :end-line 48, :column 1, :end-column 32}, :id \"solutions.2022.day08/input-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day08/markdown-5dtnES7n5TFNx27d3rWBZ9N5jKarze\"} [:p [:<> \"Now let's solve it! First we create a convenience vector of all the\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"\\\"neighbour\\\" vectors.\"]] [:p [:<> \"We made a guess that part 2 wouldn't involve diagonals, and we called it!\"]]], :nextjournal/render-opts {:id \"solutions.2022.day08/markdown-5dtnES7n5TFNx27d3rWBZ9N5jKarze\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe\"}} {:path [], :nextjournal/value \"(def directions [[-1 0] [1 0] [0 -1] [0 1]])\", :nextjournal/render-opts {:loc {:line 54, :end-line 54, :column 1, :end-column 45}, :id \"solutions.2022.day08/directions-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day08/markdown-5dsqi8xfsevV34B8ZztE9gxJWZxHRF\"} [:p [:<> \"Then we compute all the trees from a given tree to the edge in a given direction.\"]] [:p [:<> \"Given the coordinate list, a tree to compute from and a direction vector;\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"iterate until we hit an edge.\"]]], :nextjournal/render-opts {:id \"solutions.2022.day08/markdown-5dsqi8xfsevV34B8ZztE9gxJWZxHRF\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe\"}} {:path [], :nextjournal/value \"(defn trees-in [coords tree direction]\\n  (let [[_ & trees] (map coords (iterate (partial mapv + direction) tree))]\\n    (take-while some? trees)))\", :nextjournal/render-opts {:loc {:line 60, :end-line 62, :column 1, :end-column 31}, :id \"solutions.2022.day08/trees-in-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day08/markdown-5dsU46isw8zSzQTsDxbKd7HmaTkYFY\"} [:p [:<> \"Compute in all directions if a tree can see an edge in a given direction.\"]]], :nextjournal/render-opts {:id \"solutions.2022.day08/markdown-5dsU46isw8zSzQTsDxbKd7HmaTkYFY\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe\"}} {:path [], :nextjournal/value \"(defn visible?\\n  [coords tree]\\n  (some #(every? (partial > (coords tree)) (trees-in coords tree %)) directions))\", :nextjournal/render-opts {:loc {:line 65, :end-line 67, :column 1, :end-column 82}, :id \"solutions.2022.day08/visible?-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day08/markdown-5ds964nbBut4mQyEnKe9kDBrvWXSkS\"} [:p [:<> \"Compute the viewing distance; that is how many trees the current tree can see.\"]]], :nextjournal/render-opts {:id \"solutions.2022.day08/markdown-5ds964nbBut4mQyEnKe9kDBrvWXSkS\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe\"}} {:path [], :nextjournal/value \"(defn viewing-distance\\n  [coords tree]\\n  (transduce\\n   (map (fn [direction]\\n          (reduce (fn [distance cand] (if (>= cand (coords tree)) (reduced (inc distance)) (inc distance)))\\n                  0\\n                  (trees-in coords tree direction))))\\n   *\\n   directions))\", :nextjournal/render-opts {:loc {:line 70, :end-line 78, :column 1, :end-column 16}, :id \"solutions.2022.day08/viewing-distance-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day08/markdown-5dtWepf62DJo6zKtPsoSETtXmdSm1y\"} [:p [:<> \"That's everything! Now we can run through part 1. Here, all we care about is\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"how many trees can see an edge. A simple count of all the trees that have a\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"visible edge.\"]] [:p [:<> \"There's almost certainly a cleaner transducer way to do this, maybe I'll\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"revisit after the fact.\"]]], :nextjournal/render-opts {:id \"solutions.2022.day08/markdown-5dtWepf62DJo6zKtPsoSETtXmdSm1y\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe\"}} {:path [], :nextjournal/value \"(defn part-1\\n  [input]\\n  (count (filter (partial visible? input) (keys input))))\", :nextjournal/render-opts {:loc {:line 87, :end-line 89, :column 1, :end-column 58}, :id \"solutions.2022.day08/part-1-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day08/markdown-5dtvYRc5DtC3RPzuvhsx5HbbXH1rS7\"} [:p [:<> \"Running this part gives our answer\"]]], :nextjournal/render-opts {:id \"solutions.2022.day08/markdown-5dtvYRc5DtC3RPzuvhsx5HbbXH1rS7\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value 1684, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5dr3R1ZvHCoRHpxsQq4D4ARv9BQC7o\"}, :nextjournal/render-opts {:id \"solutions.2022.day08/anon-expr-5dshGnyCYVfgr3cV4vKRqeFt2v8Fqp-result\"}}, :nextjournal/blob-id \"5dteiHC4Wx1iyBeCeDgYugns97jMef\"}, :nextjournal/render-opts {:id \"solutions.2022.day08/anon-expr-5dshGnyCYVfgr3cV4vKRqeFt2v8Fqp-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day08/markdown-5dswa3vvsqV7VD77bXdWvgyNAmkRdg\"} [:p [:<> \"Part 2 is a bit more involved, now we have to find the most scenic tree by\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"multiplying together all the viewing distances and finding the biggest\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"number.\"]]], :nextjournal/render-opts {:id \"solutions.2022.day08/markdown-5dswa3vvsqV7VD77bXdWvgyNAmkRdg\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe\"}} {:path [], :nextjournal/value \"(defn part-2\\n  [input]\\n  (transduce (map (partial viewing-distance input)) max 0 (keys input)))\", :nextjournal/render-opts {:loc {:line 99, :end-line 101, :column 1, :end-column 73}, :id \"solutions.2022.day08/part-2-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day08/markdown-5dspMqxdw3uNK6Pgan8eaYi57sm4wP\"} [:p [:<> \"Which gives our answer\"]]], :nextjournal/render-opts {:id \"solutions.2022.day08/markdown-5dspMqxdw3uNK6Pgan8eaYi57sm4wP\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value 486540, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5dr3R1ZvHCoRHpxsQq4D4ARv9BQC7o\"}, :nextjournal/render-opts {:id \"solutions.2022.day08/anon-expr-5ds3NJhiXAVBTLsVFex2mJDuuDv1Lr-result\"}}, :nextjournal/blob-id \"5dtWUQgrL38ZTFuwdVvY9N8Uu9KYb2\"}, :nextjournal/render-opts {:id \"solutions.2022.day08/anon-expr-5ds3NJhiXAVBTLsVFex2mJDuuDv1Lr-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}}]}, :nextjournal/viewer {:name nextjournal.clerk.viewer/notebook-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-notebook, :hash \"5duAFDxE4sCnRX71Wo6zeCpC9C3djE\"}}}, :current-path \"src/solutions/2022/day08\", :resource->url {\"/js/viewer.js\" \"https://storage.clerk.garden/nextjournal/clerk-assets@3gzDSuxacxY4YqqmkkG2DNy4Rkux/viewer.js?immutable=true\", \"/css/viewer.css\" \"_data/8VsuB17ZykScJpXQavsNhPqKdep1WsCo4jHpscxg1n8oShucdSKWsgG2d7eBNNtHFCDmG5aRaKoBxBbzR15CidaGxN.css\"}, :index \"src/index.clj\", :html \"<div class=\\\"flex\\\"><div class=\\\"fixed top-2 left-2 md:left-auto md:right-2 z-10\\\"><div class=\\\"relative dark-mode-toggle\\\"><button class=\\\"text-slate-400 hover:text-slate-600 dark:hover:text-white cursor-pointer\\\"><svg class=\\\"w-5 h-5 md:w-4 md:h-4\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"11.9998\\\" cy=\\\"11.9998\\\" r=\\\"5.75375\\\" fill=\\\"currentColor\\\"></circle><g><circle cx=\\\"3.08982\\\" cy=\\\"6.85502\\\" r=\\\"1.71143\\\" transform=\\\"rotate(-60 3.08982 6.85502)\\\" fill=\\\"currentColor\\\"></circle><circle cx=\\\"3.0903\\\" cy=\\\"17.1436\\\" r=\\\"1.71143\\\" transform=\\\"rotate(-120 3.0903 17.1436)\\\" fill=\\\"currentColor\\\"></circle><circle cx=\\\"12\\\" cy=\\\"22.2881\\\" r=\\\"1.71143\\\" fill=\\\"currentColor\\\"></circle><circle cx=\\\"20.9101\\\" cy=\\\"17.1436\\\" r=\\\"1.71143\\\" transform=\\\"rotate(-60 20.9101 17.1436)\\\" fill=\\\"currentColor\\\"></circle><circle cx=\\\"20.9101\\\" cy=\\\"6.8555\\\" r=\\\"1.71143\\\" transform=\\\"rotate(-120 20.9101 6.8555)\\\" fill=\\\"currentColor\\\"></circle><circle cx=\\\"12\\\" cy=\\\"1.71143\\\" r=\\\"1.71143\\\" fill=\\\"currentColor\\\"></circle></g></svg></button></div></div><div class=\\\"flex-auto w-screen scroll-container\\\"><div class=\\\"flex flex-col items-center notebook-viewer flex-auto\\\" style=\\\"margin-left:0px\\\"><div class=\\\"viewer w-full max-w-prose px-8 not-prose mt-3\\\"><div class=\\\"mb-8 text-xs sans-serif text-slate-400\\\"><a href=\\\"./../../../../\\\" class=\\\"font-medium border-b border-dotted border-slate-300 hover:text-indigo-500 hover:border-indigo-500 dark:border-slate-500 dark:hover:text-white dark:hover:border-white transition\\\">Index</a><span class=\\\"mx-2\\\">•</span><span>Generated with <a href=\\\"https://clerk.vision\\\" class=\\\"font-medium border-b border-dotted border-slate-300 hover:text-indigo-500 hover:border-indigo-500 dark:border-slate-500 dark:hover:text-white dark:hover:border-white transition\\\">Clerk</a> from <a class=\\\"font-medium border-b border-dotted border-slate-300 hover:text-indigo-500 hover:border-indigo-500 dark:border-slate-500 dark:hover:text-white dark:hover:border-white transition\\\">src/solutions/2022/day08.clj</a></span></div></div><div class=\\\"result-viewer viewer html-viewer w-full max-w-prose px-8\\\" data-block-id=\\\"solutions.2022.day08/anon-expr-5dtQTNYZ1zbLq4ur2SUEFhbkzrqQUu-result\\\"><div class=\\\"relative\\\"><div class=\\\"overflow-x-auto\\\"><div><article class=\\\"day-desc\\\"><h2>--- Day 8: Treetop Tree House ---</h2><p>The expedition comes across a peculiar patch of tall trees all planted carefully in a grid. The Elves explain that a previous expedition planted these trees as a reforestation effort. Now, they're curious if this would be a good location for a <a href=\\\"https://en.wikipedia.org/wiki/Tree_house\\\" target=\\\"_blank\\\">tree house</a>.</p>\\n<p>First, determine whether there is enough tree cover here to keep a tree house <em>hidden</em>. To do this, you need to count the number of trees that are <em>visible from outside the grid</em> when looking directly along a row or column.</p>\\n<p>The Elves have already launched a <a href=\\\"https://en.wikipedia.org/wiki/Quadcopter\\\" target=\\\"_blank\\\">quadcopter</a> to generate a map with the height of each tree (<span title=\\\"The Elves have already launched a quadcopter (your puzzle input).\\\">your puzzle input</span>). For example:</p>\\n<pre><code>30373\\n25512\\n65332\\n33549\\n35390\\n</code></pre>\\n<p>Each tree is represented as a single digit whose value is its height, where <code>0</code> is the shortest and <code>9</code> is the tallest.</p>\\n<p>A tree is <em>visible</em> if all of the other trees between it and an edge of the grid are <em>shorter</em> than it. Only consider trees in the same row or column; that is, only look up, down, left, or right from any given tree.</p>\\n<p>All of the trees around the edge of the grid are <em>visible</em> - since they are already on the edge, there are no trees to block the view. In this example, that only leaves the <em>interior nine trees</em> to consider:</p>\\n<ul>\\n<li>The top-left <code>5</code> is <em>visible</em> from the left and top. (It isn't visible from the right or bottom since other trees of height <code>5</code> are in the way.)</li>\\n<li>The top-middle <code>5</code> is <em>visible</em> from the top and right.</li>\\n<li>The top-right <code>1</code> is not visible from any direction; for it to be visible, there would need to only be trees of height <em>0</em> between it and an edge.</li>\\n<li>The left-middle <code>5</code> is <em>visible</em>, but only from the right.</li>\\n<li>The center <code>3</code> is not visible from any direction; for it to be visible, there would need to be only trees of at most height <code>2</code> between it and an edge.</li>\\n<li>The right-middle <code>3</code> is <em>visible</em> from the right.</li>\\n<li>In the bottom row, the middle <code>5</code> is <em>visible</em>, but the <code>3</code> and <code>4</code> are not.</li>\\n</ul>\\n<p>With 16 trees visible on the edge and another 5 visible in the interior, a total of <code><em>21</em></code> trees are visible in this arrangement.</p>\\n<p>Consider your map; <em>how many trees are visible from outside the grid?</em></p>\\n</article></div></div></div></div><div data-block-id=\\\"solutions.2022.day08/markdown-5dtzdDXqU3zynn1H9YGw6fQBudUaLe\\\" class=\\\"viewer markdown-viewer w-full max-w-prose px-8\\\"><h2 id=\\\"solution\\\">Solution</h2><p>Ho boy, this was a <em>pain</em>. I couldn&#x27;t find a decent library to handle<!-- --> <!-- -->matrices/co-ordinates so writing most of this took <strong><em>paper</em></strong>.</p><p>It&#x27;s a standard &quot;maximum neighbour&quot; type problem, but this stuff always goes<!-- --> <!-- -->over my head. To simplify, we have to count the number of trees visible in at<!-- --> <!-- -->least one direction (visibility here being whether or not a tree has the<!-- --> <!-- -->largest height to a given edge).</p><p>First things first, let&#x27;s load our input and parse it</p><p>We have to use a function to create the map format we need to solve this<!-- --> <!-- -->problem, which lets us treat the matrix as a simple map without worrying<!-- --> <!-- -->about columns or rows.</p></div><div data-block-id=\\\"solutions.2022.day08/range-&gt;coords-code\\\" class=\\\"viewer code-viewer w-full max-w-wide\\\"><div class=\\\"cm-editor\\\"><cm-scroller><div class=\\\"cm-content whitespace-pre\\\"><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">(<span class=\\\"cmt-keyword\\\">defn</span> <span class=\\\"cmt-variableName\\\">range-&gt;coords</span></div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">  [matrix]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">  (<span class=\\\"cmt-keyword\\\">into</span> {}</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">        (<span class=\\\"cmt-keyword\\\">for</span> [x (<span class=\\\"cmt-keyword\\\">range</span> (<span class=\\\"cmt-keyword\\\">count</span> matrix))</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">              y (<span class=\\\"cmt-keyword\\\">range</span> (<span class=\\\"cmt-keyword\\\">count</span> (<span class=\\\"cmt-keyword\\\">first</span> matrix)))]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">          [[x y] (<span class=\\\"cmt-keyword\\\">parse-long</span> (<span class=\\\"cmt-keyword\\\">str</span> (<span class=\\\"cmt-keyword\\\">get</span> (<span class=\\\"cmt-keyword\\\">get</span> matrix x) y)))])))</div></div></cm-scroller></div></div><div data-block-id=\\\"solutions.2022.day08/markdown-5dtkWWC29mt9RocAAah8Loh78AAKb4\\\" class=\\\"viewer markdown-viewer w-full max-w-prose px-8\\\"><p>Where a call like</p></div><div data-block-id=\\\"solutions.2022.day08/anon-expr-5dtdn8og1St9F6X74LjCdEQYDAKSJi-code\\\" class=\\\"viewer code-viewer w-full max-w-wide\\\"><div class=\\\"cm-editor\\\"><cm-scroller><div class=\\\"cm-content whitespace-pre\\\"><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">(<span class=\\\"cmt-keyword\\\">range-&gt;coords</span> [<span class=\\\"cmt-string\\\">&quot;</span><span class=\\\"cmt-string\\\">123</span><span class=\\\"cmt-string\\\">&quot;</span> <span class=\\\"cmt-string\\\">&quot;</span><span class=\\\"cmt-string\\\">456</span><span class=\\\"cmt-string\\\">&quot;</span>])</div></div></cm-scroller></div></div><div data-block-id=\\\"solutions.2022.day08/markdown-5druQQm6QyiqA1KfA9MLcYznPcvBKq\\\" class=\\\"viewer markdown-viewer w-full max-w-prose px-8\\\"><p>Looks like</p></div><div class=\\\"result-viewer viewer table-markup-viewer w-full max-w-wide\\\" data-block-id=\\\"solutions.2022.day08/anon-expr-5drNevFNEx4dHgPFHuVkdHoVRyJjbn-result\\\"><div class=\\\"relative\\\"><div class=\\\"overflow-x-auto\\\"><div><div><div class=\\\"overflow-x-auto overflow-y-hidden w-full\\\"><table class=\\\"text-xs sans-serif text-gray-900 dark:text-white not-prose\\\"><tbody><tr class=\\\"hover:bg-gray-200 dark:hover:bg-slate-700 bg-black/5 dark:bg-gray-800\\\"><td class=\\\"pl-6 pr-2 py-1\\\"><span class=\\\"inspected-value whitespace-nowrap\\\"><span><span class=\\\"group hover:bg-indigo-100 rounded-sm hover:shadow cursor-pointer\\\"><span class=\\\"text-slate-400 group-hover:text-indigo-700\\\"><svg viewBox=\\\"0 0 100 100\\\" class=\\\"w-[7px] h-[7px] fill-current inline-block transition-all mr-[1px] -mt-[2px] rotate-90\\\"><polygon points=\\\"5.9,88.2 50,11.8 94.1,88.2 \\\"></polygon></svg></span><span class=\\\"group-hover:text-indigo-700\\\">[</span></span><span class=\\\"tabular-nums\\\">0</span> <span class=\\\"tabular-nums\\\">0</span><span>]</span></span></span></td><td class=\\\"pl-6 pr-2 py-1 text-right\\\"><span class=\\\"tabular-nums\\\">1</span></td></tr><tr class=\\\"hover:bg-gray-200 dark:hover:bg-slate-700 bg-white dark:bg-gray-900\\\"><td class=\\\"pl-6 pr-2 py-1\\\"><span class=\\\"inspected-value whitespace-nowrap\\\"><span><span class=\\\"group hover:bg-indigo-100 rounded-sm hover:shadow cursor-pointer\\\"><span class=\\\"text-slate-400 group-hover:text-indigo-700\\\"><svg viewBox=\\\"0 0 100 100\\\" class=\\\"w-[7px] h-[7px] fill-current inline-block transition-all mr-[1px] -mt-[2px] rotate-90\\\"><polygon points=\\\"5.9,88.2 50,11.8 94.1,88.2 \\\"></polygon></svg></span><span class=\\\"group-hover:text-indigo-700\\\">[</span></span><span class=\\\"tabular-nums\\\">0</span> <span class=\\\"tabular-nums\\\">1</span><span>]</span></span></span></td><td class=\\\"pl-6 pr-2 py-1 text-right\\\"><span class=\\\"tabular-nums\\\">2</span></td></tr><tr class=\\\"hover:bg-gray-200 dark:hover:bg-slate-700 bg-black/5 dark:bg-gray-800\\\"><td class=\\\"pl-6 pr-2 py-1\\\"><span class=\\\"inspected-value whitespace-nowrap\\\"><span><span class=\\\"group hover:bg-indigo-100 rounded-sm hover:shadow cursor-pointer\\\"><span class=\\\"text-slate-400 group-hover:text-indigo-700\\\"><svg viewBox=\\\"0 0 100 100\\\" class=\\\"w-[7px] h-[7px] fill-current inline-block transition-all mr-[1px] -mt-[2px] rotate-90\\\"><polygon points=\\\"5.9,88.2 50,11.8 94.1,88.2 \\\"></polygon></svg></span><span class=\\\"group-hover:text-indigo-700\\\">[</span></span><span class=\\\"tabular-nums\\\">0</span> <span class=\\\"tabular-nums\\\">2</span><span>]</span></span></span></td><td class=\\\"pl-6 pr-2 py-1 text-right\\\"><span class=\\\"tabular-nums\\\">3</span></td></tr><tr class=\\\"hover:bg-gray-200 dark:hover:bg-slate-700 bg-white dark:bg-gray-900\\\"><td class=\\\"pl-6 pr-2 py-1\\\"><span class=\\\"inspected-value whitespace-nowrap\\\"><span><span class=\\\"group hover:bg-indigo-100 rounded-sm hover:shadow cursor-pointer\\\"><span class=\\\"text-slate-400 group-hover:text-indigo-700\\\"><svg viewBox=\\\"0 0 100 100\\\" class=\\\"w-[7px] h-[7px] fill-current inline-block transition-all mr-[1px] -mt-[2px] rotate-90\\\"><polygon points=\\\"5.9,88.2 50,11.8 94.1,88.2 \\\"></polygon></svg></span><span class=\\\"group-hover:text-indigo-700\\\">[</span></span><span class=\\\"tabular-nums\\\">1</span> <span class=\\\"tabular-nums\\\">0</span><span>]</span></span></span></td><td class=\\\"pl-6 pr-2 py-1 text-right\\\"><span class=\\\"tabular-nums\\\">4</span></td></tr><tr class=\\\"hover:bg-gray-200 dark:hover:bg-slate-700 bg-black/5 dark:bg-gray-800\\\"><td class=\\\"pl-6 pr-2 py-1\\\"><span class=\\\"inspected-value whitespace-nowrap\\\"><span><span class=\\\"group hover:bg-indigo-100 rounded-sm hover:shadow cursor-pointer\\\"><span class=\\\"text-slate-400 group-hover:text-indigo-700\\\"><svg viewBox=\\\"0 0 100 100\\\" class=\\\"w-[7px] h-[7px] fill-current inline-block transition-all mr-[1px] -mt-[2px] rotate-90\\\"><polygon points=\\\"5.9,88.2 50,11.8 94.1,88.2 \\\"></polygon></svg></span><span class=\\\"group-hover:text-indigo-700\\\">[</span></span><span class=\\\"tabular-nums\\\">1</span> <span class=\\\"tabular-nums\\\">1</span><span>]</span></span></span></td><td class=\\\"pl-6 pr-2 py-1 text-right\\\"><span class=\\\"tabular-nums\\\">5</span></td></tr><tr class=\\\"hover:bg-gray-200 dark:hover:bg-slate-700 bg-white dark:bg-gray-900\\\"><td class=\\\"pl-6 pr-2 py-1\\\"><span class=\\\"inspected-value whitespace-nowrap\\\"><span><span class=\\\"group hover:bg-indigo-100 rounded-sm hover:shadow cursor-pointer\\\"><span class=\\\"text-slate-400 group-hover:text-indigo-700\\\"><svg viewBox=\\\"0 0 100 100\\\" class=\\\"w-[7px] h-[7px] fill-current inline-block transition-all mr-[1px] -mt-[2px] rotate-90\\\"><polygon points=\\\"5.9,88.2 50,11.8 94.1,88.2 \\\"></polygon></svg></span><span class=\\\"group-hover:text-indigo-700\\\">[</span></span><span class=\\\"tabular-nums\\\">1</span> <span class=\\\"tabular-nums\\\">2</span><span>]</span></span></span></td><td class=\\\"pl-6 pr-2 py-1 text-right\\\"><span class=\\\"tabular-nums\\\">6</span></td></tr></tbody></table></div><div class=\\\"overflow-x-auto overflow-y-hidden w-full shadow sticky-table-header\\\"><table style=\\\"margin:0\\\" class=\\\"text-xs sans-serif text-gray-900 dark:text-white not-prose\\\"></table></div></div></div></div></div></div><div data-block-id=\\\"solutions.2022.day08/markdown-5dsS4JUAiHGXrFu8FnSegBSQht3R3T\\\" class=\\\"viewer markdown-viewer w-full max-w-prose px-8\\\"><p>Ok, now we can load our input</p></div><div data-block-id=\\\"solutions.2022.day08/input-code\\\" class=\\\"viewer code-viewer w-full max-w-wide\\\"><div class=\\\"cm-editor\\\"><cm-scroller><div class=\\\"cm-content whitespace-pre\\\"><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">(<span class=\\\"cmt-keyword\\\">def</span> <span class=\\\"cmt-variableName\\\">input</span> (<span class=\\\"cmt-keyword\\\">-&gt;&gt;</span> (<span class=\\\"cmt-keyword\\\">slurp</span> (<span class=\\\"cmt-keyword\\\">io/resource</span> <span class=\\\"cmt-string\\\">&quot;</span><span class=\\\"cmt-string\\\">inputs/2022/day08.txt</span><span class=\\\"cmt-string\\\">&quot;</span>)) <span class=\\\"cmt-comment\\\">;; Load the resource</span></div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">                str/split-lines                               <span class=\\\"cmt-comment\\\">;; Split into lines</span></div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">                range-&gt;coords))                               <span class=\\\"cmt-comment\\\">;; Parse to a map of &#x27;(1 2 3) =&gt; {[0 0] 1 [0 1] 2 [0 2] 3}</span></div></div></cm-scroller></div></div><div data-block-id=\\\"solutions.2022.day08/markdown-5dtnES7n5TFNx27d3rWBZ9N5jKarze\\\" class=\\\"viewer markdown-viewer w-full max-w-prose px-8\\\"><p>Now let&#x27;s solve it! First we create a convenience vector of all the<!-- --> <!-- -->&quot;neighbour&quot; vectors.</p><p>We made a guess that part 2 wouldn&#x27;t involve diagonals, and we called it!</p></div><div data-block-id=\\\"solutions.2022.day08/directions-code\\\" class=\\\"viewer code-viewer w-full max-w-wide\\\"><div class=\\\"cm-editor\\\"><cm-scroller><div class=\\\"cm-content whitespace-pre\\\"><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">(<span class=\\\"cmt-keyword\\\">def</span> <span class=\\\"cmt-variableName\\\">directions</span> [[<span class=\\\"cmt-literal\\\">-1</span> <span class=\\\"cmt-literal\\\">0</span>] [<span class=\\\"cmt-literal\\\">1</span> <span class=\\\"cmt-literal\\\">0</span>] [<span class=\\\"cmt-literal\\\">0</span> <span class=\\\"cmt-literal\\\">-1</span>] [<span class=\\\"cmt-literal\\\">0</span> <span class=\\\"cmt-literal\\\">1</span>]])</div></div></cm-scroller></div></div><div data-block-id=\\\"solutions.2022.day08/markdown-5dsqi8xfsevV34B8ZztE9gxJWZxHRF\\\" class=\\\"viewer markdown-viewer w-full max-w-prose px-8\\\"><p>Then we compute all the trees from a given tree to the edge in a given direction.</p><p>Given the coordinate list, a tree to compute from and a direction vector;<!-- --> <!-- -->iterate until we hit an edge.</p></div><div data-block-id=\\\"solutions.2022.day08/trees-in-code\\\" class=\\\"viewer code-viewer w-full max-w-wide\\\"><div class=\\\"cm-editor\\\"><cm-scroller><div class=\\\"cm-content whitespace-pre\\\"><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">(<span class=\\\"cmt-keyword\\\">defn</span> <span class=\\\"cmt-variableName\\\">trees-in</span> [coords tree direction]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">  (<span class=\\\"cmt-keyword\\\">let</span> [[_ &amp; trees] (<span class=\\\"cmt-keyword\\\">map</span> coords (<span class=\\\"cmt-keyword\\\">iterate</span> (<span class=\\\"cmt-keyword\\\">partial</span> mapv + direction) tree))]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">    (<span class=\\\"cmt-keyword\\\">take-while</span> some? trees)))</div></div></cm-scroller></div></div><div data-block-id=\\\"solutions.2022.day08/markdown-5dsU46isw8zSzQTsDxbKd7HmaTkYFY\\\" class=\\\"viewer markdown-viewer w-full max-w-prose px-8\\\"><p>Compute in all directions if a tree can see an edge in a given direction.</p></div><div data-block-id=\\\"solutions.2022.day08/visible?-code\\\" class=\\\"viewer code-viewer w-full max-w-wide\\\"><div class=\\\"cm-editor\\\"><cm-scroller><div class=\\\"cm-content whitespace-pre\\\"><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">(<span class=\\\"cmt-keyword\\\">defn</span> <span class=\\\"cmt-variableName\\\">visible?</span></div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">  [coords tree]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">  (<span class=\\\"cmt-keyword\\\">some</span> #(<span class=\\\"cmt-keyword\\\">every?</span> (<span class=\\\"cmt-keyword\\\">partial</span> &gt; (<span class=\\\"cmt-keyword\\\">coords</span> tree)) (<span class=\\\"cmt-keyword\\\">trees-in</span> coords tree %)) directions))</div></div></cm-scroller></div></div><div data-block-id=\\\"solutions.2022.day08/markdown-5ds964nbBut4mQyEnKe9kDBrvWXSkS\\\" class=\\\"viewer markdown-viewer w-full max-w-prose px-8\\\"><p>Compute the viewing distance; that is how many trees the current tree can see.</p></div><div data-block-id=\\\"solutions.2022.day08/viewing-distance-code\\\" class=\\\"viewer code-viewer w-full max-w-wide\\\"><div class=\\\"cm-editor\\\"><cm-scroller><div class=\\\"cm-content whitespace-pre\\\"><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">(<span class=\\\"cmt-keyword\\\">defn</span> <span class=\\\"cmt-variableName\\\">viewing-distance</span></div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">  [coords tree]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">  (<span class=\\\"cmt-keyword\\\">transduce</span></div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">   (<span class=\\\"cmt-keyword\\\">map</span> (<span class=\\\"cmt-keyword\\\">fn</span> [direction]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">          (<span class=\\\"cmt-keyword\\\">reduce</span> (<span class=\\\"cmt-keyword\\\">fn</span> [distance cand] (<span class=\\\"cmt-keyword\\\">if</span> (<span class=\\\"cmt-keyword\\\">&gt;=</span> cand (<span class=\\\"cmt-keyword\\\">coords</span> tree)) (<span class=\\\"cmt-keyword\\\">reduced</span> (<span class=\\\"cmt-keyword\\\">inc</span> distance)) (<span class=\\\"cmt-keyword\\\">inc</span> distance)))</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">                  <span class=\\\"cmt-literal\\\">0</span></div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">                  (<span class=\\\"cmt-keyword\\\">trees-in</span> coords tree direction))))</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">   *</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">   directions))</div></div></cm-scroller></div></div><div data-block-id=\\\"solutions.2022.day08/markdown-5dtWepf62DJo6zKtPsoSETtXmdSm1y\\\" class=\\\"viewer markdown-viewer w-full max-w-prose px-8\\\"><p>That&#x27;s everything! Now we can run through part 1. Here, all we care about is<!-- --> <!-- -->how many trees can see an edge. A simple count of all the trees that have a<!-- --> <!-- -->visible edge.</p><p>There&#x27;s almost certainly a cleaner transducer way to do this, maybe I&#x27;ll<!-- --> <!-- -->revisit after the fact.</p></div><div data-block-id=\\\"solutions.2022.day08/part-1-code\\\" class=\\\"viewer code-viewer w-full max-w-wide\\\"><div class=\\\"cm-editor\\\"><cm-scroller><div class=\\\"cm-content whitespace-pre\\\"><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">(<span class=\\\"cmt-keyword\\\">defn</span> <span class=\\\"cmt-variableName\\\">part-1</span></div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">  [input]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">  (<span class=\\\"cmt-keyword\\\">count</span> (<span class=\\\"cmt-keyword\\\">filter</span> (<span class=\\\"cmt-keyword\\\">partial</span> visible? input) (<span class=\\\"cmt-keyword\\\">keys</span> input))))</div></div></cm-scroller></div></div><div data-block-id=\\\"solutions.2022.day08/markdown-5dtvYRc5DtC3RPzuvhsx5HbbXH1rS7\\\" class=\\\"viewer markdown-viewer w-full max-w-prose px-8\\\"><p>Running this part gives our answer</p></div><div class=\\\"result-viewer viewer number-viewer w-full max-w-prose px-8\\\" data-block-id=\\\"solutions.2022.day08/anon-expr-5dshGnyCYVfgr3cV4vKRqeFt2v8Fqp-result\\\"><div class=\\\"relative\\\"><div class=\\\"overflow-x-auto\\\"><span class=\\\"cmt-number inspected-value\\\">1684</span></div></div></div><div data-block-id=\\\"solutions.2022.day08/markdown-5dswa3vvsqV7VD77bXdWvgyNAmkRdg\\\" class=\\\"viewer markdown-viewer w-full max-w-prose px-8\\\"><p>Part 2 is a bit more involved, now we have to find the most scenic tree by<!-- --> <!-- -->multiplying together all the viewing distances and finding the biggest<!-- --> <!-- -->number.</p></div><div data-block-id=\\\"solutions.2022.day08/part-2-code\\\" class=\\\"viewer code-viewer w-full max-w-wide\\\"><div class=\\\"cm-editor\\\"><cm-scroller><div class=\\\"cm-content whitespace-pre\\\"><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">(<span class=\\\"cmt-keyword\\\">defn</span> <span class=\\\"cmt-variableName\\\">part-2</span></div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">  [input]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">  (<span class=\\\"cmt-keyword\\\">transduce</span> (<span class=\\\"cmt-keyword\\\">map</span> (<span class=\\\"cmt-keyword\\\">partial</span> viewing-distance input)) max <span class=\\\"cmt-literal\\\">0</span> (<span class=\\\"cmt-keyword\\\">keys</span> input)))</div></div></cm-scroller></div></div><div data-block-id=\\\"solutions.2022.day08/markdown-5dspMqxdw3uNK6Pgan8eaYi57sm4wP\\\" class=\\\"viewer markdown-viewer w-full max-w-prose px-8\\\"><p>Which gives our answer</p></div><div class=\\\"result-viewer viewer number-viewer w-full max-w-prose px-8\\\" data-block-id=\\\"solutions.2022.day08/anon-expr-5ds3NJhiXAVBTLsVFex2mJDuuDv1Lr-result\\\"><div class=\\\"relative\\\"><div class=\\\"overflow-x-auto\\\"><span class=\\\"cmt-number inspected-value\\\">486540</span></div></div></div></div></div></div><div class=\\\"fixed w-full z-20 top-0 left-0 w-full\\\"></div>\\n\"}".replaceAll('nextjournal.clerk.view/escape-closing-script-tag', 'script')
viewer.init(viewer.read_string(state))
</script></body></html>