<!DOCTYPE html>
<html><head><meta charset="UTF-8"><meta content="width=device-width, initial-scale=1" name="viewport"><meta content="Ho boy, this was a pain. I couldn&apos;t find a decent library to handle matrices/co-ordinates so writing most of this took paper." property="og:description"><meta content="Problem" property="og:title"><meta content="article:clerk" property="og:type"><meta content="summary_large_image" name="twitter:card"><link href="./../../../../_data/8VtDnQGgPmpY9sEDrrcAF9en62cCkj8LzQSfBzwMbkBxxCsmXPFU7wkvzUwha6kzvjGXkj3XRbD4gaW2CrqWE52L9j.css" rel="stylesheet" type="text/css"><script src="https://storage.clerk.garden/nextjournal/clerk-assets@43sknWSpfsWGp1HAfZe1dLuBjmWH/viewer.js?immutable=true" type="module"></script><link href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css" rel="stylesheet" type="text/css"><link href="https://fonts.bunny.net" rel="preconnect"><link href="https://fonts.bunny.net/css?family=fira-mono:400,700%7Cfira-sans:400,400i,500,500i,700,700i%7Cfira-sans-condensed:700,700i%7Cpt-serif:400,400i,700,700i" rel="stylesheet" type="text/css"><style id="extra-styles">em {
    font-style: normal !important;
}

html:not(.dark) pre {
    background-color: #f1f5f9 !important;
    color: #7aaac4 !important;
}

.dark em {
    color: #fff !important;
    text-shadow: 0 0 5px #fff !important;
}

.dark pre {
    background-color: rgb(31 41 55 / var(--tw-bg-opacity)) !important;
}

html:not(.dark) em {
    color: #000 !important;
    text-shadow: 0 0 2px #000 !important;
}

.viewer-result:first-child {
    display: none !important;
}
</style></head><body class="dark:bg-gray-900"><div id="clerk"></div><script type="module">let viewer = nextjournal.clerk.sci_env
let state = "{:bundle? false, :path->doc {\"src/solutions/2022/day08\" {:path [], :nextjournal/value {:toc [{:title \"Problem\", :emoji nil, :path \"#problem\", :items [{:title \"Solution\", :emoji nil, :path \"#solution\", :items []} {:title \"Convert range to co-ordinates\", :emoji nil, :path \"#convert-range-to-co-ordinates\", :items []} {:title \"Compute trees\", :emoji nil, :path \"#compute-trees\", :items []} {:title \"Check visibility\", :emoji nil, :path \"#check-visibility\", :items []} {:title \"Compute viewing distance\", :emoji nil, :path \"#compute-viewing-distance\", :items []} {:title \"Part 1\", :emoji nil, :path \"#part-1\", :items []} {:title \"Part 2\", :emoji nil, :path \"#part-2\", :items []}]}], :sidenotes? false, :toc-visibility true, :atom-var-name->state #viewer-eval (nextjournal.clerk.render/intern-atoms! {}), :ns #viewer-eval (ns solutions.2022.day08), :file \"src/solutions/2022/day08.clj\", :scope solutions.2022.day08, :bundle? false, :header {:path [], :nextjournal/value [:div.viewer.w-full.max-w-prose.px-8.not-prose.mt-3 [:div.mb-8.text-xs.sans-serif.text-slate-400 nil [:<> [:a.font-medium.border-b.border-dotted.border-slate-300.hover:text-indigo-500.hover:border-indigo-500.dark:border-slate-500.dark:hover:text-white.dark:hover:border-white.transition {:href \"./../../../../\"} \"Index\"] [:span.mx-2 \"â€¢\"]] [:span \"Served from \" [:a.font-medium.border-b.border-dotted.border-slate-300.hover:text-indigo-500.hover:border-indigo-500.dark:border-slate-500.dark:hover:text-white.dark:hover:border-white.transition {:href \"https://clerk.vision\"} \"Clerk\"] nil]]], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}, :open-graph {:type \"article:clerk\", :title \"Problem\", :description \"Ho boy, this was a pain. I couldn't find a decent library to handle matrices/co-ordinates so writing most of this took paper.\"}, :title \"Problem\", :blocks [{:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day08/markdown-5dqq5acBASUPKy7JX3Uoyxc1KPMN9A\"} [\"h1\" {:id \"problem\"} [:<> \"Problem\"]]], :nextjournal/render-opts {:id \"solutions.2022.day08/markdown-5dqq5acBASUPKy7JX3Uoyxc1KPMN9A\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [:div {:dangerouslySetInnerHTML {:__html \"<article class=\\\"day-desc\\\"><h2>--- Day 8: Treetop Tree House ---</h2><p>The expedition comes across a peculiar patch of tall trees all planted carefully in a grid. The Elves explain that a previous expedition planted these trees as a reforestation effort. Now, they're curious if this would be a good location for a <a href=\\\"https://en.wikipedia.org/wiki/Tree_house\\\" target=\\\"_blank\\\">tree house</a>.</p>\\n<p>First, determine whether there is enough tree cover here to keep a tree house <em>hidden</em>. To do this, you need to count the number of trees that are <em>visible from outside the grid</em> when looking directly along a row or column.</p>\\n<p>The Elves have already launched a <a href=\\\"https://en.wikipedia.org/wiki/Quadcopter\\\" target=\\\"_blank\\\">quadcopter</a> to generate a map with the height of each tree (<span title=\\\"The Elves have already launched a quadcopter (your puzzle input).\\\">your puzzle input</span>). For example:</p>\\n<pre><code>30373\\n25512\\n65332\\n33549\\n35390\\n</code></pre>\\n<p>Each tree is represented as a single digit whose value is its height, where <code>0</code> is the shortest and <code>9</code> is the tallest.</p>\\n<p>A tree is <em>visible</em> if all of the other trees between it and an edge of the grid are <em>shorter</em> than it. Only consider trees in the same row or column; that is, only look up, down, left, or right from any given tree.</p>\\n<p>All of the trees around the edge of the grid are <em>visible</em> - since they are already on the edge, there are no trees to block the view. In this example, that only leaves the <em>interior nine trees</em> to consider:</p>\\n<ul>\\n<li>The top-left <code>5</code> is <em>visible</em> from the left and top. (It isn't visible from the right or bottom since other trees of height <code>5</code> are in the way.)</li>\\n<li>The top-middle <code>5</code> is <em>visible</em> from the top and right.</li>\\n<li>The top-right <code>1</code> is not visible from any direction; for it to be visible, there would need to only be trees of height <em>0</em> between it and an edge.</li>\\n<li>The left-middle <code>5</code> is <em>visible</em>, but only from the right.</li>\\n<li>The center <code>3</code> is not visible from any direction; for it to be visible, there would need to be only trees of at most height <code>2</code> between it and an edge.</li>\\n<li>The right-middle <code>3</code> is <em>visible</em> from the right.</li>\\n<li>In the bottom row, the middle <code>5</code> is <em>visible</em>, but the <code>3</code> and <code>4</code> are not.</li>\\n</ul>\\n<p>With 16 trees visible on the edge and another 5 visible in the interior, a total of <code><em>21</em></code> trees are visible in this arrangement.</p>\\n<p>Consider your map; <em>how many trees are visible from outside the grid?</em></p>\\n</article>\"}}], :nextjournal/visibility {:code :hide, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}, :nextjournal/render-opts {:id \"solutions.2022.day08/anon-expr-5duBKWg24fH1m4GGMwnTkgdxByLWkM-result\"}}, :nextjournal/blob-id \"5dtDwHDF24V4KeffYJ8y9N2vEx2QMV\", :nextjournal/fetch-opts {:blob-id \"5dtDwHDF24V4KeffYJ8y9N2vEx2QMV\"}, :nextjournal/hash \"8Vux3Qtag11vJDGGuosZb6VG5upPpX2E7KCwX7SoHLzPTF4VxXWv4wdnHiYKUNDGwVCEGy9qmUZ3yRQsxkVB3SycaR\"}, :nextjournal/render-opts {:id \"solutions.2022.day08/anon-expr-5duBKWg24fH1m4GGMwnTkgdxByLWkM-result\"}, :nextjournal/visibility {:code :hide, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day08/markdown-5dst4QjpixQxL5Lqe3mkayojzoRiCj\"} [\"h2\" {:id \"solution\"} [:<> \"Solution\"]] [:p [:<> \"Ho boy, this was a \"] [:em [:<> \"pain\"]] [:<> \". I couldn't find a decent library to handle\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"matrices/co-ordinates so writing most of this took \"] [:strong [:em [:<> \"paper\"]]] [:<> \".\"]] [:p [:<> \"It's a standard \\\"maximum neighbour\\\" type problem, but this stuff always goes\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"over my head. To simplify, we have to count the number of trees visible in at\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"least one direction (visibility here being whether or not a tree has the\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"largest height to a given edge).\"]] [\"h2\" {:id \"convert-range-to-co-ordinates\"} [:<> \"Convert range to co-ordinates\"]] [:p [:<> \"First things first, let's load our input and parse it\"]] [:p [:<> \"We have to use a function to create the map format we need to solve this\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"problem, which lets us treat the matrix as a simple map without worrying\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"about columns or rows.\"]]], :nextjournal/render-opts {:id \"solutions.2022.day08/markdown-5dst4QjpixQxL5Lqe3mkayojzoRiCj\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(defn range->coords\\n  [matrix]\\n  (into {}\\n        (for [x (range (count matrix))\\n              y (range (count (first matrix)))]\\n          [[x y] (parse-long (str (get (get matrix x) y)))])))\", :nextjournal/render-opts {:loc {:line 30, :end-line 35, :column 1, :end-column 63}, :id \"solutions.2022.day08/range->coords-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day08/markdown-5dtR7sUrEKeRtQMvNnjNbhr21WDPhK\"} [:p [:<> \"Where a call like\"]]], :nextjournal/render-opts {:id \"solutions.2022.day08/markdown-5dtR7sUrEKeRtQMvNnjNbhr21WDPhK\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(range->coords [\\\"123\\\" \\\"456\\\"])\", :nextjournal/render-opts {:loc {:line 40, :end-line 40, :column 1, :end-column 30}, :id \"solutions.2022.day08/anon-expr-5du5tHpDwLvPG6j4jqxpGeH2y52oBu-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day08/markdown-5duH9dtSwhLJx8vVZXKko78NEya35B\"} [:p [:<> \"Looks like\"]]], :nextjournal/render-opts {:id \"solutions.2022.day08/markdown-5duH9dtSwhLJx8vVZXKko78NEya35B\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [{:path [0], :nextjournal/value [{:path [0 0], :nextjournal/value [{:path [0 0 0], :nextjournal/value [{:path [0 0 0 0], :nextjournal/value 0, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn (fn [x] [:span.tabular-nums (if (js/Number.isNaN x) \"NaN\" (str x))]), :hash \"5dsqHrnG5bw7BmssiL5xhoYvRWMVD1\"}} {:path [0 0 0 1], :nextjournal/value 0, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn (fn [x] [:span.tabular-nums (if (js/Number.isNaN x) \"NaN\" (str x))]), :hash \"5dsqHrnG5bw7BmssiL5xhoYvRWMVD1\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/vector-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-coll, :opening-paren \"[\", :closing-paren (\"]\"), :page-size 20, :hash \"5dsPqhnXQ6NY7bfSdVZe5SH2Voaoff\"}} {:path [0 0 1], :nextjournal/value 1, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn (fn [x] [:span.tabular-nums (if (js/Number.isNaN x) \"NaN\" (str x))]), :hash \"5dsqHrnG5bw7BmssiL5xhoYvRWMVD1\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/table-row-viewer, :render-fn #viewer-fn (fn [row {:as opts, :keys [path number-col?]}] (into [:tr.hover:bg-gray-200.dark:hover:bg-slate-700 {:class (if (even? (peek path)) \"bg-black/5 dark:bg-gray-800\" \"bg-white dark:bg-gray-900\")}] (map-indexed (fn [idx cell] [:td.pl-6.pr-2.py-1 (when (and (ifn? number-col?) (number-col? idx)) {:class \"text-right\"}) (nextjournal.clerk.render/inspect-presented opts cell)])) row)), :hash \"5dt2e64fJZQ8AecSLyWZUvmr3GpKEs\"}} {:path [0 1], :nextjournal/value [{:path [0 1 0], :nextjournal/value [{:path [0 1 0 0], :nextjournal/value 0, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn (fn [x] [:span.tabular-nums (if (js/Number.isNaN x) \"NaN\" (str x))]), :hash \"5dsqHrnG5bw7BmssiL5xhoYvRWMVD1\"}} {:path [0 1 0 1], :nextjournal/value 1, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn (fn [x] [:span.tabular-nums (if (js/Number.isNaN x) \"NaN\" (str x))]), :hash \"5dsqHrnG5bw7BmssiL5xhoYvRWMVD1\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/vector-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-coll, :opening-paren \"[\", :closing-paren (\"]\"), :page-size 20, :hash \"5dsPqhnXQ6NY7bfSdVZe5SH2Voaoff\"}} {:path [0 1 1], :nextjournal/value 2, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn (fn [x] [:span.tabular-nums (if (js/Number.isNaN x) \"NaN\" (str x))]), :hash \"5dsqHrnG5bw7BmssiL5xhoYvRWMVD1\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/table-row-viewer, :render-fn #viewer-fn (fn [row {:as opts, :keys [path number-col?]}] (into [:tr.hover:bg-gray-200.dark:hover:bg-slate-700 {:class (if (even? (peek path)) \"bg-black/5 dark:bg-gray-800\" \"bg-white dark:bg-gray-900\")}] (map-indexed (fn [idx cell] [:td.pl-6.pr-2.py-1 (when (and (ifn? number-col?) (number-col? idx)) {:class \"text-right\"}) (nextjournal.clerk.render/inspect-presented opts cell)])) row)), :hash \"5dt2e64fJZQ8AecSLyWZUvmr3GpKEs\"}} {:path [0 2], :nextjournal/value [{:path [0 2 0], :nextjournal/value [{:path [0 2 0 0], :nextjournal/value 0, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn (fn [x] [:span.tabular-nums (if (js/Number.isNaN x) \"NaN\" (str x))]), :hash \"5dsqHrnG5bw7BmssiL5xhoYvRWMVD1\"}} {:path [0 2 0 1], :nextjournal/value 2, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn (fn [x] [:span.tabular-nums (if (js/Number.isNaN x) \"NaN\" (str x))]), :hash \"5dsqHrnG5bw7BmssiL5xhoYvRWMVD1\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/vector-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-coll, :opening-paren \"[\", :closing-paren (\"]\"), :page-size 20, :hash \"5dsPqhnXQ6NY7bfSdVZe5SH2Voaoff\"}} {:path [0 2 1], :nextjournal/value 3, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn (fn [x] [:span.tabular-nums (if (js/Number.isNaN x) \"NaN\" (str x))]), :hash \"5dsqHrnG5bw7BmssiL5xhoYvRWMVD1\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/table-row-viewer, :render-fn #viewer-fn (fn [row {:as opts, :keys [path number-col?]}] (into [:tr.hover:bg-gray-200.dark:hover:bg-slate-700 {:class (if (even? (peek path)) \"bg-black/5 dark:bg-gray-800\" \"bg-white dark:bg-gray-900\")}] (map-indexed (fn [idx cell] [:td.pl-6.pr-2.py-1 (when (and (ifn? number-col?) (number-col? idx)) {:class \"text-right\"}) (nextjournal.clerk.render/inspect-presented opts cell)])) row)), :hash \"5dt2e64fJZQ8AecSLyWZUvmr3GpKEs\"}} {:path [0 3], :nextjournal/value [{:path [0 3 0], :nextjournal/value [{:path [0 3 0 0], :nextjournal/value 1, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn (fn [x] [:span.tabular-nums (if (js/Number.isNaN x) \"NaN\" (str x))]), :hash \"5dsqHrnG5bw7BmssiL5xhoYvRWMVD1\"}} {:path [0 3 0 1], :nextjournal/value 0, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn (fn [x] [:span.tabular-nums (if (js/Number.isNaN x) \"NaN\" (str x))]), :hash \"5dsqHrnG5bw7BmssiL5xhoYvRWMVD1\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/vector-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-coll, :opening-paren \"[\", :closing-paren (\"]\"), :page-size 20, :hash \"5dsPqhnXQ6NY7bfSdVZe5SH2Voaoff\"}} {:path [0 3 1], :nextjournal/value 4, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn (fn [x] [:span.tabular-nums (if (js/Number.isNaN x) \"NaN\" (str x))]), :hash \"5dsqHrnG5bw7BmssiL5xhoYvRWMVD1\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/table-row-viewer, :render-fn #viewer-fn (fn [row {:as opts, :keys [path number-col?]}] (into [:tr.hover:bg-gray-200.dark:hover:bg-slate-700 {:class (if (even? (peek path)) \"bg-black/5 dark:bg-gray-800\" \"bg-white dark:bg-gray-900\")}] (map-indexed (fn [idx cell] [:td.pl-6.pr-2.py-1 (when (and (ifn? number-col?) (number-col? idx)) {:class \"text-right\"}) (nextjournal.clerk.render/inspect-presented opts cell)])) row)), :hash \"5dt2e64fJZQ8AecSLyWZUvmr3GpKEs\"}} {:path [0 4], :nextjournal/value [{:path [0 4 0], :nextjournal/value [{:path [0 4 0 0], :nextjournal/value 1, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn (fn [x] [:span.tabular-nums (if (js/Number.isNaN x) \"NaN\" (str x))]), :hash \"5dsqHrnG5bw7BmssiL5xhoYvRWMVD1\"}} {:path [0 4 0 1], :nextjournal/value 1, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn (fn [x] [:span.tabular-nums (if (js/Number.isNaN x) \"NaN\" (str x))]), :hash \"5dsqHrnG5bw7BmssiL5xhoYvRWMVD1\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/vector-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-coll, :opening-paren \"[\", :closing-paren (\"]\"), :page-size 20, :hash \"5dsPqhnXQ6NY7bfSdVZe5SH2Voaoff\"}} {:path [0 4 1], :nextjournal/value 5, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn (fn [x] [:span.tabular-nums (if (js/Number.isNaN x) \"NaN\" (str x))]), :hash \"5dsqHrnG5bw7BmssiL5xhoYvRWMVD1\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/table-row-viewer, :render-fn #viewer-fn (fn [row {:as opts, :keys [path number-col?]}] (into [:tr.hover:bg-gray-200.dark:hover:bg-slate-700 {:class (if (even? (peek path)) \"bg-black/5 dark:bg-gray-800\" \"bg-white dark:bg-gray-900\")}] (map-indexed (fn [idx cell] [:td.pl-6.pr-2.py-1 (when (and (ifn? number-col?) (number-col? idx)) {:class \"text-right\"}) (nextjournal.clerk.render/inspect-presented opts cell)])) row)), :hash \"5dt2e64fJZQ8AecSLyWZUvmr3GpKEs\"}} {:path [0 5], :nextjournal/value [{:path [0 5 0], :nextjournal/value [{:path [0 5 0 0], :nextjournal/value 1, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn (fn [x] [:span.tabular-nums (if (js/Number.isNaN x) \"NaN\" (str x))]), :hash \"5dsqHrnG5bw7BmssiL5xhoYvRWMVD1\"}} {:path [0 5 0 1], :nextjournal/value 2, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn (fn [x] [:span.tabular-nums (if (js/Number.isNaN x) \"NaN\" (str x))]), :hash \"5dsqHrnG5bw7BmssiL5xhoYvRWMVD1\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/vector-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-coll, :opening-paren \"[\", :closing-paren (\"]\"), :page-size 20, :hash \"5dsPqhnXQ6NY7bfSdVZe5SH2Voaoff\"}} {:path [0 5 1], :nextjournal/value 6, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn (fn [x] [:span.tabular-nums (if (js/Number.isNaN x) \"NaN\" (str x))]), :hash \"5dsqHrnG5bw7BmssiL5xhoYvRWMVD1\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/table-row-viewer, :render-fn #viewer-fn (fn [row {:as opts, :keys [path number-col?]}] (into [:tr.hover:bg-gray-200.dark:hover:bg-slate-700 {:class (if (even? (peek path)) \"bg-black/5 dark:bg-gray-800\" \"bg-white dark:bg-gray-900\")}] (map-indexed (fn [idx cell] [:td.pl-6.pr-2.py-1 (when (and (ifn? number-col?) (number-col? idx)) {:class \"text-right\"}) (nextjournal.clerk.render/inspect-presented opts cell)])) row)), :hash \"5dt2e64fJZQ8AecSLyWZUvmr3GpKEs\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/table-body-viewer, :render-fn #viewer-fn (fn [rows opts] (into [:tbody] (map-indexed (fn [idx row] (nextjournal.clerk.render/inspect-presented (update opts :path conj idx) row))) rows)), :hash \"5drS7uu9cHLufmVW24GCUNLcASJ37e\"}}], :nextjournal/width :wide, :nextjournal/render-opts {:num-cols 2, :number-col? #{1}, :id \"solutions.2022.day08/anon-expr-5dtxwbFwhaeonQHoJ6KWwzMgf658wP-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/table-markup-viewer, :render-fn #viewer-fn (fn [head+body opts] [:div (into [nextjournal.clerk.render/render-table-with-sticky-header] (nextjournal.clerk.render/inspect-children opts) head+body)]), :hash \"5dsufpmFMps3gZ2XtLHm3e5XorYXmR\"}}, :nextjournal/blob-id \"5dtnavbxc6Uq9X81n2LeiXRxrrwShz\", :nextjournal/fetch-opts {:blob-id \"5dtnavbxc6Uq9X81n2LeiXRxrrwShz\"}, :nextjournal/hash \"8Vu6YJ1CGLejmpCyGytEBnPvCbRc4SL7m5AvkK4dHbi7foLy1DXCdYMpkEdpNmQAvwbxwYM4aJiEhxYUEpQUAe9hPv\"}, :nextjournal/width :wide, :nextjournal/render-opts {:num-cols 2, :number-col? #{1}, :id \"solutions.2022.day08/anon-expr-5dtxwbFwhaeonQHoJ6KWwzMgf658wP-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day08/markdown-5dtC9BLSEyYYujiL5pKYzvKN2KskNb\"} [:p [:<> \"Ok, now we can load our input\"]]], :nextjournal/render-opts {:id \"solutions.2022.day08/markdown-5dtC9BLSEyYYujiL5pKYzvKN2KskNb\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(def input (->> (slurp (io/resource \\\"inputs/2022/day08.txt\\\")) ;; Load the resource\\n                str/split-lines                               ;; Split into lines\\n                range->coords))                               ;; Parse to a map of '(1 2 3) => {[0 0] 1 [0 1] 2 [0 2] 3}\", :nextjournal/render-opts {:loc {:line 47, :end-line 49, :column 1, :end-column 32}, :id \"solutions.2022.day08/input-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day08/markdown-5du5Rswi4hBATikobG97MkwjaMERp5\"} [:p [:<> \"Now let's solve it! First we create a convenience vector of all the\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"\\\"neighbour\\\" vectors.\"]] [:p [:<> \"We made a guess that part 2 wouldn't involve diagonals, and we called it!\"]]], :nextjournal/render-opts {:id \"solutions.2022.day08/markdown-5du5Rswi4hBATikobG97MkwjaMERp5\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(def directions [[-1 0] [1 0] [0 -1] [0 1]])\", :nextjournal/render-opts {:loc {:line 55, :end-line 55, :column 1, :end-column 45}, :id \"solutions.2022.day08/directions-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day08/markdown-5drXXYNh5AcWnCpVckQFi7HiCQCTDY\"} [\"h2\" {:id \"compute-trees\"} [:<> \"Compute trees\"]] [:p [:<> \"Then we compute all the trees from a given tree to the edge in a given direction.\"]] [:p [:<> \"Given the coordinate list, a tree to compute from and a direction vector;\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"iterate until we hit an edge.\"]]], :nextjournal/render-opts {:id \"solutions.2022.day08/markdown-5drXXYNh5AcWnCpVckQFi7HiCQCTDY\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(defn trees-in [coords tree direction]\\n  (let [[_ & trees] (map coords (iterate (partial mapv + direction) tree))]\\n    (take-while some? trees)))\", :nextjournal/render-opts {:loc {:line 62, :end-line 64, :column 1, :end-column 31}, :id \"solutions.2022.day08/trees-in-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day08/markdown-5dtbnqfvmyNyDEiTeeP1BqW3bc6Ekq\"} [\"h2\" {:id \"check-visibility\"} [:<> \"Check visibility\"]] [:p [:<> \"Compute in all directions if a tree can see an edge in a given direction.\"]]], :nextjournal/render-opts {:id \"solutions.2022.day08/markdown-5dtbnqfvmyNyDEiTeeP1BqW3bc6Ekq\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(defn visible?\\n  [coords tree]\\n  (some #(every? (partial > (coords tree)) (trees-in coords tree %)) directions))\", :nextjournal/render-opts {:loc {:line 68, :end-line 70, :column 1, :end-column 82}, :id \"solutions.2022.day08/visible?-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day08/markdown-5drsS5s4cEsxrne8LkZKdSv6uuJGeN\"} [\"h2\" {:id \"compute-viewing-distance\"} [:<> \"Compute viewing distance\"]] [:p [:<> \"Compute the viewing distance; that is how many trees the current tree can see.\"]]], :nextjournal/render-opts {:id \"solutions.2022.day08/markdown-5drsS5s4cEsxrne8LkZKdSv6uuJGeN\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(defn viewing-distance\\n  [coords tree]\\n  (transduce\\n   (map (fn [direction]\\n          (reduce (fn [distance cand] (if (>= cand (coords tree)) (reduced (inc distance)) (inc distance)))\\n                  0\\n                  (trees-in coords tree direction))))\\n   *\\n   directions))\", :nextjournal/render-opts {:loc {:line 74, :end-line 82, :column 1, :end-column 16}, :id \"solutions.2022.day08/viewing-distance-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day08/markdown-5dsUfu5kBPaw9uLN519ZdZvspWSmZE\"} [\"h2\" {:id \"part-1\"} [:<> \"Part 1\"]] [:p [:<> \"That's everything! Now we can run through part 1. Here, all we care about is\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"how many trees can see an edge. A simple count of all the trees that have a\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"visible edge.\"]] [:p [:<> \"There's almost certainly a cleaner transducer way to do this, maybe I'll\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"revisit after the fact.\"]]], :nextjournal/render-opts {:id \"solutions.2022.day08/markdown-5dsUfu5kBPaw9uLN519ZdZvspWSmZE\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(defn part-1\\n  [input]\\n  (count (filter (partial visible? input) (keys input))))\", :nextjournal/render-opts {:loc {:line 92, :end-line 94, :column 1, :end-column 58}, :id \"solutions.2022.day08/part-1-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day08/markdown-5du7GNRsUK7t3SXWsczpmcviAkwLLY\"} [:p [:<> \"Running this part gives our answer\"]]], :nextjournal/render-opts {:id \"solutions.2022.day08/markdown-5du7GNRsUK7t3SXWsczpmcviAkwLLY\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value 1684, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5drsU4XXFvRiNxHZXiNRRP4gBX7jiW\"}, :nextjournal/render-opts {:id \"solutions.2022.day08/anon-expr-5dqyLURFdt23SKEykkvPQp381ApJNL-result\"}}, :nextjournal/blob-id \"5dteiHC4Wx1iyBeCeDgYugns97jMef\", :nextjournal/fetch-opts {:blob-id \"5dteiHC4Wx1iyBeCeDgYugns97jMef\"}, :nextjournal/hash \"8VtdNA7kGBzhCmXRSq5T7qhgYHcaJw3b4LjJ2Mj7bhqoviFNnNMtwD2nR2yoKzH1H8Tba1WJkjb5R7D2nw7MMziSEL\"}, :nextjournal/render-opts {:id \"solutions.2022.day08/anon-expr-5dqyLURFdt23SKEykkvPQp381ApJNL-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day08/markdown-5dsctpyP9Ji3uEBagKr9uSGrydUVqU\"} [\"h2\" {:id \"part-2\"} [:<> \"Part 2\"]] [:p [:<> \"Part 2 is a bit more involved, now we have to find the most scenic tree by\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"multiplying together all the viewing distances and finding the biggest\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"number.\"]]], :nextjournal/render-opts {:id \"solutions.2022.day08/markdown-5dsctpyP9Ji3uEBagKr9uSGrydUVqU\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(defn part-2\\n  [input]\\n  (transduce (map (partial viewing-distance input)) max 0 (keys input)))\", :nextjournal/render-opts {:loc {:line 105, :end-line 107, :column 1, :end-column 73}, :id \"solutions.2022.day08/part-2-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day08/markdown-5dsCmyHsvB8C19ZLVyDeAMusv11HXT\"} [:p [:<> \"Which gives our answer\"]]], :nextjournal/render-opts {:id \"solutions.2022.day08/markdown-5dsCmyHsvB8C19ZLVyDeAMusv11HXT\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value 486540, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5drsU4XXFvRiNxHZXiNRRP4gBX7jiW\"}, :nextjournal/render-opts {:id \"solutions.2022.day08/anon-expr-5dstDS4zmbArT87H81wfsNt68WWiqo-result\"}}, :nextjournal/blob-id \"5dtWUQgrL38ZTFuwdVvY9N8Uu9KYb2\", :nextjournal/fetch-opts {:blob-id \"5dtWUQgrL38ZTFuwdVvY9N8Uu9KYb2\"}, :nextjournal/hash \"8VuHnAthYavu4KboZPAsnxdkV3Hrnz5P3DVTqdtVSwZZ1M6mwumn9PibqFrMaLy5iDkGzV3b5EUnnDSYMerGKaYowz\"}, :nextjournal/render-opts {:id \"solutions.2022.day08/anon-expr-5dstDS4zmbArT87H81wfsNt68WWiqo-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}}]}, :nextjournal/viewer {:name nextjournal.clerk.viewer/notebook-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-notebook, :hash \"5dsiHybTyGGTEpReRaV7nfNxoDgnKx\"}}}, :current-path \"src/solutions/2022/day08\", :resource->url {\"/js/viewer.js\" \"https://storage.clerk.garden/nextjournal/clerk-assets@43sknWSpfsWGp1HAfZe1dLuBjmWH/viewer.js?immutable=true\", \"/css/viewer.css\" \"_data/8VtDnQGgPmpY9sEDrrcAF9en62cCkj8LzQSfBzwMbkBxxCsmXPFU7wkvzUwha6kzvjGXkj3XRbD4gaW2CrqWE52L9j.css\"}, :index \"src/index.clj\"}".replaceAll('nextjournal.clerk.view/escape-closing-script-tag', 'script')
viewer.init(viewer.read_string(state))
</script></body></html>