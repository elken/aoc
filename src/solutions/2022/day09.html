<!DOCTYPE html>
<html class="overflow-hidden min-h-screen"><head><title>Solution</title><meta charset="UTF-8"><meta content="width=device-width, initial-scale=1" name="viewport"><meta content="From spotting trees to rope physics! Can&apos;t see these problems are dull atleast..." property="og:description"><meta content="Solution" property="og:title"><meta content="article:clerk" property="og:type"><meta content="summary_large_image" name="twitter:card"><script src="https://cdn.tailwindcss.com?plugins=typography" type="text/javascript"></script><script>tailwind.config = {
  darkMode: "class",
  content: ["./tw/viewer.js", "./tw/**/*.edn"],
  safelist: ['dark'],
  theme: {
    extend: {},
    fontFamily: {
      sans: ["Fira Sans", "-apple-system", "BlinkMacSystemFont", "sans-serif"],
      serif: ["PT Serif", "serif"],
      mono: ["Fira Mono", "monospace"]
    }
  },
  variants: {
    extend: {},
  },
  plugins: [],
}
</script><style type="text/tailwindcss">@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    font-size: 18px;
  }
  @media (max-width: 600px) {
    html {
      font-size: 16px;
    }
  }
  .font-condensed { font-family: "Fira Sans Condensed", sans-serif; }
  .font-inter     { font-family: "Inter", sans-serif; }
  body {
    @apply font-serif antialiased text-gray-900 sm:overscroll-y-none;
  }
  code, .code {
    @apply font-mono text-sm text-gray-900 bg-slate-50 px-0.5 py-px rounded dark:bg-gray-800;
  }
  code::before, code::after { @apply content-none !important; }
  h1, h3, h4, h5, h6 {
    @apply font-condensed font-bold mt-8 first:mt-0;
  }
  h2 {
    /*We cannot collapse margins due to nesting but we want to*/
    /*keep the h2’s large margin visible*/
    @apply font-condensed font-bold mt-8 first:mt-2;
  }
  h1 { @apply text-4xl; }
  h2 { @apply text-3xl; }
  h3 { @apply text-2xl; }

  button { @apply focus:outline-none; }
  strong { @apply font-bold; }
  em     { @apply italic; }
  pre    { @apply m-0 font-mono; }
}

/* Compatibility */
/* --------------------------------------------------------------- */
/* TODO: Verify which colors are in use and replace with Tailwind
   colors accordingly. Move Nj-specific styles out of here. */

:root {
  --teal-color: #31afd0;
  --dark-teal-color: #095960;
  --near-black-color: #2e2e2c;
  --red-color: #d64242;
  --dark-blue-color: #1f2937;
  --dark-blue-60-color: rgba(28, 42, 56, 0.6);
  --gray-panel-color: rgba(239, 241, 245, 1.000);
  --brand-color: var(--dark-blue-color);
  --link-color: #5046e4;
  --command-bar-selected-color: var(--teal-color);
}

.serif      { @apply font-serif; }
.sans-serif { @apply font-sans; }
.monospace  { @apply font-mono; }
.inter      { @apply font-inter; }

.border-color-teal { border-color: var(--dark-teal-color); }
.teal { color: var(--teal-color); }
.bg-dark-blue { background: var(--dark-blue-color); }
.bg-dark-blue-60 { background: rgba(28, 42, 56, 0.6); }
.bg-gray-panel { background: var(--gray-panel-color); }
.text-dark-blue  { color: var(--dark-blue-color); }
.text-dark-blue-60 { color: var(--dark-blue-60-color); }
.border-dark-blue-30 { border-color: rgba(28, 42, 56, 0.6); }
.text-brand { color: var(--dark-blue-color); }
.bg-brand { background: var(--dark-blue-color); }
.text-selected { color: white; }
.red { color: var(--red-color); }

/* Disclose Button */
/* --------------------------------------------------------------- */

.disclose {
  @apply content-none border-solid cursor-pointer inline-block relative mr-[3px] top-[-2px] transition-all;
  border-color: var(--near-black-color) transparent;
  border-width: 6px 4px 0;
}
.disclose:hover {
  border-color: var(--near-black-color) transparent;
}
.dark .disclose,
.dark .disclose:hover {
  border-color: white transparent;
}
.disclose.collapsed {
  @apply rotate-[-90deg];
}

/* Layout */
/* --------------------------------------------------------------- */

.page {
  @apply max-w-5xl mx-auto px-12 box-border flex-shrink-0;
}
.max-w-prose { @apply max-w-[46rem] !important; }
.max-w-wide  { @apply max-w-3xl !important; }

/* List Styles */
/* --------------------------------------------------------------- */

.task-list-item + .task-list-item,
.viewer-markdown ul ul {
  @apply mt-1 mb-0;
}

/* compact TOC */
.viewer-markdown .toc ul {
  list-style: none;
  @apply my-1;
}

/* Code Viewer */
/* --------------------------------------------------------------- */

.viewer-code {
  @apply font-mono bg-slate-100 rounded-sm text-sm overflow-x-auto dark:bg-gray-800;
}
.viewer-code .cm-content {
  @apply py-4 px-8;
}
@media (min-width: 960px){
  .viewer-notebook .viewer-code .cm-content {
    @apply py-4 pl-12;
  }
}
/* Don’t show focus outline when double-clicking cell in Safari */
.cm-scroller { @apply focus:outline-none; }

/* Syntax Highlighting */
/* --------------------------------------------------------------- */

.inspected-value { @apply text-xs font-mono leading-[1.25rem]; }
.cmt-strong, .cmt-heading { @apply font-bold; }
.cmt-italic, .cmt-emphasis { @apply italic; }
.cmt-strikethrough { @apply line-through; }
.cmt-link { @apply underline; }
.untyped-value { @apply whitespace-nowrap; }

.cm-editor, .cmt-default, .viewer-result {
  @apply text-slate-800 dark:text-slate-300;
}
.cmt-keyword {
  @apply text-purple-800 dark:text-pink-400;
}
.cmt-atom, .cmt-bool, .cmt-url, .cmt-contentSeparator, .cmt-labelName {
  @apply text-blue-900 dark:text-blue-300;
}
.cmt-inserted, .cmt-literal {
  @apply text-emerald-700 dark:text-emerald-200;
}
.cmt-string, .cmt-deleted {
  @apply text-rose-700 dark:text-sky-300;
}
.cmt-italic.cmt-string {
  @apply dark:text-sky-200;
}
.cmt-regexp, .cmt-escape {
  @apply text-orange-500 dark:text-orange-300;
}
.cmt-variableName {
  @apply text-blue-800 dark:text-sky-300;
}
.cmt-typeName, .cmt-namespace {
  @apply text-emerald-600 dark:text-emerald-300;
}
.cmt-className {
  @apply text-teal-600 dark:text-teal-200;
}
.cmt-macroName {
  @apply text-teal-700 dark:text-teal-200;
}
.cmt-propertyName {
  @apply text-blue-700 dark:text-blue-200;
}
.cmt-comment {
  @apply text-slate-500 dark:text-slate-400;
}
.cmt-meta {
  @apply text-slate-600 dark:text-slate-400;
}
.cmt-invalid {
  @apply text-red-500 dark:text-red-300;
}

.result-data {
  @apply font-mono text-sm overflow-x-auto whitespace-nowrap leading-normal;
}
.result-data::-webkit-scrollbar, .path-nav::-webkit-scrollbar {
  @apply h-0;
}
.result-data-collapsed {
  @apply whitespace-nowrap;
}
.result-data-field {
  @apply ml-4 whitespace-nowrap;
}
.result-data-field-link{
  @apply ml-4 whitespace-nowrap cursor-pointer;
}
.result-data-field-link:hover {
  @apply text-black bg-black/5;
}
.result-text-empty {
  color: rgba(0,0,0,.3);
}
.browsify-button:hover {
  box-shadow: -2px 0 0 2px #edf2f7;
}

/* Prose */
/* --------------------------------------------------------------- */

.viewer-notebook,
.viewer-markdown {
  @apply prose
    dark:prose-invert
    prose-a:text-blue-600 prose-a:no-underline hover:prose-a:underline
    dark:prose-a:text-blue-300
    prose-p:mt-4 prose-p:leading-snug
    prose-ol:mt-4 prose-ol:mb-6 prose-ol:leading-snug
    prose-ul:mt-4 prose-ul:mb-6 prose-ul:leading-snug
    prose-blockquote:mt-4 prose-blockquote:leading-snug
    prose-hr:mt-6 prose-hr:border-t-2 prose-hr:border-solid prose-hr:border-slate-200
    prose-figure:mt-4
    prose-figcaption:mt-2 prose-figcaption:text-xs
    prose-headings:mb-4
    prose-table:mt-0
    prose-th:mb-0
    prose-img:my-0
    prose-code:font-medium prose-code:bg-slate-100
    max-w-none;
}
.viewer-markdown blockquote p:first-of-type:before,
.viewer-markdown blockquote p:last-of-type:after {
  @apply content-none;
}

/* Images */
/* --------------------------------------------------------------- */


/* Todo Lists */
/* --------------------------------------------------------------- */

.contains-task-list {
  @apply pl-6 list-none;
}
.contains-task-list input[type="checkbox"] {
  @apply appearance-none h-4 w-4 rounded border border-slate-200 relative mr-[0.3rem] ml-[-1.5rem] top-[0.15rem];
}
.contains-task-list input[type="checkbox"]:checked {
  @apply border-indigo-600 bg-indigo-600 bg-no-repeat bg-contain;
  background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3e%3c/svg%3e");
}

/* Markdown TOC */
/* --------------------------------------------------------------- */

.viewer-markdown .toc      { @apply mt-4; }
.viewer-markdown h1 + .toc { @apply mt-8; }

.viewer-markdown .toc h1,
.viewer-markdown .toc h2,
.viewer-markdown .toc h3,
.viewer-markdown .toc h4,
.viewer-markdown .toc h5,
.viewer-markdown .toc h6 {
  @apply text-base text-indigo-600 font-sans my-0;
}
.viewer-markdown .toc a {
  @apply text-indigo-600 font-normal no-underline hover:underline;
}
.viewer-markdown .toc li    { @apply m-0; }
.viewer-markdown .toc ul ul { @apply pl-4; }

/* Notebook Spacing */
/* --------------------------------------------------------------- */

.viewer-notebook { @apply py-16; }
#clerk-static-app .viewer-notebook { @apply pt-[0.8rem] pb-16; }
.viewer-markdown *:first-child:not(.viewer-code):not(li):not(h2) { @apply mt-0; }
/*.viewer + .viewer { @apply mt-6; }*/
.viewer + .viewer-result { @apply mt-0; }
.viewer-code + .viewer-result { @apply mt-3; }
.viewer-markdown + .viewer-markdown { @apply mt-0; }

/* Sidenotes */
/* --------------------------------------------------------------- */

.sidenote-ref {
  @apply top-[-3px] inline-flex justify-center items-center w-[18px] h-[18px]
    rounded-full bg-slate-100 border border-slate-300 hover:bg-slate-200 hover:border-slate-300
    m-0 ml-[4px] cursor-pointer;
}
.sidenote {
  @apply hidden float-left clear-both mx-[2.5%] my-4 text-xs relative w-[95%];
}
.sidenote-ref.expanded + .sidenote {
  @apply block;
}
@media (min-width: 860px) {
  .sidenote-ref {
    @apply top-[-0.5em] w-auto h-auto inline border-0 bg-transparent m-0 pointer-events-none;
  }
  .sidenote sup { @apply inline; }
  .viewer-markdown .contains-sidenotes p { @apply max-w-[65%]; }
  .viewer-markdown p .sidenote {
    @apply mr-[-54%] mt-[0.2rem] w-1/2 float-right clear-right relative block;
  }
}
.viewer-code + .viewer:not(.viewer-markdown):not(.viewer-code):not(.viewer-code-folded),
.viewer-code-folded + .viewer:not(.viewer-markdown):not(.viewer-code):not(.viewer-code-folded),
.viewer-result + .viewer-result {
  @apply mt-2;
}
.viewer-code + .viewer-code-folded {
  @apply mt-4;
}
.viewer-result {
  @apply leading-tight mb-6;
}
.viewer-result figure {
  @apply mt-0 !important;
}
@media (min-width: 768px) {
  .devcard-desc > div {
    @apply max-w-full m-0;
  }
}

/* Command Palette */
/* --------------------------------------------------------------- */

.nj-commands-input {
  @apply bg-transparent text-white;
}
.nj-context-menu-item:hover:not([disabled]) {
  @apply cursor-pointer;
  background-color: rgba(255,255,255,.14);
}

/* Devdocs */
/* --------------------------------------------------------------- */

.logo, .logo-white {
  @apply block indent-[-999em];
  background: url(/images/nextjournal-logo.svg) center center no-repeat;
}
.devdocs-body {
  @apply font-inter;
}

/* Workarounds */
/* --------------------------------------------------------------- */

/* Fixes vega viewer resizing into infinity */
.vega-embed .chart-wrapper { @apply h-auto !important; }
/* fixes fraction separators being overridden by tw’s border-color */
.katex * { @apply border-black; }
</style><script src="https://storage.googleapis.com/nextjournal-cas-eu/assets/2pKcXZifbY4r2D1BS8vQ5BCjbxE2wA7Acn4fYycKAqXh1weovNVUKutSisf6gnzdHP6wnH4GXz4CapPzT7fNE9QR-viewer.js" type="module"></script><link href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css" rel="stylesheet" type="text/css"><link href="https://fonts.bunny.net" rel="preconnect"><link href="https://fonts.bunny.net/css?family=fira-code:400,700%7Cfira-mono:400,700%7Cfira-sans:400,400i,500,500i,700,700i%7Cfira-sans-condensed:700,700i%7Cpt-serif:400,400i,700,700i" rel="stylesheet" type="text/css"></head><body><div id="clerk-static-app"><div class="flex h-screen bg-white dark:bg-gray-900"><div class="h-screen overflow-y-auto flex-auto scroll-container"><div class="flex"><div class="fixed top-2 left-2 md:left-auto md:right-2 z-10"><div class="relative dark-mode-toggle"><button class="text-slate-400 hover:text-slate-600 dark:hover:text-white cursor-pointer"><svg class="w-5 h-5 md:w-4 md:h-4" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="11.9998" cy="11.9998" r="5.75375" fill="currentColor"></circle><svg><circle cx="3.08982" cy="6.85502" r="1.71143" transform="rotate(-60 3.08982 6.85502)" fill="currentColor"></circle><circle cx="3.0903" cy="17.1436" r="1.71143" transform="rotate(-120 3.0903 17.1436)" fill="currentColor"></circle><circle cx="12" cy="22.2881" r="1.71143" fill="currentColor"></circle><circle cx="20.9101" cy="17.1436" r="1.71143" transform="rotate(-60 20.9101 17.1436)" fill="currentColor"></circle><circle cx="20.9101" cy="6.8555" r="1.71143" transform="rotate(-120 20.9101 6.8555)" fill="currentColor"></circle><circle cx="12" cy="1.71143" r="1.71143" fill="currentColor"></circle></svg></svg></button></div></div><div class="flex-auto h-screen overflow-y-auto scroll-container"><div class="flex flex-col items-center viewer-notebook flex-auto"><div class="viewer w-full max-w-prose px-8"><div class="mb-8 text-xs sans-serif text-gray-400 not-prose"><a href="../../../" class="hover:text-indigo-500 dark:hover:text-white font-medium border-b border-dotted border-gray-300">Back to index</a><span class="mx-1">/</span><span>Generated with <a href="https://github.com/nextjournal/clerk" class="hover:text-indigo-500 dark:hover:text-white font-medium border-b border-dotted border-gray-300">Clerk</a></span></div></div><div class="viewer viewer-result w-full max-w-prose px-8"><div class="relative"><div class="overflow-y-hidden"><style>em{font-style: normal;}
html:not(.dark) pre{background-color: #f1f5f9 !important;color: #7aaac4 !important;}
.dark em{color: #fff;text-shadow: 0 0 5px #fff;}
.dark pre {background-color: rgb(31 41 55 / var(--tw-bg-opacity)) !important;}
html:not(.dark) em{color: #000; text-shadow: 0 0 2px #000;}
.viewer-result:first-child{display: none;}</style></div></div></div><div class="viewer viewer-result w-full max-w-prose px-8"><div class="relative"><div class="overflow-y-hidden"><div><article class="day-desc"><h2>--- Day 9: Rope Bridge ---</h2><p>This rope bridge creaks as you walk along it. You aren't sure how old it is, or whether it can even support your weight.</p>
<p>It seems to support the Elves just fine, though. The bridge spans a gorge which was carved out by the massive river far below you.</p>
<p>You step carefully; as you do, the ropes stretch and twist. You decide to distract yourself by modeling rope physics; maybe you can even figure out where <em>not</em> to step.</p>
<p>Consider a rope with a knot at each end; these knots mark the <em>head</em> and the <em>tail</em> of the rope. If the head moves far enough away from the tail, the tail is pulled toward the head.</p>
<p>Due to nebulous reasoning involving <a href="https://en.wikipedia.org/wiki/Planck_units#Planck_length" target="_blank">Planck lengths</a>, you should be able to model the positions of the knots on a two-dimensional grid. Then, by following a hypothetical <em>series of motions</em> (your puzzle input) for the head, you can determine how the tail will move.</p>
<p><span title="I'm an engineer, not a physicist!">Due to the aforementioned Planck lengths</span>, the rope must be quite short; in fact, the head (<code>H</code>) and tail (<code>T</code>) must <em>always be touching</em> (diagonally adjacent and even overlapping both count as touching):</p>
<pre><code>....
.TH.
....

....
.H..
..T.
....

...
.H. (H covers T)
...
</code></pre>
<p>If the head is ever two steps directly up, down, left, or right from the tail, the tail must also move one step in that direction so it remains close enough:</p>
<pre><code>.....    .....    .....
.TH.. -&gt; .T.H. -&gt; ..TH.
.....    .....    .....

...    ...    ...
.T.    .T.    ...
.H. -&gt; ... -&gt; .T.
...    .H.    .H.
...    ...    ...
</code></pre>
<p>Otherwise, if the head and tail aren't touching and aren't in the same row or column, the tail always moves one step diagonally to keep up:</p>
<pre><code>.....    .....    .....
.....    ..H..    ..H..
..H.. -&gt; ..... -&gt; ..T..
.T...    .T...    .....
.....    .....    .....

.....    .....    .....
.....    .....    .....
..H.. -&gt; ...H. -&gt; ..TH.
.T...    .T...    .....
.....    .....    .....
</code></pre>
<p>You just need to work out where the tail goes as the head follows a series of motions. Assume the head and the tail both start at the same position, overlapping.</p>
<p>For example:</p>
<pre><code>R 4
U 4
L 3
D 1
R 4
D 1
L 5
R 2
</code></pre>
<p>This series of motions moves the head <em>right</em> four steps, then <em>up</em> four steps, then <em>left</em> three steps, then <em>down</em> one step, and so on. After each step, you'll need to update the position of the tail if the step means the head is no longer adjacent to the tail. Visually, these motions occur as follows (<code>s</code> marks the starting position as a reference point):</p>
<pre><code>== Initial State ==

......
......
......
......
H.....  (H covers T, s)

== R 4 ==

......
......
......
......
TH....  (T covers s)

......
......
......
......
sTH...

......
......
......
......
s.TH..

......
......
......
......
s..TH.

== U 4 ==

......
......
......
....H.
s..T..

......
......
....H.
....T.
s.....

......
....H.
....T.
......
s.....

....H.
....T.
......
......
s.....

== L 3 ==

...H..
....T.
......
......
s.....

..HT..
......
......
......
s.....

.HT...
......
......
......
s.....

== D 1 ==

..T...
.H....
......
......
s.....

== R 4 ==

..T...
..H...
......
......
s.....

..T...
...H..
......
......
s.....

......
...TH.
......
......
s.....

......
....TH
......
......
s.....

== D 1 ==

......
....T.
.....H
......
s.....

== L 5 ==

......
....T.
....H.
......
s.....

......
....T.
...H..
......
s.....

......
......
..HT..
......
s.....

......
......
.HT...
......
s.....

......
......
HT....
......
s.....

== R 2 ==

......
......
.H....  (H covers T)
......
s.....

......
......
.TH...
......
s.....
</code></pre>
<p>After simulating the rope, you can count up all of the positions the <em>tail visited at least once</em>. In this diagram, <code>s</code> again marks the starting position (which the tail also visited) and <code>#</code> marks other positions the tail visited:</p>
<pre><code>..##..
...##.
.####.
....#.
s###..
</code></pre>
<p>So, there are <code><em>13</em></code> positions the tail visited at least once.</p>
<p>Simulate your complete hypothetical series of motions. <em>How many positions does the tail of the rope visit at least once?</em></p>
</article><article class="day-desc"><h2 id="part2">--- Part Two ---</h2><p>A rope snaps! Suddenly, the river is getting a lot closer than you remember. The bridge is still there, but some of the ropes that broke are now whipping toward you as you fall through the air!</p>
<p>The ropes are moving too quickly to grab; you only have a few seconds to choose how to arch your body to avoid being hit. Fortunately, your simulation can be extended to support longer ropes.</p>
<p>Rather than two knots, you now must simulate a rope consisting of <em>ten</em> knots. One knot is still the head of the rope and moves according to the series of motions. Each knot further down the rope follows the knot in front of it using the same rules as before.</p>
<p>Using the same series of motions as the above example, but with the knots marked <code>H</code>, <code>1</code>, <code>2</code>, ..., <code>9</code>, the motions now occur as follows:</p>
<pre><code>== Initial State ==

......
......
......
......
H.....  (H covers 1, 2, 3, 4, 5, 6, 7, 8, 9, s)

== R 4 ==

......
......
......
......
1H....  (1 covers 2, 3, 4, 5, 6, 7, 8, 9, s)

......
......
......
......
21H...  (2 covers 3, 4, 5, 6, 7, 8, 9, s)

......
......
......
......
321H..  (3 covers 4, 5, 6, 7, 8, 9, s)

......
......
......
......
4321H.  (4 covers 5, 6, 7, 8, 9, s)

== U 4 ==

......
......
......
....H.
4321..  (4 covers 5, 6, 7, 8, 9, s)

......
......
....H.
.4321.
5.....  (5 covers 6, 7, 8, 9, s)

......
....H.
....1.
.432..
5.....  (5 covers 6, 7, 8, 9, s)

....H.
....1.
..432.
.5....
6.....  (6 covers 7, 8, 9, s)

== L 3 ==

...H..
....1.
..432.
.5....
6.....  (6 covers 7, 8, 9, s)

..H1..
...2..
..43..
.5....
6.....  (6 covers 7, 8, 9, s)

.H1...
...2..
..43..
.5....
6.....  (6 covers 7, 8, 9, s)

== D 1 ==

..1...
.H.2..
..43..
.5....
6.....  (6 covers 7, 8, 9, s)

== R 4 ==

..1...
..H2..
..43..
.5....
6.....  (6 covers 7, 8, 9, s)

..1...
...H..  (H covers 2)
..43..
.5....
6.....  (6 covers 7, 8, 9, s)

......
...1H.  (1 covers 2)
..43..
.5....
6.....  (6 covers 7, 8, 9, s)

......
...21H
..43..
.5....
6.....  (6 covers 7, 8, 9, s)

== D 1 ==

......
...21.
..43.H
.5....
6.....  (6 covers 7, 8, 9, s)

== L 5 ==

......
...21.
..43H.
.5....
6.....  (6 covers 7, 8, 9, s)

......
...21.
..4H..  (H covers 3)
.5....
6.....  (6 covers 7, 8, 9, s)

......
...2..
..H1..  (H covers 4; 1 covers 3)
.5....
6.....  (6 covers 7, 8, 9, s)

......
...2..
.H13..  (1 covers 4)
.5....
6.....  (6 covers 7, 8, 9, s)

......
......
H123..  (2 covers 4)
.5....
6.....  (6 covers 7, 8, 9, s)

== R 2 ==

......
......
.H23..  (H covers 1; 2 covers 4)
.5....
6.....  (6 covers 7, 8, 9, s)

......
......
.1H3..  (H covers 2, 4)
.5....
6.....  (6 covers 7, 8, 9, s)
</code></pre>
<p>Now, you need to keep track of the positions the new tail, <code>9</code>, visits. In this example, the tail never moves, and so it only visits <code><em>1</em></code> position. However, <em>be careful</em>: more types of motion are possible than before, so you might want to visually compare your simulated rope to the one above.</p>
<p>Here's a larger example:</p>
<pre><code>R 5
U 8
L 8
D 3
R 17
D 10
L 25
U 20
</code></pre>
<p>These motions occur as follows (individual steps are not shown):</p>
<pre><code>== Initial State ==

..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
...........H..............  (H covers 1, 2, 3, 4, 5, 6, 7, 8, 9, s)
..........................
..........................
..........................
..........................
..........................

== R 5 ==

..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
...........54321H.........  (5 covers 6, 7, 8, 9, s)
..........................
..........................
..........................
..........................
..........................

== U 8 ==

..........................
..........................
..........................
..........................
..........................
..........................
..........................
................H.........
................1.........
................2.........
................3.........
...............54.........
..............6...........
.............7............
............8.............
...........9..............  (9 covers s)
..........................
..........................
..........................
..........................
..........................

== L 8 ==

..........................
..........................
..........................
..........................
..........................
..........................
..........................
........H1234.............
............5.............
............6.............
............7.............
............8.............
............9.............
..........................
..........................
...........s..............
..........................
..........................
..........................
..........................
..........................

== D 3 ==

..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
.........2345.............
........1...6.............
........H...7.............
............8.............
............9.............
..........................
..........................
...........s..............
..........................
..........................
..........................
..........................
..........................

== R 17 ==

..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
................987654321H
..........................
..........................
..........................
..........................
...........s..............
..........................
..........................
..........................
..........................
..........................

== D 10 ==

..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
...........s.........98765
.........................4
.........................3
.........................2
.........................1
.........................H

== L 25 ==

..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
...........s..............
..........................
..........................
..........................
..........................
H123456789................

== U 20 ==

H.........................
1.........................
2.........................
3.........................
4.........................
5.........................
6.........................
7.........................
8.........................
9.........................
..........................
..........................
..........................
..........................
..........................
...........s..............
..........................
..........................
..........................
..........................
..........................

</code></pre>
<p>Now, the tail (<code>9</code>) visits <code><em>36</em></code> positions (including <code>s</code>) at least once:</p>
<pre><code>..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
#.........................
#.............###.........
#............#...#........
.#..........#.....#.......
..#..........#.....#......
...#........#.......#.....
....#......s.........#....
.....#..............#.....
......#............#......
.......#..........#.......
........#........#........
.........########.........
</code></pre>
<p>Simulate your complete series of motions on a larger rope with ten knots. <em>How many positions does the tail of the rope visit at least once?</em></p>
</article></div></div></div></div><div class="viewer viewer-html- w-full max-w-prose px-8"><div class="viewer-markdown"><h2 id="solution"><span>Solution</span></h2><p><span>From spotting trees to rope physics! Can&#x27;t see these problems are dull at</span><span> </span><span>least...</span></p><p><span>This one stumped me for a while too, doesn&#x27;t bode well for the rest</span><span> </span><span>of the week but c&#x27;est la vie. Onwards and upwards.</span></p><p><span>Today we&#x27;re tasked with tracing &quot;rope physics&quot;, given the head and the tail</span><span> </span><span>of a rope and certain rules; map out all the spots the rope has been. Those</span><span> </span><span>rules are defined as:</span></p><ul><li><span>The head and tail of the rope must always be touching (adjacent and overlapping count)</span></li><li><span>If the head is two steps away cardinally, the tail must move one step in that direction</span></li><li><span>If they&#x27;re not touching or in the same row/colum, the tail moves diagonally once to keep up</span></li></ul><p><span>That&#x27;s explained more with examples above, so let&#x27;s dive right into solving it.</span></p><p><span>First things first, let&#x27;s load our input and parse it</span></p><p><span>Given the list of movement commands </span><code><span>(&quot;R 4&quot; &quot;L 2&quot;)</span></code><span>, this is exactly the same</span><span> </span><span>as </span><code><span>(&quot;R&quot; &quot;R&quot; &quot;R&quot; &quot;R&quot; &quot;L&quot; &quot;L&quot;)</span></code><span>; so let&#x27;s transform the input to look like that</span><span> </span><span>to make things easier and let us easily handle the tail movement rules.</span></p></div></div><div class="viewer viewer-code w-full max-w-wide"><div class="cm-editor"><cm-scroller><div class="cm-content whitespace-pre"><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">(<span class="cmt-keyword">def</span> <span class="cmt-variableName">input</span> (<span class="cmt-keyword">-&gt;&gt;</span> (<span class="cmt-keyword">slurp</span> (<span class="cmt-keyword">io/resource</span> <span class="cmt-string">&quot;</span><span class="cmt-string">inputs/2022/day09.txt</span><span class="cmt-string">&quot;</span>))            <span class="cmt-comment">;; Load the resource</span></div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">                str/split-lines                                          <span class="cmt-comment">;; Split into lines</span></div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">                (<span class="cmt-keyword">mapcat</span> #(<span class="cmt-keyword">let</span> [[dir c] (<span class="cmt-keyword">str/split</span> % #<span class="cmt-string">&quot;</span><span class="cmt-string"> </span><span class="cmt-string">&quot;</span>)]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">                           (<span class="cmt-keyword">repeat</span> (<span class="cmt-keyword">parse-long</span> (<span class="cmt-keyword">str</span> c)) (<span class="cmt-keyword">str</span> dir))))))   <span class="cmt-comment">;; Spread commands out individually</span></div></div></cm-scroller></div></div><div class="viewer viewer-result w-full max-w-prose px-8"><div class="relative"><div class="overflow-y-hidden"><span class="inspected-value whitespace-nowrap"><span><span class="group hover:bg-indigo-100 rounded-sm hover:shadow cursor-pointer"><span class="text-slate-400 group-hover:text-indigo-700"><svg viewBox="0 0 100 100" class="w-[7px] h-[7px] fill-current inline-block transition-all mr-[1px] -mt-[2px] rotate-90"><polygon points="5.9,88.2 50,11.8 94.1,88.2 "></polygon></svg></span><span class="group-hover:text-indigo-700">(</span></span><span class="cmt-string inspected-value whitespace-nowrap inline-flex"><span><span>&quot;</span></span><div><span>D</span>&quot;</div></span> <span class="cmt-string inspected-value whitespace-nowrap inline-flex"><span><span>&quot;</span></span><div><span>D</span>&quot;</div></span> <span class="cmt-string inspected-value whitespace-nowrap inline-flex"><span><span>&quot;</span></span><div><span>R</span>&quot;</div></span> <span class="cmt-string inspected-value whitespace-nowrap inline-flex"><span><span>&quot;</span></span><div><span>R</span>&quot;</div></span> <span class="cmt-string inspected-value whitespace-nowrap inline-flex"><span><span>&quot;</span></span><div><span>D</span>&quot;</div></span> <span class="cmt-string inspected-value whitespace-nowrap inline-flex"><span><span>&quot;</span></span><div><span>U</span>&quot;</div></span> <span class="cmt-string inspected-value whitespace-nowrap inline-flex"><span><span>&quot;</span></span><div><span>L</span>&quot;</div></span> <span class="cmt-string inspected-value whitespace-nowrap inline-flex"><span><span>&quot;</span></span><div><span>L</span>&quot;</div></span> <span class="cmt-string inspected-value whitespace-nowrap inline-flex"><span><span>&quot;</span></span><div><span>U</span>&quot;</div></span> <span class="cmt-string inspected-value whitespace-nowrap inline-flex"><span><span>&quot;</span></span><div><span>U</span>&quot;</div></span> <span class="cmt-string inspected-value whitespace-nowrap inline-flex"><span><span>&quot;</span></span><div><span>D</span>&quot;</div></span> <span class="cmt-string inspected-value whitespace-nowrap inline-flex"><span><span>&quot;</span></span><div><span>R</span>&quot;</div></span> <span class="cmt-string inspected-value whitespace-nowrap inline-flex"><span><span>&quot;</span></span><div><span>R</span>&quot;</div></span> <span class="cmt-string inspected-value whitespace-nowrap inline-flex"><span><span>&quot;</span></span><div><span>U</span>&quot;</div></span> <span class="cmt-string inspected-value whitespace-nowrap inline-flex"><span><span>&quot;</span></span><div><span>U</span>&quot;</div></span> <span class="cmt-string inspected-value whitespace-nowrap inline-flex"><span><span>&quot;</span></span><div><span>R</span>&quot;</div></span> <span class="cmt-string inspected-value whitespace-nowrap inline-flex"><span><span>&quot;</span></span><div><span>R</span>&quot;</div></span> <span class="cmt-string inspected-value whitespace-nowrap inline-flex"><span><span>&quot;</span></span><div><span>L</span>&quot;</div></span> <span class="cmt-string inspected-value whitespace-nowrap inline-flex"><span><span>&quot;</span></span><div><span>D</span>&quot;</div></span> <span class="cmt-string inspected-value whitespace-nowrap inline-flex"><span><span>&quot;</span></span><div><span>D</span>&quot;</div></span> <span style="border-radius:2px;font-size:11px;top:-1px" class="sans-serif relative whitespace-nowrap text-gray-400 dark:text-slate-300">11327<!-- --> more elided</span><span>)</span></span></span></div></div></div><div class="viewer viewer-html- w-full max-w-prose px-8"><div class="viewer-markdown"><p><span>Smashing. Now we have a flat input, it&#x27;s just a case of reducing over it to</span><span> </span><span>advance the state.</span></p><p><span>Next we define a function to move the head of the rope. Since we have</span><span> </span><span>single-step movements now, we can just use </span><code><span>inc</span></code><span> and </span><code><span>dec</span></code><span>.</span></p></div></div><div class="viewer viewer-code w-full max-w-wide"><div class="cm-editor"><cm-scroller><div class="cm-content whitespace-pre"><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">(<span class="cmt-keyword">defn</span> <span class="cmt-variableName">move-head</span> [[x y] direction]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">  (<span class="cmt-keyword">condp</span> = direction</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">    <span class="cmt-string">&quot;</span><span class="cmt-string">R</span><span class="cmt-string">&quot;</span> [x (<span class="cmt-keyword">inc</span> y)]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">    <span class="cmt-string">&quot;</span><span class="cmt-string">U</span><span class="cmt-string">&quot;</span> [(<span class="cmt-keyword">dec</span> x) y]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">    <span class="cmt-string">&quot;</span><span class="cmt-string">L</span><span class="cmt-string">&quot;</span> [x (<span class="cmt-keyword">dec</span> y)]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">    <span class="cmt-string">&quot;</span><span class="cmt-string">D</span><span class="cmt-string">&quot;</span> [(<span class="cmt-keyword">inc</span> x) y]))</div></div></cm-scroller></div></div><div class="viewer viewer-html- w-full max-w-prose px-8"><div class="viewer-markdown"><p><span>Then we have a function to mvoe the tail of the rope.</span></p><p><span>This handles all our rules, ensuring that the tail is always at least next to</span><span> </span><span>the head by updating the co-ordinate using </span><code><span>clojure.math/signum</span></code><span> to return</span><span> </span><span>the sign of the change (new in 1.11).</span></p></div></div><div class="viewer viewer-code w-full max-w-wide"><div class="cm-editor"><cm-scroller><div class="cm-content whitespace-pre"><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">(<span class="cmt-keyword">defn</span> <span class="cmt-variableName">move-tail</span> [[head-x head-y] [tail-x tail-y]]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">  (<span class="cmt-keyword">let</span> [dx (<span class="cmt-keyword">-</span> head-x tail-x)</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">        dy (<span class="cmt-keyword">-</span> head-y tail-y)]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">    (<span class="cmt-keyword">if</span> (<span class="cmt-keyword">and</span> (<span class="cmt-keyword">&lt;</span> (<span class="cmt-keyword">abs</span> dx) <span class="cmt-literal">2</span>)</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">             (<span class="cmt-keyword">&lt;</span> (<span class="cmt-keyword">abs</span> dy) <span class="cmt-literal">2</span>))</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">      [tail-x tail-y]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">      [(<span class="cmt-keyword">+</span> tail-x (<span class="cmt-keyword">math/signum</span> dx)) (<span class="cmt-keyword">+</span> tail-y (<span class="cmt-keyword">math/signum</span> dy))])))</div></div></cm-scroller></div></div><div class="viewer viewer-html- w-full max-w-prose px-8"><div class="viewer-markdown"><p><span>Next we have a function to perform a movement command given a rope vector</span><span> </span><span>(more on that in the next function) and a single-step movement command.</span></p><p><span>We loop over the rope vector and update the vector based on how far through</span><span> </span><span>it we are. The first element is the head, and once we reach the end we can</span><span> </span><span>return the new vector.</span></p></div></div><div class="viewer viewer-code w-full max-w-wide"><div class="cm-editor"><cm-scroller><div class="cm-content whitespace-pre"><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">(<span class="cmt-keyword">defn</span> <span class="cmt-variableName">move</span> [rope-vec direction]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">  (<span class="cmt-keyword">loop</span> [ropes rope-vec</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">         index <span class="cmt-literal">0</span>]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">    (<span class="cmt-keyword">let</span> [next-pos (<span class="cmt-keyword">inc</span> index)]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">      (<span class="cmt-keyword">cond</span></div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">        (<span class="cmt-keyword">=</span> index (<span class="cmt-keyword">count</span> rope-vec)) ropes</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">        (<span class="cmt-keyword">=</span> index <span class="cmt-literal">0</span>) (<span class="cmt-keyword">recur</span> (<span class="cmt-keyword">assoc</span> ropes index (<span class="cmt-keyword">move-head</span> (<span class="cmt-keyword">ropes</span> index) direction)) next-pos)</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">        <span class="cmt-atom">:else</span> (<span class="cmt-keyword">recur</span> (<span class="cmt-keyword">assoc</span> ropes index (<span class="cmt-keyword">move-tail</span> (<span class="cmt-keyword">ropes</span> (<span class="cmt-keyword">dec</span> index)) (<span class="cmt-keyword">ropes</span> index))) next-pos)))))</div></div></cm-scroller></div></div><div class="viewer viewer-html- w-full max-w-prose px-8"><div class="viewer-markdown"><p><span>Lastly we have a general solution for both parts, since they share a common</span><span> </span><em><span>thread</span></em><span> (I&#x27;m here all week) in that part 1 has 2 knots and part 2 has 10</span><span> </span><span>knots, so we can abstract the implementation to use a vector instead and act</span><span> </span><span>accordingly.</span></p><p><span>So we take the length of the vector and the movement commands, and iterate</span><span> </span><span>through the commands until none are left. We use a set for </span><code><span>past-tails</span></code><span> so we</span><span> </span><span>don&#x27;t have to worry about handling duplicates later.</span></p></div></div><div class="viewer viewer-code w-full max-w-wide"><div class="cm-editor"><cm-scroller><div class="cm-content whitespace-pre"><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">(<span class="cmt-keyword">defn</span> <span class="cmt-variableName">move-length</span> [length input]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">  (<span class="cmt-keyword">loop</span> [rope-vec (<span class="cmt-keyword">vec</span> (<span class="cmt-keyword">repeat</span> length [<span class="cmt-literal">0</span> <span class="cmt-literal">0</span>]))</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">         past-tails #{}</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">         cmds input]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">    (<span class="cmt-keyword">let</span> [tails (<span class="cmt-keyword">conj</span> past-tails (<span class="cmt-keyword">last</span> rope-vec))</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">          [cmd &amp; rst] cmds]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">      (<span class="cmt-keyword">if</span> (<span class="cmt-keyword">empty?</span> cmds)</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">        (<span class="cmt-keyword">count</span> tails)</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">        (<span class="cmt-keyword">recur</span> (<span class="cmt-keyword">move</span> rope-vec cmd) tails rst)))))</div></div></cm-scroller></div></div><div class="viewer viewer-html- w-full max-w-prose px-8"><div class="viewer-markdown"><p><span>As above, part 1 is just 2 knots</span></p></div></div><div class="viewer viewer-code w-full max-w-wide"><div class="cm-editor"><cm-scroller><div class="cm-content whitespace-pre"><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">(<span class="cmt-keyword">defn</span> <span class="cmt-variableName">part-1</span></div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">  [input]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">  (<span class="cmt-keyword">move-length</span> <span class="cmt-literal">2</span> input))</div></div></cm-scroller></div></div><div class="viewer viewer-html- w-full max-w-prose px-8"><div class="viewer-markdown"><p><span>Which gives our answer</span></p></div></div><div class="viewer viewer-result w-full max-w-prose px-8"><div class="relative"><div class="overflow-y-hidden"><span class="cmt-number inspected-value">5930</span></div></div></div><div class="viewer viewer-html- w-full max-w-prose px-8"><div class="viewer-markdown"><p><span>And part 2 is </span><em><span>10</span></em><span> knots</span></p></div></div><div class="viewer viewer-code w-full max-w-wide"><div class="cm-editor"><cm-scroller><div class="cm-content whitespace-pre"><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">(<span class="cmt-keyword">defn</span> <span class="cmt-variableName">part-2</span></div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">  [input]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">  (<span class="cmt-keyword">move-length</span> <span class="cmt-literal">10</span> input))</div></div></cm-scroller></div></div><div class="viewer viewer-html- w-full max-w-prose px-8"><div class="viewer-markdown"><p><span>Which gives our answer</span></p></div></div><div class="viewer viewer-result w-full max-w-prose px-8"><div class="relative"><div class="overflow-y-hidden"><span class="cmt-number inspected-value">2443</span></div></div></div></div></div></div></div></div>
</div><script type="module">let viewer = nextjournal.clerk.sci_env
let app = nextjournal.clerk.static_app
let opts = viewer.read_string("{:paths-fn index/build-paths, :out-path \"public/build\", :path->doc {\"src/solutions/2022/day09.clj\" {:path [], :nextjournal/value {:toc {:type :toc, :children [{:children [{:type :toc, :content [{:type :text, :text \"Solution\"}], :heading-level 2}], :type :toc}]}, :toc-visibility false, :atom-var-name->state #viewer-eval (nextjournal.clerk.render/intern-atoms! {}), :auto-expand-results? nil, :scope {:namespace :solutions.2022.day09}, :open-graph {:type \"article:clerk\", :title \"Solution\", :description \"From spotting trees to rope physics! Can't see these problems are dull atleast...\"}, :title \"Solution\", :blocks [{:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [:style \"em{font-style: normal;}\\nhtml:not(.dark) pre{background-color: #f1f5f9 !important;color: #7aaac4 !important;}\\n.dark em{color: #fff;text-shadow: 0 0 5px #fff;}\\n.dark pre {background-color: rgb(31 41 55 / var(--tw-bg-opacity)) !important;}\\nhtml:not(.dark) em{color: #000; text-shadow: 0 0 2px #000;}\\n.viewer-result:first-child{display: none;}\"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}}, :nextjournal/viewer {:name :clerk/result, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5drtBjvRGKwhUFrDTtWvTAduWDETV1\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [:div {:dangerouslySetInnerHTML {:__html \"<article class=\\\"day-desc\\\"><h2>--- Day 9: Rope Bridge ---</h2><p>This rope bridge creaks as you walk along it. You aren't sure how old it is, or whether it can even support your weight.</p>\\n<p>It seems to support the Elves just fine, though. The bridge spans a gorge which was carved out by the massive river far below you.</p>\\n<p>You step carefully; as you do, the ropes stretch and twist. You decide to distract yourself by modeling rope physics; maybe you can even figure out where <em>not</em> to step.</p>\\n<p>Consider a rope with a knot at each end; these knots mark the <em>head</em> and the <em>tail</em> of the rope. If the head moves far enough away from the tail, the tail is pulled toward the head.</p>\\n<p>Due to nebulous reasoning involving <a href=\\\"https://en.wikipedia.org/wiki/Planck_units#Planck_length\\\" target=\\\"_blank\\\">Planck lengths</a>, you should be able to model the positions of the knots on a two-dimensional grid. Then, by following a hypothetical <em>series of motions</em> (your puzzle input) for the head, you can determine how the tail will move.</p>\\n<p><span title=\\\"I'm an engineer, not a physicist!\\\">Due to the aforementioned Planck lengths</span>, the rope must be quite short; in fact, the head (<code>H</code>) and tail (<code>T</code>) must <em>always be touching</em> (diagonally adjacent and even overlapping both count as touching):</p>\\n<pre><code>....\\n.TH.\\n....\\n\\n....\\n.H..\\n..T.\\n....\\n\\n...\\n.H. (H covers T)\\n...\\n</code></pre>\\n<p>If the head is ever two steps directly up, down, left, or right from the tail, the tail must also move one step in that direction so it remains close enough:</p>\\n<pre><code>.....    .....    .....\\n.TH.. -&gt; .T.H. -&gt; ..TH.\\n.....    .....    .....\\n\\n...    ...    ...\\n.T.    .T.    ...\\n.H. -&gt; ... -&gt; .T.\\n...    .H.    .H.\\n...    ...    ...\\n</code></pre>\\n<p>Otherwise, if the head and tail aren't touching and aren't in the same row or column, the tail always moves one step diagonally to keep up:</p>\\n<pre><code>.....    .....    .....\\n.....    ..H..    ..H..\\n..H.. -&gt; ..... -&gt; ..T..\\n.T...    .T...    .....\\n.....    .....    .....\\n\\n.....    .....    .....\\n.....    .....    .....\\n..H.. -&gt; ...H. -&gt; ..TH.\\n.T...    .T...    .....\\n.....    .....    .....\\n</code></pre>\\n<p>You just need to work out where the tail goes as the head follows a series of motions. Assume the head and the tail both start at the same position, overlapping.</p>\\n<p>For example:</p>\\n<pre><code>R 4\\nU 4\\nL 3\\nD 1\\nR 4\\nD 1\\nL 5\\nR 2\\n</code></pre>\\n<p>This series of motions moves the head <em>right</em> four steps, then <em>up</em> four steps, then <em>left</em> three steps, then <em>down</em> one step, and so on. After each step, you'll need to update the position of the tail if the step means the head is no longer adjacent to the tail. Visually, these motions occur as follows (<code>s</code> marks the starting position as a reference point):</p>\\n<pre><code>== Initial State ==\\n\\n......\\n......\\n......\\n......\\nH.....  (H covers T, s)\\n\\n== R 4 ==\\n\\n......\\n......\\n......\\n......\\nTH....  (T covers s)\\n\\n......\\n......\\n......\\n......\\nsTH...\\n\\n......\\n......\\n......\\n......\\ns.TH..\\n\\n......\\n......\\n......\\n......\\ns..TH.\\n\\n== U 4 ==\\n\\n......\\n......\\n......\\n....H.\\ns..T..\\n\\n......\\n......\\n....H.\\n....T.\\ns.....\\n\\n......\\n....H.\\n....T.\\n......\\ns.....\\n\\n....H.\\n....T.\\n......\\n......\\ns.....\\n\\n== L 3 ==\\n\\n...H..\\n....T.\\n......\\n......\\ns.....\\n\\n..HT..\\n......\\n......\\n......\\ns.....\\n\\n.HT...\\n......\\n......\\n......\\ns.....\\n\\n== D 1 ==\\n\\n..T...\\n.H....\\n......\\n......\\ns.....\\n\\n== R 4 ==\\n\\n..T...\\n..H...\\n......\\n......\\ns.....\\n\\n..T...\\n...H..\\n......\\n......\\ns.....\\n\\n......\\n...TH.\\n......\\n......\\ns.....\\n\\n......\\n....TH\\n......\\n......\\ns.....\\n\\n== D 1 ==\\n\\n......\\n....T.\\n.....H\\n......\\ns.....\\n\\n== L 5 ==\\n\\n......\\n....T.\\n....H.\\n......\\ns.....\\n\\n......\\n....T.\\n...H..\\n......\\ns.....\\n\\n......\\n......\\n..HT..\\n......\\ns.....\\n\\n......\\n......\\n.HT...\\n......\\ns.....\\n\\n......\\n......\\nHT....\\n......\\ns.....\\n\\n== R 2 ==\\n\\n......\\n......\\n.H....  (H covers T)\\n......\\ns.....\\n\\n......\\n......\\n.TH...\\n......\\ns.....\\n</code></pre>\\n<p>After simulating the rope, you can count up all of the positions the <em>tail visited at least once</em>. In this diagram, <code>s</code> again marks the starting position (which the tail also visited) and <code>#</code> marks other positions the tail visited:</p>\\n<pre><code>..##..\\n...##.\\n.####.\\n....#.\\ns###..\\n</code></pre>\\n<p>So, there are <code><em>13</em></code> positions the tail visited at least once.</p>\\n<p>Simulate your complete hypothetical series of motions. <em>How many positions does the tail of the rope visit at least once?</em></p>\\n</article><article class=\\\"day-desc\\\"><h2 id=\\\"part2\\\">--- Part Two ---</h2><p>A rope snaps! Suddenly, the river is getting a lot closer than you remember. The bridge is still there, but some of the ropes that broke are now whipping toward you as you fall through the air!</p>\\n<p>The ropes are moving too quickly to grab; you only have a few seconds to choose how to arch your body to avoid being hit. Fortunately, your simulation can be extended to support longer ropes.</p>\\n<p>Rather than two knots, you now must simulate a rope consisting of <em>ten</em> knots. One knot is still the head of the rope and moves according to the series of motions. Each knot further down the rope follows the knot in front of it using the same rules as before.</p>\\n<p>Using the same series of motions as the above example, but with the knots marked <code>H</code>, <code>1</code>, <code>2</code>, ..., <code>9</code>, the motions now occur as follows:</p>\\n<pre><code>== Initial State ==\\n\\n......\\n......\\n......\\n......\\nH.....  (H covers 1, 2, 3, 4, 5, 6, 7, 8, 9, s)\\n\\n== R 4 ==\\n\\n......\\n......\\n......\\n......\\n1H....  (1 covers 2, 3, 4, 5, 6, 7, 8, 9, s)\\n\\n......\\n......\\n......\\n......\\n21H...  (2 covers 3, 4, 5, 6, 7, 8, 9, s)\\n\\n......\\n......\\n......\\n......\\n321H..  (3 covers 4, 5, 6, 7, 8, 9, s)\\n\\n......\\n......\\n......\\n......\\n4321H.  (4 covers 5, 6, 7, 8, 9, s)\\n\\n== U 4 ==\\n\\n......\\n......\\n......\\n....H.\\n4321..  (4 covers 5, 6, 7, 8, 9, s)\\n\\n......\\n......\\n....H.\\n.4321.\\n5.....  (5 covers 6, 7, 8, 9, s)\\n\\n......\\n....H.\\n....1.\\n.432..\\n5.....  (5 covers 6, 7, 8, 9, s)\\n\\n....H.\\n....1.\\n..432.\\n.5....\\n6.....  (6 covers 7, 8, 9, s)\\n\\n== L 3 ==\\n\\n...H..\\n....1.\\n..432.\\n.5....\\n6.....  (6 covers 7, 8, 9, s)\\n\\n..H1..\\n...2..\\n..43..\\n.5....\\n6.....  (6 covers 7, 8, 9, s)\\n\\n.H1...\\n...2..\\n..43..\\n.5....\\n6.....  (6 covers 7, 8, 9, s)\\n\\n== D 1 ==\\n\\n..1...\\n.H.2..\\n..43..\\n.5....\\n6.....  (6 covers 7, 8, 9, s)\\n\\n== R 4 ==\\n\\n..1...\\n..H2..\\n..43..\\n.5....\\n6.....  (6 covers 7, 8, 9, s)\\n\\n..1...\\n...H..  (H covers 2)\\n..43..\\n.5....\\n6.....  (6 covers 7, 8, 9, s)\\n\\n......\\n...1H.  (1 covers 2)\\n..43..\\n.5....\\n6.....  (6 covers 7, 8, 9, s)\\n\\n......\\n...21H\\n..43..\\n.5....\\n6.....  (6 covers 7, 8, 9, s)\\n\\n== D 1 ==\\n\\n......\\n...21.\\n..43.H\\n.5....\\n6.....  (6 covers 7, 8, 9, s)\\n\\n== L 5 ==\\n\\n......\\n...21.\\n..43H.\\n.5....\\n6.....  (6 covers 7, 8, 9, s)\\n\\n......\\n...21.\\n..4H..  (H covers 3)\\n.5....\\n6.....  (6 covers 7, 8, 9, s)\\n\\n......\\n...2..\\n..H1..  (H covers 4; 1 covers 3)\\n.5....\\n6.....  (6 covers 7, 8, 9, s)\\n\\n......\\n...2..\\n.H13..  (1 covers 4)\\n.5....\\n6.....  (6 covers 7, 8, 9, s)\\n\\n......\\n......\\nH123..  (2 covers 4)\\n.5....\\n6.....  (6 covers 7, 8, 9, s)\\n\\n== R 2 ==\\n\\n......\\n......\\n.H23..  (H covers 1; 2 covers 4)\\n.5....\\n6.....  (6 covers 7, 8, 9, s)\\n\\n......\\n......\\n.1H3..  (H covers 2, 4)\\n.5....\\n6.....  (6 covers 7, 8, 9, s)\\n</code></pre>\\n<p>Now, you need to keep track of the positions the new tail, <code>9</code>, visits. In this example, the tail never moves, and so it only visits <code><em>1</em></code> position. However, <em>be careful</em>: more types of motion are possible than before, so you might want to visually compare your simulated rope to the one above.</p>\\n<p>Here's a larger example:</p>\\n<pre><code>R 5\\nU 8\\nL 8\\nD 3\\nR 17\\nD 10\\nL 25\\nU 20\\n</code></pre>\\n<p>These motions occur as follows (individual steps are not shown):</p>\\n<pre><code>== Initial State ==\\n\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n...........H..............  (H covers 1, 2, 3, 4, 5, 6, 7, 8, 9, s)\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n\\n== R 5 ==\\n\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n...........54321H.........  (5 covers 6, 7, 8, 9, s)\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n\\n== U 8 ==\\n\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n................H.........\\n................1.........\\n................2.........\\n................3.........\\n...............54.........\\n..............6...........\\n.............7............\\n............8.............\\n...........9..............  (9 covers s)\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n\\n== L 8 ==\\n\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n........H1234.............\\n............5.............\\n............6.............\\n............7.............\\n............8.............\\n............9.............\\n..........................\\n..........................\\n...........s..............\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n\\n== D 3 ==\\n\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n.........2345.............\\n........1...6.............\\n........H...7.............\\n............8.............\\n............9.............\\n..........................\\n..........................\\n...........s..............\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n\\n== R 17 ==\\n\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n................987654321H\\n..........................\\n..........................\\n..........................\\n..........................\\n...........s..............\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n\\n== D 10 ==\\n\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n...........s.........98765\\n.........................4\\n.........................3\\n.........................2\\n.........................1\\n.........................H\\n\\n== L 25 ==\\n\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n...........s..............\\n..........................\\n..........................\\n..........................\\n..........................\\nH123456789................\\n\\n== U 20 ==\\n\\nH.........................\\n1.........................\\n2.........................\\n3.........................\\n4.........................\\n5.........................\\n6.........................\\n7.........................\\n8.........................\\n9.........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n...........s..............\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n\\n</code></pre>\\n<p>Now, the tail (<code>9</code>) visits <code><em>36</em></code> positions (including <code>s</code>) at least once:</p>\\n<pre><code>..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n#.........................\\n#.............###.........\\n#............#...#........\\n.#..........#.....#.......\\n..#..........#.....#......\\n...#........#.......#.....\\n....#......s.........#....\\n.....#..............#.....\\n......#............#......\\n.......#..........#.......\\n........#........#........\\n.........########.........\\n</code></pre>\\n<p>Simulate your complete series of motions on a larger rope with ten knots. <em>How many positions does the tail of the rope visit at least once?</em></p>\\n</article>\"}}], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}}, :nextjournal/viewer {:name :clerk/result, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5drtBjvRGKwhUFrDTtWvTAduWDETV1\"}} {:nextjournal/value [:div.viewer-markdown [\"h2\" {:id \"solution\"} [:span \"Solution\"]] [:p [:span \"From spotting trees to rope physics! Can't see these problems are dull at\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:span \" \"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:span \"least...\"]] [:p [:span \"This one stumped me for a while too, doesn't bode well for the rest\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:span \" \"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:span \"of the week but c'est la vie. Onwards and upwards.\"]] [:p [:span \"Today we're tasked with tracing \\\"rope physics\\\", given the head and the tail\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:span \" \"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:span \"of a rope and certain rules; map out all the spots the rope has been. Those\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:span \" \"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:span \"rules are defined as:\"]] [:ul [:li [:<> [:span \"The head and tail of the rope must always be touching (adjacent and overlapping count)\"]]] [:li [:<> [:span \"If the head is two steps away cardinally, the tail must move one step in that direction\"]]] [:li [:<> [:span \"If they're not touching or in the same row/colum, the tail moves diagonally once to keep up\"]]]] [:p [:span \"That's explained more with examples above, so let's dive right into solving it.\"]] [:p [:span \"First things first, let's load our input and parse it\"]] [:p [:span \"Given the list of movement commands \"] [:code [:span \"(\\\"R 4\\\" \\\"L 2\\\")\"]] [:span \", this is exactly the same\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:span \" \"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:span \"as \"] [:code [:span \"(\\\"R\\\" \\\"R\\\" \\\"R\\\" \\\"R\\\" \\\"L\\\" \\\"L\\\")\"]] [:span \"; so let's transform the input to look like that\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:span \" \"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:span \"to make things easier and let us easily handle the tail movement rules.\"]]], :nextjournal/viewer {:name :html-, :render-fn #viewer-fn identity, :hash \"5dsKyVZX2dPvsyoeg6dNrfeuqAh5UK\"}} {:nextjournal/value \"(def input (->> (slurp (io/resource \\\"inputs/2022/day09.txt\\\"))            ;; Load the resource\\n                str/split-lines                                          ;; Split into lines\\n                (mapcat #(let [[dir c] (str/split % #\\\" \\\")]\\n                           (repeat (parse-long (str c)) (str dir))))))   ;; Spread commands out individually\", :nextjournal/opts {:loc {:line 41, :column 1}}, :nextjournal/viewer {:name :code, :render-fn #viewer-fn nextjournal.clerk.render/render-code, :hash \"5duGVW4Xoi1QoW73J5wMRghqm9uVoW\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [{:path [0], :nextjournal/value \"D\", :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :page-size 80, :hash \"5dse5Ct9rn8Wi7jg1guHtZm9K3Hku6\"}} {:path [1], :nextjournal/value \"D\", :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :page-size 80, :hash \"5dse5Ct9rn8Wi7jg1guHtZm9K3Hku6\"}} {:path [2], :nextjournal/value \"R\", :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :page-size 80, :hash \"5dse5Ct9rn8Wi7jg1guHtZm9K3Hku6\"}} {:path [3], :nextjournal/value \"R\", :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :page-size 80, :hash \"5dse5Ct9rn8Wi7jg1guHtZm9K3Hku6\"}} {:path [4], :nextjournal/value \"D\", :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :page-size 80, :hash \"5dse5Ct9rn8Wi7jg1guHtZm9K3Hku6\"}} {:path [5], :nextjournal/value \"U\", :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :page-size 80, :hash \"5dse5Ct9rn8Wi7jg1guHtZm9K3Hku6\"}} {:path [6], :nextjournal/value \"L\", :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :page-size 80, :hash \"5dse5Ct9rn8Wi7jg1guHtZm9K3Hku6\"}} {:path [7], :nextjournal/value \"L\", :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :page-size 80, :hash \"5dse5Ct9rn8Wi7jg1guHtZm9K3Hku6\"}} {:path [8], :nextjournal/value \"U\", :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :page-size 80, :hash \"5dse5Ct9rn8Wi7jg1guHtZm9K3Hku6\"}} {:path [9], :nextjournal/value \"U\", :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :page-size 80, :hash \"5dse5Ct9rn8Wi7jg1guHtZm9K3Hku6\"}} {:path [10], :nextjournal/value \"D\", :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :page-size 80, :hash \"5dse5Ct9rn8Wi7jg1guHtZm9K3Hku6\"}} {:path [11], :nextjournal/value \"R\", :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :page-size 80, :hash \"5dse5Ct9rn8Wi7jg1guHtZm9K3Hku6\"}} {:path [12], :nextjournal/value \"R\", :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :page-size 80, :hash \"5dse5Ct9rn8Wi7jg1guHtZm9K3Hku6\"}} {:path [13], :nextjournal/value \"U\", :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :page-size 80, :hash \"5dse5Ct9rn8Wi7jg1guHtZm9K3Hku6\"}} {:path [14], :nextjournal/value \"U\", :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :page-size 80, :hash \"5dse5Ct9rn8Wi7jg1guHtZm9K3Hku6\"}} {:path [15], :nextjournal/value \"R\", :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :page-size 80, :hash \"5dse5Ct9rn8Wi7jg1guHtZm9K3Hku6\"}} {:path [16], :nextjournal/value \"R\", :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :page-size 80, :hash \"5dse5Ct9rn8Wi7jg1guHtZm9K3Hku6\"}} {:path [17], :nextjournal/value \"L\", :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :page-size 80, :hash \"5dse5Ct9rn8Wi7jg1guHtZm9K3Hku6\"}} {:path [18], :nextjournal/value \"D\", :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :page-size 80, :hash \"5dse5Ct9rn8Wi7jg1guHtZm9K3Hku6\"}} {:path [19], :nextjournal/value \"D\", :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :page-size 80, :hash \"5dse5Ct9rn8Wi7jg1guHtZm9K3Hku6\"}} {:nextjournal/value {:n 20, :path [], :total 11347, :offset 20}, :nextjournal/viewer {:name :elision, :render-fn #viewer-fn nextjournal.clerk.render/render-elision, :hash \"5drk4yq8KWf74KRukbDnW8K5fMwe1P\"}}], :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-coll, :opening-paren \"(\", :closing-paren (\")\"), :page-size 20, :hash \"5drCaZg3GZ5pGiaCNpMq9dEBvceFbm\"}}}, :nextjournal/viewer {:name :clerk/result, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5drtBjvRGKwhUFrDTtWvTAduWDETV1\"}} {:nextjournal/value [:div.viewer-markdown [:p [:span \"Smashing. Now we have a flat input, it's just a case of reducing over it to\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:span \" \"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:span \"advance the state.\"]] [:p [:span \"Next we define a function to move the head of the rope. Since we have\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:span \" \"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:span \"single-step movements now, we can just use \"] [:code [:span \"inc\"]] [:span \" and \"] [:code [:span \"dec\"]] [:span \".\"]]], :nextjournal/viewer {:name :html-, :render-fn #viewer-fn identity, :hash \"5dsKyVZX2dPvsyoeg6dNrfeuqAh5UK\"}} {:nextjournal/value \"(defn move-head [[x y] direction]\\n  (condp = direction\\n    \\\"R\\\" [x (inc y)]\\n    \\\"U\\\" [(dec x) y]\\n    \\\"L\\\" [x (dec y)]\\n    \\\"D\\\" [(inc x) y]))\", :nextjournal/opts {:loc {:line 52, :column 1}}, :nextjournal/viewer {:name :code, :render-fn #viewer-fn nextjournal.clerk.render/render-code, :hash \"5duGVW4Xoi1QoW73J5wMRghqm9uVoW\"}} {:nextjournal/value [:div.viewer-markdown [:p [:span \"Then we have a function to mvoe the tail of the rope.\"]] [:p [:span \"This handles all our rules, ensuring that the tail is always at least next to\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:span \" \"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:span \"the head by updating the co-ordinate using \"] [:code [:span \"clojure.math/signum\"]] [:span \" to return\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:span \" \"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:span \"the sign of the change (new in 1.11).\"]]], :nextjournal/viewer {:name :html-, :render-fn #viewer-fn identity, :hash \"5dsKyVZX2dPvsyoeg6dNrfeuqAh5UK\"}} {:nextjournal/value \"(defn move-tail [[head-x head-y] [tail-x tail-y]]\\n  (let [dx (- head-x tail-x)\\n        dy (- head-y tail-y)]\\n    (if (and (< (abs dx) 2)\\n             (< (abs dy) 2))\\n      [tail-x tail-y]\\n      [(+ tail-x (math/signum dx)) (+ tail-y (math/signum dy))])))\", :nextjournal/opts {:loc {:line 65, :column 1}}, :nextjournal/viewer {:name :code, :render-fn #viewer-fn nextjournal.clerk.render/render-code, :hash \"5duGVW4Xoi1QoW73J5wMRghqm9uVoW\"}} {:nextjournal/value [:div.viewer-markdown [:p [:span \"Next we have a function to perform a movement command given a rope vector\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:span \" \"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:span \"(more on that in the next function) and a single-step movement command.\"]] [:p [:span \"We loop over the rope vector and update the vector based on how far through\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:span \" \"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:span \"it we are. The first element is the head, and once we reach the end we can\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:span \" \"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:span \"return the new vector.\"]]], :nextjournal/viewer {:name :html-, :render-fn #viewer-fn identity, :hash \"5dsKyVZX2dPvsyoeg6dNrfeuqAh5UK\"}} {:nextjournal/value \"(defn move [rope-vec direction]\\n  (loop [ropes rope-vec\\n         index 0]\\n    (let [next-pos (inc index)]\\n      (cond\\n        (= index (count rope-vec)) ropes\\n        (= index 0) (recur (assoc ropes index (move-head (ropes index) direction)) next-pos)\\n        :else (recur (assoc ropes index (move-tail (ropes (dec index)) (ropes index))) next-pos)))))\", :nextjournal/opts {:loc {:line 80, :column 1}}, :nextjournal/viewer {:name :code, :render-fn #viewer-fn nextjournal.clerk.render/render-code, :hash \"5duGVW4Xoi1QoW73J5wMRghqm9uVoW\"}} {:nextjournal/value [:div.viewer-markdown [:p [:span \"Lastly we have a general solution for both parts, since they share a common\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:span \" \"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:em [:span \"thread\"]] [:span \" (I'm here all week) in that part 1 has 2 knots and part 2 has 10\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:span \" \"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:span \"knots, so we can abstract the implementation to use a vector instead and act\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:span \" \"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:span \"accordingly.\"]] [:p [:span \"So we take the length of the vector and the movement commands, and iterate\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:span \" \"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:span \"through the commands until none are left. We use a set for \"] [:code [:span \"past-tails\"]] [:span \" so we\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:span \" \"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:span \"don't have to worry about handling duplicates later.\"]]], :nextjournal/viewer {:name :html-, :render-fn #viewer-fn identity, :hash \"5dsKyVZX2dPvsyoeg6dNrfeuqAh5UK\"}} {:nextjournal/value \"(defn move-length [length input]\\n  (loop [rope-vec (vec (repeat length [0 0]))\\n         past-tails #{}\\n         cmds input]\\n    (let [tails (conj past-tails (last rope-vec))\\n          [cmd & rst] cmds]\\n      (if (empty? cmds)\\n        (count tails)\\n        (recur (move rope-vec cmd) tails rst)))))\", :nextjournal/opts {:loc {:line 98, :column 1}}, :nextjournal/viewer {:name :code, :render-fn #viewer-fn nextjournal.clerk.render/render-code, :hash \"5duGVW4Xoi1QoW73J5wMRghqm9uVoW\"}} {:nextjournal/value [:div.viewer-markdown [:p [:span \"As above, part 1 is just 2 knots\"]]], :nextjournal/viewer {:name :html-, :render-fn #viewer-fn identity, :hash \"5dsKyVZX2dPvsyoeg6dNrfeuqAh5UK\"}} {:nextjournal/value \"(defn part-1\\n  [input]\\n  (move-length 2 input))\", :nextjournal/opts {:loc {:line 110, :column 1}}, :nextjournal/viewer {:name :code, :render-fn #viewer-fn nextjournal.clerk.render/render-code, :hash \"5duGVW4Xoi1QoW73J5wMRghqm9uVoW\"}} {:nextjournal/value [:div.viewer-markdown [:p [:span \"Which gives our answer\"]]], :nextjournal/viewer {:name :html-, :render-fn #viewer-fn identity, :hash \"5dsKyVZX2dPvsyoeg6dNrfeuqAh5UK\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value 5930, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5dr5kWRtr7mCj9ikbmX2S4HCkE4Xxt\"}}}, :nextjournal/viewer {:name :clerk/result, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5drtBjvRGKwhUFrDTtWvTAduWDETV1\"}} {:nextjournal/value [:div.viewer-markdown [:p [:span \"And part 2 is \"] [:em [:span \"10\"]] [:span \" knots\"]]], :nextjournal/viewer {:name :html-, :render-fn #viewer-fn identity, :hash \"5dsKyVZX2dPvsyoeg6dNrfeuqAh5UK\"}} {:nextjournal/value \"(defn part-2\\n  [input]\\n  (move-length 10 input))\", :nextjournal/opts {:loc {:line 120, :column 1}}, :nextjournal/viewer {:name :code, :render-fn #viewer-fn nextjournal.clerk.render/render-code, :hash \"5duGVW4Xoi1QoW73J5wMRghqm9uVoW\"}} {:nextjournal/value [:div.viewer-markdown [:p [:span \"Which gives our answer\"]]], :nextjournal/viewer {:name :html-, :render-fn #viewer-fn identity, :hash \"5dsKyVZX2dPvsyoeg6dNrfeuqAh5UK\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value 2443, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5dr5kWRtr7mCj9ikbmX2S4HCkE4Xxt\"}}}, :nextjournal/viewer {:name :clerk/result, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5drtBjvRGKwhUFrDTtWvTAduWDETV1\"}}], :css-class nil}, :nextjournal/viewer {:name :clerk/notebook, :render-fn #viewer-fn nextjournal.clerk.render/render-notebook, :hash \"5dt1qwFEn2BQwdEM84VqwY4LR6p4YV\"}}}, :index \"src/index.clj\", :browse? false, :ssr? true, :paths [\"src/solutions/2022/day03.clj\" \"src/solutions/2022/day05.clj\" \"src/solutions/2022/day01.clj\" \"src/index.clj\" \"src/solutions/2022/day02.clj\" \"src/solutions/2022/day09.clj\" \"src/solutions/2022/day08.clj\" \"src/solutions/2022/day04.clj\" \"src/solutions/2022/day07.clj\" \"src/solutions/2022/day06.clj\"], :current-path \"src/solutions/2022/day09.clj\", :bundle? false, :path->url {\"src/solutions/2022/day03.clj\" \"src/solutions/2022/day03.html\", \"src/solutions/2022/day05.clj\" \"src/solutions/2022/day05.html\", \"src/solutions/2022/day01.clj\" \"src/solutions/2022/day01.html\", \"src/index.clj\" \"\", \"src/solutions/2022/day02.clj\" \"src/solutions/2022/day02.html\", \"src/solutions/2022/day09.clj\" \"src/solutions/2022/day09.html\", \"src/solutions/2022/day08.clj\" \"src/solutions/2022/day08.html\", \"src/solutions/2022/day04.clj\" \"src/solutions/2022/day04.html\", \"src/solutions/2022/day07.clj\" \"src/solutions/2022/day07.html\", \"src/solutions/2022/day06.clj\" \"src/solutions/2022/day06.html\"}, :expanded-paths [\"src/index.clj\" \"src/solutions/2022/day01.clj\" \"src/solutions/2022/day02.clj\" \"src/solutions/2022/day03.clj\" \"src/solutions/2022/day04.clj\" \"src/solutions/2022/day05.clj\" \"src/solutions/2022/day06.clj\" \"src/solutions/2022/day07.clj\" \"src/solutions/2022/day08.clj\" \"src/solutions/2022/day09.clj\"], :report-fn #object[nextjournal.clerk.builder$stdout_reporter 0x35d6eda7 \"nextjournal.clerk.builder$stdout_reporter@35d6eda7\"], :html \"<div class=\\\"flex h-screen bg-white dark:bg-gray-900\\\"><div class=\\\"h-screen overflow-y-auto flex-auto scroll-container\\\"><div class=\\\"flex\\\"><div class=\\\"fixed top-2 left-2 md:left-auto md:right-2 z-10\\\"><div class=\\\"relative dark-mode-toggle\\\"><button class=\\\"text-slate-400 hover:text-slate-600 dark:hover:text-white cursor-pointer\\\"><svg class=\\\"w-5 h-5 md:w-4 md:h-4\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"11.9998\\\" cy=\\\"11.9998\\\" r=\\\"5.75375\\\" fill=\\\"currentColor\\\"></circle><svg><circle cx=\\\"3.08982\\\" cy=\\\"6.85502\\\" r=\\\"1.71143\\\" transform=\\\"rotate(-60 3.08982 6.85502)\\\" fill=\\\"currentColor\\\"></circle><circle cx=\\\"3.0903\\\" cy=\\\"17.1436\\\" r=\\\"1.71143\\\" transform=\\\"rotate(-120 3.0903 17.1436)\\\" fill=\\\"currentColor\\\"></circle><circle cx=\\\"12\\\" cy=\\\"22.2881\\\" r=\\\"1.71143\\\" fill=\\\"currentColor\\\"></circle><circle cx=\\\"20.9101\\\" cy=\\\"17.1436\\\" r=\\\"1.71143\\\" transform=\\\"rotate(-60 20.9101 17.1436)\\\" fill=\\\"currentColor\\\"></circle><circle cx=\\\"20.9101\\\" cy=\\\"6.8555\\\" r=\\\"1.71143\\\" transform=\\\"rotate(-120 20.9101 6.8555)\\\" fill=\\\"currentColor\\\"></circle><circle cx=\\\"12\\\" cy=\\\"1.71143\\\" r=\\\"1.71143\\\" fill=\\\"currentColor\\\"></circle></svg></svg></button></div></div><div class=\\\"flex-auto h-screen overflow-y-auto scroll-container\\\"><div class=\\\"flex flex-col items-center viewer-notebook flex-auto\\\"><div class=\\\"viewer w-full max-w-prose px-8\\\"><div class=\\\"mb-8 text-xs sans-serif text-gray-400 not-prose\\\"><a href=\\\"../../../\\\" class=\\\"hover:text-indigo-500 dark:hover:text-white font-medium border-b border-dotted border-gray-300\\\">Back to index</a><span class=\\\"mx-1\\\">/</span><span>Generated with <a href=\\\"https://github.com/nextjournal/clerk\\\" class=\\\"hover:text-indigo-500 dark:hover:text-white font-medium border-b border-dotted border-gray-300\\\">Clerk</a></span></div></div><div class=\\\"viewer viewer-result w-full max-w-prose px-8\\\"><div class=\\\"relative\\\"><div class=\\\"overflow-y-hidden\\\"><style>em{font-style: normal;}\\nhtml:not(.dark) pre{background-color: #f1f5f9 !important;color: #7aaac4 !important;}\\n.dark em{color: #fff;text-shadow: 0 0 5px #fff;}\\n.dark pre {background-color: rgb(31 41 55 / var(--tw-bg-opacity)) !important;}\\nhtml:not(.dark) em{color: #000; text-shadow: 0 0 2px #000;}\\n.viewer-result:first-child{display: none;}</style></div></div></div><div class=\\\"viewer viewer-result w-full max-w-prose px-8\\\"><div class=\\\"relative\\\"><div class=\\\"overflow-y-hidden\\\"><div><article class=\\\"day-desc\\\"><h2>--- Day 9: Rope Bridge ---</h2><p>This rope bridge creaks as you walk along it. You aren't sure how old it is, or whether it can even support your weight.</p>\\n<p>It seems to support the Elves just fine, though. The bridge spans a gorge which was carved out by the massive river far below you.</p>\\n<p>You step carefully; as you do, the ropes stretch and twist. You decide to distract yourself by modeling rope physics; maybe you can even figure out where <em>not</em> to step.</p>\\n<p>Consider a rope with a knot at each end; these knots mark the <em>head</em> and the <em>tail</em> of the rope. If the head moves far enough away from the tail, the tail is pulled toward the head.</p>\\n<p>Due to nebulous reasoning involving <a href=\\\"https://en.wikipedia.org/wiki/Planck_units#Planck_length\\\" target=\\\"_blank\\\">Planck lengths</a>, you should be able to model the positions of the knots on a two-dimensional grid. Then, by following a hypothetical <em>series of motions</em> (your puzzle input) for the head, you can determine how the tail will move.</p>\\n<p><span title=\\\"I'm an engineer, not a physicist!\\\">Due to the aforementioned Planck lengths</span>, the rope must be quite short; in fact, the head (<code>H</code>) and tail (<code>T</code>) must <em>always be touching</em> (diagonally adjacent and even overlapping both count as touching):</p>\\n<pre><code>....\\n.TH.\\n....\\n\\n....\\n.H..\\n..T.\\n....\\n\\n...\\n.H. (H covers T)\\n...\\n</code></pre>\\n<p>If the head is ever two steps directly up, down, left, or right from the tail, the tail must also move one step in that direction so it remains close enough:</p>\\n<pre><code>.....    .....    .....\\n.TH.. -&gt; .T.H. -&gt; ..TH.\\n.....    .....    .....\\n\\n...    ...    ...\\n.T.    .T.    ...\\n.H. -&gt; ... -&gt; .T.\\n...    .H.    .H.\\n...    ...    ...\\n</code></pre>\\n<p>Otherwise, if the head and tail aren't touching and aren't in the same row or column, the tail always moves one step diagonally to keep up:</p>\\n<pre><code>.....    .....    .....\\n.....    ..H..    ..H..\\n..H.. -&gt; ..... -&gt; ..T..\\n.T...    .T...    .....\\n.....    .....    .....\\n\\n.....    .....    .....\\n.....    .....    .....\\n..H.. -&gt; ...H. -&gt; ..TH.\\n.T...    .T...    .....\\n.....    .....    .....\\n</code></pre>\\n<p>You just need to work out where the tail goes as the head follows a series of motions. Assume the head and the tail both start at the same position, overlapping.</p>\\n<p>For example:</p>\\n<pre><code>R 4\\nU 4\\nL 3\\nD 1\\nR 4\\nD 1\\nL 5\\nR 2\\n</code></pre>\\n<p>This series of motions moves the head <em>right</em> four steps, then <em>up</em> four steps, then <em>left</em> three steps, then <em>down</em> one step, and so on. After each step, you'll need to update the position of the tail if the step means the head is no longer adjacent to the tail. Visually, these motions occur as follows (<code>s</code> marks the starting position as a reference point):</p>\\n<pre><code>== Initial State ==\\n\\n......\\n......\\n......\\n......\\nH.....  (H covers T, s)\\n\\n== R 4 ==\\n\\n......\\n......\\n......\\n......\\nTH....  (T covers s)\\n\\n......\\n......\\n......\\n......\\nsTH...\\n\\n......\\n......\\n......\\n......\\ns.TH..\\n\\n......\\n......\\n......\\n......\\ns..TH.\\n\\n== U 4 ==\\n\\n......\\n......\\n......\\n....H.\\ns..T..\\n\\n......\\n......\\n....H.\\n....T.\\ns.....\\n\\n......\\n....H.\\n....T.\\n......\\ns.....\\n\\n....H.\\n....T.\\n......\\n......\\ns.....\\n\\n== L 3 ==\\n\\n...H..\\n....T.\\n......\\n......\\ns.....\\n\\n..HT..\\n......\\n......\\n......\\ns.....\\n\\n.HT...\\n......\\n......\\n......\\ns.....\\n\\n== D 1 ==\\n\\n..T...\\n.H....\\n......\\n......\\ns.....\\n\\n== R 4 ==\\n\\n..T...\\n..H...\\n......\\n......\\ns.....\\n\\n..T...\\n...H..\\n......\\n......\\ns.....\\n\\n......\\n...TH.\\n......\\n......\\ns.....\\n\\n......\\n....TH\\n......\\n......\\ns.....\\n\\n== D 1 ==\\n\\n......\\n....T.\\n.....H\\n......\\ns.....\\n\\n== L 5 ==\\n\\n......\\n....T.\\n....H.\\n......\\ns.....\\n\\n......\\n....T.\\n...H..\\n......\\ns.....\\n\\n......\\n......\\n..HT..\\n......\\ns.....\\n\\n......\\n......\\n.HT...\\n......\\ns.....\\n\\n......\\n......\\nHT....\\n......\\ns.....\\n\\n== R 2 ==\\n\\n......\\n......\\n.H....  (H covers T)\\n......\\ns.....\\n\\n......\\n......\\n.TH...\\n......\\ns.....\\n</code></pre>\\n<p>After simulating the rope, you can count up all of the positions the <em>tail visited at least once</em>. In this diagram, <code>s</code> again marks the starting position (which the tail also visited) and <code>#</code> marks other positions the tail visited:</p>\\n<pre><code>..##..\\n...##.\\n.####.\\n....#.\\ns###..\\n</code></pre>\\n<p>So, there are <code><em>13</em></code> positions the tail visited at least once.</p>\\n<p>Simulate your complete hypothetical series of motions. <em>How many positions does the tail of the rope visit at least once?</em></p>\\n</article><article class=\\\"day-desc\\\"><h2 id=\\\"part2\\\">--- Part Two ---</h2><p>A rope snaps! Suddenly, the river is getting a lot closer than you remember. The bridge is still there, but some of the ropes that broke are now whipping toward you as you fall through the air!</p>\\n<p>The ropes are moving too quickly to grab; you only have a few seconds to choose how to arch your body to avoid being hit. Fortunately, your simulation can be extended to support longer ropes.</p>\\n<p>Rather than two knots, you now must simulate a rope consisting of <em>ten</em> knots. One knot is still the head of the rope and moves according to the series of motions. Each knot further down the rope follows the knot in front of it using the same rules as before.</p>\\n<p>Using the same series of motions as the above example, but with the knots marked <code>H</code>, <code>1</code>, <code>2</code>, ..., <code>9</code>, the motions now occur as follows:</p>\\n<pre><code>== Initial State ==\\n\\n......\\n......\\n......\\n......\\nH.....  (H covers 1, 2, 3, 4, 5, 6, 7, 8, 9, s)\\n\\n== R 4 ==\\n\\n......\\n......\\n......\\n......\\n1H....  (1 covers 2, 3, 4, 5, 6, 7, 8, 9, s)\\n\\n......\\n......\\n......\\n......\\n21H...  (2 covers 3, 4, 5, 6, 7, 8, 9, s)\\n\\n......\\n......\\n......\\n......\\n321H..  (3 covers 4, 5, 6, 7, 8, 9, s)\\n\\n......\\n......\\n......\\n......\\n4321H.  (4 covers 5, 6, 7, 8, 9, s)\\n\\n== U 4 ==\\n\\n......\\n......\\n......\\n....H.\\n4321..  (4 covers 5, 6, 7, 8, 9, s)\\n\\n......\\n......\\n....H.\\n.4321.\\n5.....  (5 covers 6, 7, 8, 9, s)\\n\\n......\\n....H.\\n....1.\\n.432..\\n5.....  (5 covers 6, 7, 8, 9, s)\\n\\n....H.\\n....1.\\n..432.\\n.5....\\n6.....  (6 covers 7, 8, 9, s)\\n\\n== L 3 ==\\n\\n...H..\\n....1.\\n..432.\\n.5....\\n6.....  (6 covers 7, 8, 9, s)\\n\\n..H1..\\n...2..\\n..43..\\n.5....\\n6.....  (6 covers 7, 8, 9, s)\\n\\n.H1...\\n...2..\\n..43..\\n.5....\\n6.....  (6 covers 7, 8, 9, s)\\n\\n== D 1 ==\\n\\n..1...\\n.H.2..\\n..43..\\n.5....\\n6.....  (6 covers 7, 8, 9, s)\\n\\n== R 4 ==\\n\\n..1...\\n..H2..\\n..43..\\n.5....\\n6.....  (6 covers 7, 8, 9, s)\\n\\n..1...\\n...H..  (H covers 2)\\n..43..\\n.5....\\n6.....  (6 covers 7, 8, 9, s)\\n\\n......\\n...1H.  (1 covers 2)\\n..43..\\n.5....\\n6.....  (6 covers 7, 8, 9, s)\\n\\n......\\n...21H\\n..43..\\n.5....\\n6.....  (6 covers 7, 8, 9, s)\\n\\n== D 1 ==\\n\\n......\\n...21.\\n..43.H\\n.5....\\n6.....  (6 covers 7, 8, 9, s)\\n\\n== L 5 ==\\n\\n......\\n...21.\\n..43H.\\n.5....\\n6.....  (6 covers 7, 8, 9, s)\\n\\n......\\n...21.\\n..4H..  (H covers 3)\\n.5....\\n6.....  (6 covers 7, 8, 9, s)\\n\\n......\\n...2..\\n..H1..  (H covers 4; 1 covers 3)\\n.5....\\n6.....  (6 covers 7, 8, 9, s)\\n\\n......\\n...2..\\n.H13..  (1 covers 4)\\n.5....\\n6.....  (6 covers 7, 8, 9, s)\\n\\n......\\n......\\nH123..  (2 covers 4)\\n.5....\\n6.....  (6 covers 7, 8, 9, s)\\n\\n== R 2 ==\\n\\n......\\n......\\n.H23..  (H covers 1; 2 covers 4)\\n.5....\\n6.....  (6 covers 7, 8, 9, s)\\n\\n......\\n......\\n.1H3..  (H covers 2, 4)\\n.5....\\n6.....  (6 covers 7, 8, 9, s)\\n</code></pre>\\n<p>Now, you need to keep track of the positions the new tail, <code>9</code>, visits. In this example, the tail never moves, and so it only visits <code><em>1</em></code> position. However, <em>be careful</em>: more types of motion are possible than before, so you might want to visually compare your simulated rope to the one above.</p>\\n<p>Here's a larger example:</p>\\n<pre><code>R 5\\nU 8\\nL 8\\nD 3\\nR 17\\nD 10\\nL 25\\nU 20\\n</code></pre>\\n<p>These motions occur as follows (individual steps are not shown):</p>\\n<pre><code>== Initial State ==\\n\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n...........H..............  (H covers 1, 2, 3, 4, 5, 6, 7, 8, 9, s)\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n\\n== R 5 ==\\n\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n...........54321H.........  (5 covers 6, 7, 8, 9, s)\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n\\n== U 8 ==\\n\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n................H.........\\n................1.........\\n................2.........\\n................3.........\\n...............54.........\\n..............6...........\\n.............7............\\n............8.............\\n...........9..............  (9 covers s)\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n\\n== L 8 ==\\n\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n........H1234.............\\n............5.............\\n............6.............\\n............7.............\\n............8.............\\n............9.............\\n..........................\\n..........................\\n...........s..............\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n\\n== D 3 ==\\n\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n.........2345.............\\n........1...6.............\\n........H...7.............\\n............8.............\\n............9.............\\n..........................\\n..........................\\n...........s..............\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n\\n== R 17 ==\\n\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n................987654321H\\n..........................\\n..........................\\n..........................\\n..........................\\n...........s..............\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n\\n== D 10 ==\\n\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n...........s.........98765\\n.........................4\\n.........................3\\n.........................2\\n.........................1\\n.........................H\\n\\n== L 25 ==\\n\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n...........s..............\\n..........................\\n..........................\\n..........................\\n..........................\\nH123456789................\\n\\n== U 20 ==\\n\\nH.........................\\n1.........................\\n2.........................\\n3.........................\\n4.........................\\n5.........................\\n6.........................\\n7.........................\\n8.........................\\n9.........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n...........s..............\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n\\n</code></pre>\\n<p>Now, the tail (<code>9</code>) visits <code><em>36</em></code> positions (including <code>s</code>) at least once:</p>\\n<pre><code>..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n..........................\\n#.........................\\n#.............###.........\\n#............#...#........\\n.#..........#.....#.......\\n..#..........#.....#......\\n...#........#.......#.....\\n....#......s.........#....\\n.....#..............#.....\\n......#............#......\\n.......#..........#.......\\n........#........#........\\n.........########.........\\n</code></pre>\\n<p>Simulate your complete series of motions on a larger rope with ten knots. <em>How many positions does the tail of the rope visit at least once?</em></p>\\n</article></div></div></div></div><div class=\\\"viewer viewer-html- w-full max-w-prose px-8\\\"><div class=\\\"viewer-markdown\\\"><h2 id=\\\"solution\\\"><span>Solution</span></h2><p><span>From spotting trees to rope physics! Can&#x27;t see these problems are dull at</span><span> </span><span>least...</span></p><p><span>This one stumped me for a while too, doesn&#x27;t bode well for the rest</span><span> </span><span>of the week but c&#x27;est la vie. Onwards and upwards.</span></p><p><span>Today we&#x27;re tasked with tracing &quot;rope physics&quot;, given the head and the tail</span><span> </span><span>of a rope and certain rules; map out all the spots the rope has been. Those</span><span> </span><span>rules are defined as:</span></p><ul><li><span>The head and tail of the rope must always be touching (adjacent and overlapping count)</span></li><li><span>If the head is two steps away cardinally, the tail must move one step in that direction</span></li><li><span>If they&#x27;re not touching or in the same row/colum, the tail moves diagonally once to keep up</span></li></ul><p><span>That&#x27;s explained more with examples above, so let&#x27;s dive right into solving it.</span></p><p><span>First things first, let&#x27;s load our input and parse it</span></p><p><span>Given the list of movement commands </span><code><span>(&quot;R 4&quot; &quot;L 2&quot;)</span></code><span>, this is exactly the same</span><span> </span><span>as </span><code><span>(&quot;R&quot; &quot;R&quot; &quot;R&quot; &quot;R&quot; &quot;L&quot; &quot;L&quot;)</span></code><span>; so let&#x27;s transform the input to look like that</span><span> </span><span>to make things easier and let us easily handle the tail movement rules.</span></p></div></div><div class=\\\"viewer viewer-code w-full max-w-wide\\\"><div class=\\\"cm-editor\\\"><cm-scroller><div class=\\\"cm-content whitespace-pre\\\"><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">(<span class=\\\"cmt-keyword\\\">def</span> <span class=\\\"cmt-variableName\\\">input</span> (<span class=\\\"cmt-keyword\\\">-&gt;&gt;</span> (<span class=\\\"cmt-keyword\\\">slurp</span> (<span class=\\\"cmt-keyword\\\">io/resource</span> <span class=\\\"cmt-string\\\">&quot;</span><span class=\\\"cmt-string\\\">inputs/2022/day09.txt</span><span class=\\\"cmt-string\\\">&quot;</span>))            <span class=\\\"cmt-comment\\\">;; Load the resource</span></div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">                str/split-lines                                          <span class=\\\"cmt-comment\\\">;; Split into lines</span></div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">                (<span class=\\\"cmt-keyword\\\">mapcat</span> #(<span class=\\\"cmt-keyword\\\">let</span> [[dir c] (<span class=\\\"cmt-keyword\\\">str/split</span> % #<span class=\\\"cmt-string\\\">&quot;</span><span class=\\\"cmt-string\\\"> </span><span class=\\\"cmt-string\\\">&quot;</span>)]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">                           (<span class=\\\"cmt-keyword\\\">repeat</span> (<span class=\\\"cmt-keyword\\\">parse-long</span> (<span class=\\\"cmt-keyword\\\">str</span> c)) (<span class=\\\"cmt-keyword\\\">str</span> dir))))))   <span class=\\\"cmt-comment\\\">;; Spread commands out individually</span></div></div></cm-scroller></div></div><div class=\\\"viewer viewer-result w-full max-w-prose px-8\\\"><div class=\\\"relative\\\"><div class=\\\"overflow-y-hidden\\\"><span class=\\\"inspected-value whitespace-nowrap\\\"><span><span class=\\\"group hover:bg-indigo-100 rounded-sm hover:shadow cursor-pointer\\\"><span class=\\\"text-slate-400 group-hover:text-indigo-700\\\"><svg viewBox=\\\"0 0 100 100\\\" class=\\\"w-[7px] h-[7px] fill-current inline-block transition-all mr-[1px] -mt-[2px] rotate-90\\\"><polygon points=\\\"5.9,88.2 50,11.8 94.1,88.2 \\\"></polygon></svg></span><span class=\\\"group-hover:text-indigo-700\\\">(</span></span><span class=\\\"cmt-string inspected-value whitespace-nowrap inline-flex\\\"><span><span>&quot;</span></span><div><span>D</span>&quot;</div></span> <span class=\\\"cmt-string inspected-value whitespace-nowrap inline-flex\\\"><span><span>&quot;</span></span><div><span>D</span>&quot;</div></span> <span class=\\\"cmt-string inspected-value whitespace-nowrap inline-flex\\\"><span><span>&quot;</span></span><div><span>R</span>&quot;</div></span> <span class=\\\"cmt-string inspected-value whitespace-nowrap inline-flex\\\"><span><span>&quot;</span></span><div><span>R</span>&quot;</div></span> <span class=\\\"cmt-string inspected-value whitespace-nowrap inline-flex\\\"><span><span>&quot;</span></span><div><span>D</span>&quot;</div></span> <span class=\\\"cmt-string inspected-value whitespace-nowrap inline-flex\\\"><span><span>&quot;</span></span><div><span>U</span>&quot;</div></span> <span class=\\\"cmt-string inspected-value whitespace-nowrap inline-flex\\\"><span><span>&quot;</span></span><div><span>L</span>&quot;</div></span> <span class=\\\"cmt-string inspected-value whitespace-nowrap inline-flex\\\"><span><span>&quot;</span></span><div><span>L</span>&quot;</div></span> <span class=\\\"cmt-string inspected-value whitespace-nowrap inline-flex\\\"><span><span>&quot;</span></span><div><span>U</span>&quot;</div></span> <span class=\\\"cmt-string inspected-value whitespace-nowrap inline-flex\\\"><span><span>&quot;</span></span><div><span>U</span>&quot;</div></span> <span class=\\\"cmt-string inspected-value whitespace-nowrap inline-flex\\\"><span><span>&quot;</span></span><div><span>D</span>&quot;</div></span> <span class=\\\"cmt-string inspected-value whitespace-nowrap inline-flex\\\"><span><span>&quot;</span></span><div><span>R</span>&quot;</div></span> <span class=\\\"cmt-string inspected-value whitespace-nowrap inline-flex\\\"><span><span>&quot;</span></span><div><span>R</span>&quot;</div></span> <span class=\\\"cmt-string inspected-value whitespace-nowrap inline-flex\\\"><span><span>&quot;</span></span><div><span>U</span>&quot;</div></span> <span class=\\\"cmt-string inspected-value whitespace-nowrap inline-flex\\\"><span><span>&quot;</span></span><div><span>U</span>&quot;</div></span> <span class=\\\"cmt-string inspected-value whitespace-nowrap inline-flex\\\"><span><span>&quot;</span></span><div><span>R</span>&quot;</div></span> <span class=\\\"cmt-string inspected-value whitespace-nowrap inline-flex\\\"><span><span>&quot;</span></span><div><span>R</span>&quot;</div></span> <span class=\\\"cmt-string inspected-value whitespace-nowrap inline-flex\\\"><span><span>&quot;</span></span><div><span>L</span>&quot;</div></span> <span class=\\\"cmt-string inspected-value whitespace-nowrap inline-flex\\\"><span><span>&quot;</span></span><div><span>D</span>&quot;</div></span> <span class=\\\"cmt-string inspected-value whitespace-nowrap inline-flex\\\"><span><span>&quot;</span></span><div><span>D</span>&quot;</div></span> <span style=\\\"border-radius:2px;font-size:11px;top:-1px\\\" class=\\\"sans-serif relative whitespace-nowrap text-gray-400 dark:text-slate-300\\\">11327<!-- --> more elided</span><span>)</span></span></span></div></div></div><div class=\\\"viewer viewer-html- w-full max-w-prose px-8\\\"><div class=\\\"viewer-markdown\\\"><p><span>Smashing. Now we have a flat input, it&#x27;s just a case of reducing over it to</span><span> </span><span>advance the state.</span></p><p><span>Next we define a function to move the head of the rope. Since we have</span><span> </span><span>single-step movements now, we can just use </span><code><span>inc</span></code><span> and </span><code><span>dec</span></code><span>.</span></p></div></div><div class=\\\"viewer viewer-code w-full max-w-wide\\\"><div class=\\\"cm-editor\\\"><cm-scroller><div class=\\\"cm-content whitespace-pre\\\"><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">(<span class=\\\"cmt-keyword\\\">defn</span> <span class=\\\"cmt-variableName\\\">move-head</span> [[x y] direction]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">  (<span class=\\\"cmt-keyword\\\">condp</span> = direction</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">    <span class=\\\"cmt-string\\\">&quot;</span><span class=\\\"cmt-string\\\">R</span><span class=\\\"cmt-string\\\">&quot;</span> [x (<span class=\\\"cmt-keyword\\\">inc</span> y)]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">    <span class=\\\"cmt-string\\\">&quot;</span><span class=\\\"cmt-string\\\">U</span><span class=\\\"cmt-string\\\">&quot;</span> [(<span class=\\\"cmt-keyword\\\">dec</span> x) y]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">    <span class=\\\"cmt-string\\\">&quot;</span><span class=\\\"cmt-string\\\">L</span><span class=\\\"cmt-string\\\">&quot;</span> [x (<span class=\\\"cmt-keyword\\\">dec</span> y)]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">    <span class=\\\"cmt-string\\\">&quot;</span><span class=\\\"cmt-string\\\">D</span><span class=\\\"cmt-string\\\">&quot;</span> [(<span class=\\\"cmt-keyword\\\">inc</span> x) y]))</div></div></cm-scroller></div></div><div class=\\\"viewer viewer-html- w-full max-w-prose px-8\\\"><div class=\\\"viewer-markdown\\\"><p><span>Then we have a function to mvoe the tail of the rope.</span></p><p><span>This handles all our rules, ensuring that the tail is always at least next to</span><span> </span><span>the head by updating the co-ordinate using </span><code><span>clojure.math/signum</span></code><span> to return</span><span> </span><span>the sign of the change (new in 1.11).</span></p></div></div><div class=\\\"viewer viewer-code w-full max-w-wide\\\"><div class=\\\"cm-editor\\\"><cm-scroller><div class=\\\"cm-content whitespace-pre\\\"><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">(<span class=\\\"cmt-keyword\\\">defn</span> <span class=\\\"cmt-variableName\\\">move-tail</span> [[head-x head-y] [tail-x tail-y]]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">  (<span class=\\\"cmt-keyword\\\">let</span> [dx (<span class=\\\"cmt-keyword\\\">-</span> head-x tail-x)</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">        dy (<span class=\\\"cmt-keyword\\\">-</span> head-y tail-y)]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">    (<span class=\\\"cmt-keyword\\\">if</span> (<span class=\\\"cmt-keyword\\\">and</span> (<span class=\\\"cmt-keyword\\\">&lt;</span> (<span class=\\\"cmt-keyword\\\">abs</span> dx) <span class=\\\"cmt-literal\\\">2</span>)</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">             (<span class=\\\"cmt-keyword\\\">&lt;</span> (<span class=\\\"cmt-keyword\\\">abs</span> dy) <span class=\\\"cmt-literal\\\">2</span>))</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">      [tail-x tail-y]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">      [(<span class=\\\"cmt-keyword\\\">+</span> tail-x (<span class=\\\"cmt-keyword\\\">math/signum</span> dx)) (<span class=\\\"cmt-keyword\\\">+</span> tail-y (<span class=\\\"cmt-keyword\\\">math/signum</span> dy))])))</div></div></cm-scroller></div></div><div class=\\\"viewer viewer-html- w-full max-w-prose px-8\\\"><div class=\\\"viewer-markdown\\\"><p><span>Next we have a function to perform a movement command given a rope vector</span><span> </span><span>(more on that in the next function) and a single-step movement command.</span></p><p><span>We loop over the rope vector and update the vector based on how far through</span><span> </span><span>it we are. The first element is the head, and once we reach the end we can</span><span> </span><span>return the new vector.</span></p></div></div><div class=\\\"viewer viewer-code w-full max-w-wide\\\"><div class=\\\"cm-editor\\\"><cm-scroller><div class=\\\"cm-content whitespace-pre\\\"><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">(<span class=\\\"cmt-keyword\\\">defn</span> <span class=\\\"cmt-variableName\\\">move</span> [rope-vec direction]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">  (<span class=\\\"cmt-keyword\\\">loop</span> [ropes rope-vec</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">         index <span class=\\\"cmt-literal\\\">0</span>]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">    (<span class=\\\"cmt-keyword\\\">let</span> [next-pos (<span class=\\\"cmt-keyword\\\">inc</span> index)]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">      (<span class=\\\"cmt-keyword\\\">cond</span></div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">        (<span class=\\\"cmt-keyword\\\">=</span> index (<span class=\\\"cmt-keyword\\\">count</span> rope-vec)) ropes</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">        (<span class=\\\"cmt-keyword\\\">=</span> index <span class=\\\"cmt-literal\\\">0</span>) (<span class=\\\"cmt-keyword\\\">recur</span> (<span class=\\\"cmt-keyword\\\">assoc</span> ropes index (<span class=\\\"cmt-keyword\\\">move-head</span> (<span class=\\\"cmt-keyword\\\">ropes</span> index) direction)) next-pos)</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">        <span class=\\\"cmt-atom\\\">:else</span> (<span class=\\\"cmt-keyword\\\">recur</span> (<span class=\\\"cmt-keyword\\\">assoc</span> ropes index (<span class=\\\"cmt-keyword\\\">move-tail</span> (<span class=\\\"cmt-keyword\\\">ropes</span> (<span class=\\\"cmt-keyword\\\">dec</span> index)) (<span class=\\\"cmt-keyword\\\">ropes</span> index))) next-pos)))))</div></div></cm-scroller></div></div><div class=\\\"viewer viewer-html- w-full max-w-prose px-8\\\"><div class=\\\"viewer-markdown\\\"><p><span>Lastly we have a general solution for both parts, since they share a common</span><span> </span><em><span>thread</span></em><span> (I&#x27;m here all week) in that part 1 has 2 knots and part 2 has 10</span><span> </span><span>knots, so we can abstract the implementation to use a vector instead and act</span><span> </span><span>accordingly.</span></p><p><span>So we take the length of the vector and the movement commands, and iterate</span><span> </span><span>through the commands until none are left. We use a set for </span><code><span>past-tails</span></code><span> so we</span><span> </span><span>don&#x27;t have to worry about handling duplicates later.</span></p></div></div><div class=\\\"viewer viewer-code w-full max-w-wide\\\"><div class=\\\"cm-editor\\\"><cm-scroller><div class=\\\"cm-content whitespace-pre\\\"><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">(<span class=\\\"cmt-keyword\\\">defn</span> <span class=\\\"cmt-variableName\\\">move-length</span> [length input]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">  (<span class=\\\"cmt-keyword\\\">loop</span> [rope-vec (<span class=\\\"cmt-keyword\\\">vec</span> (<span class=\\\"cmt-keyword\\\">repeat</span> length [<span class=\\\"cmt-literal\\\">0</span> <span class=\\\"cmt-literal\\\">0</span>]))</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">         past-tails #{}</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">         cmds input]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">    (<span class=\\\"cmt-keyword\\\">let</span> [tails (<span class=\\\"cmt-keyword\\\">conj</span> past-tails (<span class=\\\"cmt-keyword\\\">last</span> rope-vec))</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">          [cmd &amp; rst] cmds]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">      (<span class=\\\"cmt-keyword\\\">if</span> (<span class=\\\"cmt-keyword\\\">empty?</span> cmds)</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">        (<span class=\\\"cmt-keyword\\\">count</span> tails)</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">        (<span class=\\\"cmt-keyword\\\">recur</span> (<span class=\\\"cmt-keyword\\\">move</span> rope-vec cmd) tails rst)))))</div></div></cm-scroller></div></div><div class=\\\"viewer viewer-html- w-full max-w-prose px-8\\\"><div class=\\\"viewer-markdown\\\"><p><span>As above, part 1 is just 2 knots</span></p></div></div><div class=\\\"viewer viewer-code w-full max-w-wide\\\"><div class=\\\"cm-editor\\\"><cm-scroller><div class=\\\"cm-content whitespace-pre\\\"><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">(<span class=\\\"cmt-keyword\\\">defn</span> <span class=\\\"cmt-variableName\\\">part-1</span></div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">  [input]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">  (<span class=\\\"cmt-keyword\\\">move-length</span> <span class=\\\"cmt-literal\\\">2</span> input))</div></div></cm-scroller></div></div><div class=\\\"viewer viewer-html- w-full max-w-prose px-8\\\"><div class=\\\"viewer-markdown\\\"><p><span>Which gives our answer</span></p></div></div><div class=\\\"viewer viewer-result w-full max-w-prose px-8\\\"><div class=\\\"relative\\\"><div class=\\\"overflow-y-hidden\\\"><span class=\\\"cmt-number inspected-value\\\">5930</span></div></div></div><div class=\\\"viewer viewer-html- w-full max-w-prose px-8\\\"><div class=\\\"viewer-markdown\\\"><p><span>And part 2 is </span><em><span>10</span></em><span> knots</span></p></div></div><div class=\\\"viewer viewer-code w-full max-w-wide\\\"><div class=\\\"cm-editor\\\"><cm-scroller><div class=\\\"cm-content whitespace-pre\\\"><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">(<span class=\\\"cmt-keyword\\\">defn</span> <span class=\\\"cmt-variableName\\\">part-2</span></div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">  [input]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">  (<span class=\\\"cmt-keyword\\\">move-length</span> <span class=\\\"cmt-literal\\\">10</span> input))</div></div></cm-scroller></div></div><div class=\\\"viewer viewer-html- w-full max-w-prose px-8\\\"><div class=\\\"viewer-markdown\\\"><p><span>Which gives our answer</span></p></div></div><div class=\\\"viewer viewer-result w-full max-w-prose px-8\\\"><div class=\\\"relative\\\"><div class=\\\"overflow-y-hidden\\\"><span class=\\\"cmt-number inspected-value\\\">2443</span></div></div></div></div></div></div></div></div>\\n\"}")
app.init(opts)
</script></body></html>