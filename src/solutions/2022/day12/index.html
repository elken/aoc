<!DOCTYPE html>
<html><head><meta charset="UTF-8"><meta content="width=device-width, initial-scale=1" name="viewport"><meta content="I was dreading this day, not a fan of these. But there&apos;s always a Dijsktra day..." property="og:description"><meta content="Solution" property="og:title"><meta content="article:clerk" property="og:type"><meta content="summary_large_image" name="twitter:card"><link href="./../../../../_data/8VsuB17ZykScJpXQavsNhPqKdep1WsCo4jHpscxg1n8oShucdSKWsgG2d7eBNNtHFCDmG5aRaKoBxBbzR15CidaGxN.css" rel="stylesheet" type="text/css"><script src="https://storage.clerk.garden/nextjournal/clerk-assets@3gzDSuxacxY4YqqmkkG2DNy4Rkux/viewer.js?immutable=true" type="module"></script><link href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css" rel="stylesheet" type="text/css"><link href="https://fonts.bunny.net" rel="preconnect"><link href="https://fonts.bunny.net/css?family=fira-mono:400,700%7Cfira-sans:400,400i,500,500i,700,700i%7Cfira-sans-condensed:700,700i%7Cpt-serif:400,400i,700,700i" rel="stylesheet" type="text/css"><style id="extra-styles">em {
    font-style: normal !important;
}

html:not(.dark) pre {
    background-color: #f1f5f9 !important;
    color: #7aaac4 !important;
}

.dark em {
    color: #fff !important;
    text-shadow: 0 0 5px #fff !important;
}

.dark pre {
    background-color: rgb(31 41 55 / var(--tw-bg-opacity)) !important;
}

html:not(.dark) em {
    color: #000 !important;
    text-shadow: 0 0 2px #000 !important;
}

.viewer-result:first-child {
    display: none !important;
}
</style></head><body class="dark:bg-gray-900"><div id="clerk"><div class="flex"><div class="fixed top-2 left-2 md:left-auto md:right-2 z-10"><div class="relative dark-mode-toggle"><button class="text-slate-400 hover:text-slate-600 dark:hover:text-white cursor-pointer"><svg class="w-5 h-5 md:w-4 md:h-4" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="11.9998" cy="11.9998" r="5.75375" fill="currentColor"></circle><g><circle cx="3.08982" cy="6.85502" r="1.71143" transform="rotate(-60 3.08982 6.85502)" fill="currentColor"></circle><circle cx="3.0903" cy="17.1436" r="1.71143" transform="rotate(-120 3.0903 17.1436)" fill="currentColor"></circle><circle cx="12" cy="22.2881" r="1.71143" fill="currentColor"></circle><circle cx="20.9101" cy="17.1436" r="1.71143" transform="rotate(-60 20.9101 17.1436)" fill="currentColor"></circle><circle cx="20.9101" cy="6.8555" r="1.71143" transform="rotate(-120 20.9101 6.8555)" fill="currentColor"></circle><circle cx="12" cy="1.71143" r="1.71143" fill="currentColor"></circle></g></svg></button></div></div><div class="flex-auto w-screen scroll-container"><div class="flex flex-col items-center notebook-viewer flex-auto" style="margin-left:0px"><div class="viewer w-full max-w-prose px-8 not-prose mt-3"><div class="mb-8 text-xs sans-serif text-slate-400"><a href="./../../../../" class="font-medium border-b border-dotted border-slate-300 hover:text-indigo-500 hover:border-indigo-500 dark:border-slate-500 dark:hover:text-white dark:hover:border-white transition">Index</a><span class="mx-2">â€¢</span><span>Generated with <a href="https://clerk.vision" class="font-medium border-b border-dotted border-slate-300 hover:text-indigo-500 hover:border-indigo-500 dark:border-slate-500 dark:hover:text-white dark:hover:border-white transition">Clerk</a> from <a class="font-medium border-b border-dotted border-slate-300 hover:text-indigo-500 hover:border-indigo-500 dark:border-slate-500 dark:hover:text-white dark:hover:border-white transition">src/solutions/2022/day12.clj</a></span></div></div><div class="result-viewer viewer html-viewer w-full max-w-prose px-8" data-block-id="solutions.2022.day12/anon-expr-5dtfMCTsTFJbhqyity18hPv7aJ3pwU-result"><div class="relative"><div class="overflow-x-auto"><div><article class="day-desc"><h2>--- Day 12: Hill Climbing Algorithm ---</h2><p>You try contacting the Elves using your <span title="When you look up the specs for your handheld device, every field just says &quot;plot&quot;.">handheld device</span>, but the river you're following must be too low to get a decent signal.</p>
<p>You ask the device for a heightmap of the surrounding area (your puzzle input). The heightmap shows the local area from above broken into a grid; the elevation of each square of the grid is given by a single lowercase letter, where <code>a</code> is the lowest elevation, <code>b</code> is the next-lowest, and so on up to the highest elevation, <code>z</code>.</p>
<p>Also included on the heightmap are marks for your current position (<code>S</code>) and the location that should get the best signal (<code>E</code>). Your current position (<code>S</code>) has elevation <code>a</code>, and the location that should get the best signal (<code>E</code>) has elevation <code>z</code>.</p>
<p>You'd like to reach <code>E</code>, but to save energy, you should do it in <em>as few steps as possible</em>. During each step, you can move exactly one square up, down, left, or right. To avoid needing to get out your climbing gear, the elevation of the destination square can be <em>at most one higher</em> than the elevation of your current square; that is, if your current elevation is <code>m</code>, you could step to elevation <code>n</code>, but not to elevation <code>o</code>. (This also means that the elevation of the destination square can be much lower than the elevation of your current square.)</p>
<p>For example:</p>
<pre><code><em>S</em>abqponm
abcryxxl
accsz<em>E</em>xk
acctuvwj
abdefghi
</code></pre>
<p>Here, you start in the top-left corner; your goal is near the middle. You could start by moving down or right, but eventually you'll need to head toward the <code>e</code> at the bottom. From there, you can spiral around to the goal:</p>
<pre><code>v..v&lt;&lt;&lt;&lt;
&gt;v.vv&lt;&lt;^
.&gt;vv&gt;E^^
..v&gt;&gt;&gt;^^
..&gt;&gt;&gt;&gt;&gt;^
</code></pre>
<p>In the above diagram, the symbols indicate whether the path exits each square moving up (<code>^</code>), down (<code>v</code>), left (<code>&lt;</code>), or right (<code>&gt;</code>). The location that should get the best signal is still <code>E</code>, and <code>.</code> marks unvisited squares.</p>
<p>This path reaches the goal in <code><em>31</em></code> steps, the fewest possible.</p>
<p><em>What is the fewest steps required to move from your current position to the location that should get the best signal?</em></p>
</article><article class="day-desc"><h2 id="part2">--- Part Two ---</h2><p>As you walk up the hill, you suspect that the Elves will want to turn this into a hiking trail. The beginning isn't very scenic, though; perhaps you can find a better starting point.</p>
<p>To maximize exercise while hiking, the trail should start as low as possible: elevation <code>a</code>. The goal is still the square marked <code>E</code>. However, the trail should still be direct, taking the fewest steps to reach its goal. So, you'll need to find the shortest path from <em>any square at elevation <code>a</code></em> to the square marked <code>E</code>.</p>
<p>Again consider the example from above:</p>
<pre><code><em>S</em>abqponm
abcryxxl
accsz<em>E</em>xk
acctuvwj
abdefghi
</code></pre>
<p>Now, there are six choices for starting position (five marked <code>a</code>, plus the square marked <code>S</code> that counts as being at elevation <code>a</code>). If you start at the bottom-left square, you can reach the goal most quickly:</p>
<pre><code>...v&lt;&lt;&lt;&lt;
...vv&lt;&lt;^
...v&gt;E^^
.&gt;v&gt;&gt;&gt;^^
&gt;^&gt;&gt;&gt;&gt;&gt;^
</code></pre>
<p>This path reaches the goal in only <code><em>29</em></code> steps, the fewest possible.</p>
<p><em>What is the fewest steps required to move starting from any square with elevation <code>a</code> to the location that should get the best signal?</em></p>
</article></div></div></div></div><div data-block-id="solutions.2022.day12/markdown-5drdKMgSmPmRK3QQM7MifWATnrFfup" class="viewer markdown-viewer w-full max-w-prose px-8"><h2 id="solution">Solution</h2><p>I was dreading this day, not a fan of these. But there&#x27;s always a Dijsktra day...</p><p>Today&#x27;s problem is a case of finding the shortest path from one or many<!-- --> <!-- -->node(s) to another given node. Both parts differ slightly and I was able to<!-- --> <!-- -->luck out and guess part 2, meaning no refactor!</p><p>Not much more to say about it, we just compute the shortest path from start<!-- --> <!-- -->to end by adding up all the valid neighbours and finding the shortest route.</p><p>Ended up borrowing a lot of code from <a href="https://elken.github.io/aoc/src/solutions/2022/day08.html">Day 8</a> which helped.</p><p>First we need a function to convert a character to a &quot;height&quot; value, which<!-- --> <!-- -->mostly boils down to the char code; with the <code>S</code>tart and <code>E</code>nd values being<!-- --> <code>0</code> and <code>25</code> respectively.</p></div><div data-block-id="solutions.2022.day12/elevation-&gt;height-code" class="viewer code-viewer w-full max-w-wide"><div class="cm-editor"><cm-scroller><div class="cm-content whitespace-pre"><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">(<span class="cmt-keyword">defn</span> <span class="cmt-variableName">elevation-&gt;height</span> [elevation]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">  (<span class="cmt-keyword">condp</span> = elevation</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">    \S <span class="cmt-literal">0</span></div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">    \E <span class="cmt-literal">25</span></div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">    (<span class="cmt-keyword">-</span> (<span class="cmt-keyword">int</span> elevation) (<span class="cmt-keyword">int</span> \a))))</div></div></cm-scroller></div></div><div data-block-id="solutions.2022.day12/markdown-5dsM6e3JBhwQWtNzXqtmxjA1X3F8ee" class="viewer markdown-viewer w-full max-w-prose px-8"><p>Similar to <a href="https://elken.github.io/aoc/src/solutions/2022/day08.html">Day 8</a>, we parse the<!-- --> <!-- -->list of values into a map that looks like</p></div><div class="result-viewer viewer map-viewer w-full max-w-prose px-8" data-block-id="solutions.2022.day12/anon-expr-5dtmfUScMBAFEP75VyeugSCyo8dctL-result"><div class="relative"><div class="overflow-x-auto"><span class="inspected-value whitespace-nowrap"><span><span>{</span><span class="inspected-value whitespace-nowrap"><span><span class="group hover:bg-indigo-100 rounded-sm hover:shadow cursor-pointer"><span class="text-slate-400 group-hover:text-indigo-700"><svg viewBox="0 0 100 100" class="w-[7px] h-[7px] fill-current inline-block transition-all mr-[1px] -mt-[2px] rotate-90"><polygon points="5.9,88.2 50,11.8 94.1,88.2 "></polygon></svg></span><span class="group-hover:text-indigo-700">[</span></span><span class="cmt-number inspected-value">0</span> <span class="cmt-number inspected-value">0</span><span>]</span></span></span> <span class="inspected-value whitespace-nowrap"><span><span class="group hover:bg-indigo-100 rounded-sm hover:shadow cursor-pointer"><span class="text-slate-400 group-hover:text-indigo-700"><svg viewBox="0 0 100 100" class="w-[7px] h-[7px] fill-current inline-block transition-all mr-[1px] -mt-[2px] rotate-90"><polygon points="5.9,88.2 50,11.8 94.1,88.2 "></polygon></svg></span><span class="group-hover:text-indigo-700">{</span></span><span class="cmt-atom inspected-value">:char</span> <span class="cmt-string inspected-value">\<!-- -->S</span> <span class="cmt-atom inspected-value">:elevation</span> <span class="cmt-number inspected-value">0</span>}<!-- -->}</span></span></span></span></div></div></div><div data-block-id="solutions.2022.day12/range-&gt;coords-code" class="viewer code-viewer w-full max-w-wide"><div class="cm-editor"><cm-scroller><div class="cm-content whitespace-pre"><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">(<span class="cmt-keyword">defn</span> <span class="cmt-variableName">range-&gt;coords</span></div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">  [matrix]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">  (<span class="cmt-keyword">into</span> {}</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">        (<span class="cmt-keyword">for</span> [x (<span class="cmt-keyword">range</span> (<span class="cmt-keyword">count</span> matrix))</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">              y (<span class="cmt-keyword">range</span> (<span class="cmt-keyword">count</span> (<span class="cmt-keyword">first</span> matrix)))</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">              <span class="cmt-atom">:let</span> [c (<span class="cmt-keyword">get</span> (<span class="cmt-keyword">get</span> matrix x) y)</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">                    e (<span class="cmt-keyword">elevation-&gt;height</span> c)]]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">          [[x y] {<span class="cmt-atom">:elevation</span> e</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">                  <span class="cmt-atom">:char</span> c}])))</div></div></cm-scroller></div></div><div data-block-id="solutions.2022.day12/markdown-5duEPPreDS77YdExUSimBQPsoQNX7n" class="viewer markdown-viewer w-full max-w-prose px-8"><p>Now we can parse out input</p></div><div data-block-id="solutions.2022.day12/input-code" class="viewer code-viewer w-full max-w-wide"><div class="cm-editor"><cm-scroller><div class="cm-content whitespace-pre"><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">(<span class="cmt-keyword">def</span> <span class="cmt-variableName">input</span> (<span class="cmt-keyword">-&gt;&gt;</span> (<span class="cmt-keyword">slurp</span> (<span class="cmt-keyword">io/resource</span> <span class="cmt-string">&quot;</span><span class="cmt-string">inputs/2022/day12.txt</span><span class="cmt-string">&quot;</span>)) <span class="cmt-comment">;; Load the resource</span></div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">                str/split-lines                               <span class="cmt-comment">;; Split into lines</span></div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">                range-&gt;coords))                               <span class="cmt-comment">;; Parse to matrix</span></div></div></cm-scroller></div></div><div data-block-id="solutions.2022.day12/markdown-5dsqop9vt4GjdgzAhb3y4UAyy7LQzs" class="viewer markdown-viewer w-full max-w-prose px-8"><p>The main &quot;computation&quot; function that uses a <a href="https://github.com/danielmiladinov/joy-of-clojure/blob/master/src/joy-of-clojure/chapter5/how_to_use_persistent_queues.clj">PersistentQueue</a> <!-- -->that I was lucky enough to have a physical copy of the associated book in front of me.</p><p>The basic iteration for each loop looks like:</p><ul><li>Get the first node in the list of nodes to check</li><li>Return the <code>seen</code> value if it&#x27;s the last node</li><li>Otherwise get all the neighbours by checking the cardinal directions for<!-- --> <!-- -->unseen, unvisited nodes we can move to</li><li>Recur with these valid neighbours applied and update the <code>seen</code> values</li></ul></div><div data-block-id="solutions.2022.day12/find-shortest-path-code" class="viewer code-viewer w-full max-w-wide"><div class="cm-editor"><cm-scroller><div class="cm-content whitespace-pre"><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">(<span class="cmt-keyword">defn</span> <span class="cmt-variableName">find-shortest-path</span> [input from to]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">  (<span class="cmt-keyword">loop</span> [unvisited (<span class="cmt-keyword">reduce</span> conj clojure.lang.PersistentQueue/EMPTY from)</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">         seen (<span class="cmt-keyword">zipmap</span> from (<span class="cmt-keyword">repeat</span> <span class="cmt-literal">0</span>))]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">    (<span class="cmt-keyword">let</span> [node (<span class="cmt-keyword">peek</span> unvisited)]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">      (<span class="cmt-keyword">if</span> (<span class="cmt-keyword">=</span> to node)</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">        (<span class="cmt-keyword">seen</span> node)</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">        (<span class="cmt-keyword">let</span> [neighbours (<span class="cmt-keyword">-&gt;&gt;</span> neighbour</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">                             (<span class="cmt-keyword">for</span> [direction [[<span class="cmt-literal">-1</span> <span class="cmt-literal">0</span>] [<span class="cmt-literal">1</span> <span class="cmt-literal">0</span>] [<span class="cmt-literal">0</span> <span class="cmt-literal">-1</span>] [<span class="cmt-literal">0</span> <span class="cmt-literal">1</span>]]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">                                   <span class="cmt-atom">:let</span> [neighbour (<span class="cmt-keyword">mapv</span> + node direction)]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">                                   <span class="cmt-atom">:when</span> (<span class="cmt-keyword">and</span> (<span class="cmt-keyword">input</span> neighbour)</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">                                              (<span class="cmt-keyword">not</span> (<span class="cmt-keyword">seen</span> neighbour))</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">                                              (<span class="cmt-keyword">not</span> (<span class="cmt-keyword">.contains</span> neighbour unvisited))</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">                                              (<span class="cmt-keyword">&gt;=</span></div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">                                               (<span class="cmt-atom">:elevation</span> (<span class="cmt-keyword">input</span> node))</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">                                               (<span class="cmt-keyword">dec</span> (<span class="cmt-atom">:elevation</span> (<span class="cmt-keyword">input</span> neighbour)))))])</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">                             vec)]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">          (<span class="cmt-keyword">recur</span> (<span class="cmt-keyword">into</span> (<span class="cmt-keyword">pop</span> unvisited) neighbours)</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">                 (<span class="cmt-keyword">merge</span> seen (<span class="cmt-keyword">zipmap</span> neighbours (<span class="cmt-keyword">repeat</span> (<span class="cmt-keyword">inc</span> (<span class="cmt-keyword">seen</span> node)))))))))))</div></div></cm-scroller></div></div><div data-block-id="solutions.2022.day12/markdown-5drbKEzaJDG3y8tX8B1pbRMs2hF9D2" class="viewer markdown-viewer w-full max-w-prose px-8"><p>Lastly we need a small helper method to give us the locations of all<!-- --> <!-- -->instances of a given set of characters</p></div><div data-block-id="solutions.2022.day12/find-chars-code" class="viewer code-viewer w-full max-w-wide"><div class="cm-editor"><cm-scroller><div class="cm-content whitespace-pre"><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">(<span class="cmt-keyword">defn</span> <span class="cmt-variableName">find-chars</span> [input &amp; chars]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">  (<span class="cmt-keyword">keys</span></div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">   (<span class="cmt-keyword">first</span> ((<span class="cmt-keyword">juxt</span> filter remove)</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">           (<span class="cmt-keyword">fn</span> [[_ v]] (<span class="cmt-keyword">.contains</span> chars (<span class="cmt-atom">:char</span> v))) input))))</div></div></cm-scroller></div></div><div data-block-id="solutions.2022.day12/markdown-5dsnmCCXajFuc7h8Dr1ZZXX9ot1QFP" class="viewer markdown-viewer w-full max-w-prose px-8"><p>Part 1 is just a simple case of finding the path from <code>S</code> to <code>E</code></p></div><div data-block-id="solutions.2022.day12/part-1-code" class="viewer code-viewer w-full max-w-wide"><div class="cm-editor"><cm-scroller><div class="cm-content whitespace-pre"><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">(<span class="cmt-keyword">defn</span> <span class="cmt-variableName">part-1</span></div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">  [input]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">  (<span class="cmt-keyword">find-shortest-path</span></div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">   input</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">   (<span class="cmt-keyword">find-chars</span> input \S)</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">   (<span class="cmt-keyword">first</span> (<span class="cmt-keyword">find-chars</span> input \E))))</div></div></cm-scroller></div></div><div data-block-id="solutions.2022.day12/markdown-5dspMqxdw3uNK6Pgan8eaYi57sm4wP" class="viewer markdown-viewer w-full max-w-prose px-8"><p>Which gives our answer</p></div><div class="result-viewer viewer number-viewer w-full max-w-prose px-8" data-block-id="solutions.2022.day12/anon-expr-5dshGnyCYVfgr3cV4vKRqeFt2v8Fqp-result"><div class="relative"><div class="overflow-x-auto"><span class="cmt-number inspected-value">383</span></div></div></div><div data-block-id="solutions.2022.day12/markdown-5dtZ534V9SUQ1bTvwGhJVSsiCj3aec" class="viewer markdown-viewer w-full max-w-prose px-8"><p>Part 2 is a little bit more involved, now we have to also consider all <code>a</code> <!-- -->paths as well as <code>S</code>, but as above we lucked out and got this part for free.</p></div><div data-block-id="solutions.2022.day12/part-2-code" class="viewer code-viewer w-full max-w-wide"><div class="cm-editor"><cm-scroller><div class="cm-content whitespace-pre"><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">(<span class="cmt-keyword">defn</span> <span class="cmt-variableName">part-2</span></div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">  [input]</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">  (<span class="cmt-keyword">find-shortest-path</span></div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">   input</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">   (<span class="cmt-keyword">find-chars</span> input \a \S)</div><div style="padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace" class="cm-line">   (<span class="cmt-keyword">first</span> (<span class="cmt-keyword">find-chars</span> input \E))))</div></div></cm-scroller></div></div><div data-block-id="solutions.2022.day12/markdown-5dspMqxdw3uNK6Pgan8eaYi57sm4wP#2" class="viewer markdown-viewer w-full max-w-prose px-8"><p>Which gives our answer</p></div><div class="result-viewer viewer number-viewer w-full max-w-prose px-8" data-block-id="solutions.2022.day12/anon-expr-5ds3NJhiXAVBTLsVFex2mJDuuDv1Lr-result"><div class="relative"><div class="overflow-x-auto"><span class="cmt-number inspected-value">377</span></div></div></div></div></div></div><div class="fixed w-full z-20 top-0 left-0 w-full"></div>
</div><script type="module">let viewer = nextjournal.clerk.sci_env
let state = "{:bundle? false, :path->doc {\"src/solutions/2022/day12\" {:path [], :nextjournal/value {:toc [{:title \"\", :emoji nil, :path \"#\", :items [{:title \"Solution\", :emoji nil, :path \"#solution\", :items []}]}], :sidenotes? false, :toc-visibility false, :atom-var-name->state #viewer-eval (nextjournal.clerk.render/intern-atoms! {}), :ns #viewer-eval (ns solutions.2022.day12), :file \"src/solutions/2022/day12.clj\", :scope solutions.2022.day12, :bundle? false, :header {:path [], :nextjournal/value [:div.viewer.w-full.max-w-prose.px-8.not-prose.mt-3 [:div.mb-8.text-xs.sans-serif.text-slate-400 nil [:<> [:a.font-medium.border-b.border-dotted.border-slate-300.hover:text-indigo-500.hover:border-indigo-500.dark:border-slate-500.dark:hover:text-white.dark:hover:border-white.transition {:href \"./../../../../\"} \"Index\"] [:span.mx-2 \"â€¢\"]] [:span \"Generated with \" [:a.font-medium.border-b.border-dotted.border-slate-300.hover:text-indigo-500.hover:border-indigo-500.dark:border-slate-500.dark:hover:text-white.dark:hover:border-white.transition {:href \"https://clerk.vision\"} \"Clerk\"] \" from \" [:a.font-medium.border-b.border-dotted.border-slate-300.hover:text-indigo-500.hover:border-indigo-500.dark:border-slate-500.dark:hover:text-white.dark:hover:border-white.transition {:href nil} \"src/solutions/2022/day12.clj\" nil]]]], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}, :open-graph {:type \"article:clerk\", :title \"Solution\", :description \"I was dreading this day, not a fan of these. But there's always a Dijsktra day...\"}, :title \"Solution\", :blocks [{:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [:div {:dangerouslySetInnerHTML {:__html \"<article class=\\\"day-desc\\\"><h2>--- Day 12: Hill Climbing Algorithm ---</h2><p>You try contacting the Elves using your <span title=\\\"When you look up the specs for your handheld device, every field just says &quot;plot&quot;.\\\">handheld device</span>, but the river you're following must be too low to get a decent signal.</p>\\n<p>You ask the device for a heightmap of the surrounding area (your puzzle input). The heightmap shows the local area from above broken into a grid; the elevation of each square of the grid is given by a single lowercase letter, where <code>a</code> is the lowest elevation, <code>b</code> is the next-lowest, and so on up to the highest elevation, <code>z</code>.</p>\\n<p>Also included on the heightmap are marks for your current position (<code>S</code>) and the location that should get the best signal (<code>E</code>). Your current position (<code>S</code>) has elevation <code>a</code>, and the location that should get the best signal (<code>E</code>) has elevation <code>z</code>.</p>\\n<p>You'd like to reach <code>E</code>, but to save energy, you should do it in <em>as few steps as possible</em>. During each step, you can move exactly one square up, down, left, or right. To avoid needing to get out your climbing gear, the elevation of the destination square can be <em>at most one higher</em> than the elevation of your current square; that is, if your current elevation is <code>m</code>, you could step to elevation <code>n</code>, but not to elevation <code>o</code>. (This also means that the elevation of the destination square can be much lower than the elevation of your current square.)</p>\\n<p>For example:</p>\\n<pre><code><em>S</em>abqponm\\nabcryxxl\\naccsz<em>E</em>xk\\nacctuvwj\\nabdefghi\\n</code></pre>\\n<p>Here, you start in the top-left corner; your goal is near the middle. You could start by moving down or right, but eventually you'll need to head toward the <code>e</code> at the bottom. From there, you can spiral around to the goal:</p>\\n<pre><code>v..v&lt;&lt;&lt;&lt;\\n&gt;v.vv&lt;&lt;^\\n.&gt;vv&gt;E^^\\n..v&gt;&gt;&gt;^^\\n..&gt;&gt;&gt;&gt;&gt;^\\n</code></pre>\\n<p>In the above diagram, the symbols indicate whether the path exits each square moving up (<code>^</code>), down (<code>v</code>), left (<code>&lt;</code>), or right (<code>&gt;</code>). The location that should get the best signal is still <code>E</code>, and <code>.</code> marks unvisited squares.</p>\\n<p>This path reaches the goal in <code><em>31</em></code> steps, the fewest possible.</p>\\n<p><em>What is the fewest steps required to move from your current position to the location that should get the best signal?</em></p>\\n</article><article class=\\\"day-desc\\\"><h2 id=\\\"part2\\\">--- Part Two ---</h2><p>As you walk up the hill, you suspect that the Elves will want to turn this into a hiking trail. The beginning isn't very scenic, though; perhaps you can find a better starting point.</p>\\n<p>To maximize exercise while hiking, the trail should start as low as possible: elevation <code>a</code>. The goal is still the square marked <code>E</code>. However, the trail should still be direct, taking the fewest steps to reach its goal. So, you'll need to find the shortest path from <em>any square at elevation <code>a</code></em> to the square marked <code>E</code>.</p>\\n<p>Again consider the example from above:</p>\\n<pre><code><em>S</em>abqponm\\nabcryxxl\\naccsz<em>E</em>xk\\nacctuvwj\\nabdefghi\\n</code></pre>\\n<p>Now, there are six choices for starting position (five marked <code>a</code>, plus the square marked <code>S</code> that counts as being at elevation <code>a</code>). If you start at the bottom-left square, you can reach the goal most quickly:</p>\\n<pre><code>...v&lt;&lt;&lt;&lt;\\n...vv&lt;&lt;^\\n...v&gt;E^^\\n.&gt;v&gt;&gt;&gt;^^\\n&gt;^&gt;&gt;&gt;&gt;&gt;^\\n</code></pre>\\n<p>This path reaches the goal in only <code><em>29</em></code> steps, the fewest possible.</p>\\n<p><em>What is the fewest steps required to move starting from any square with elevation <code>a</code> to the location that should get the best signal?</em></p>\\n</article>\"}}], :nextjournal/visibility {:code :hide, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}, :nextjournal/render-opts {:id \"solutions.2022.day12/anon-expr-5dtfMCTsTFJbhqyity18hPv7aJ3pwU-result\"}}, :nextjournal/blob-id \"5dtn2txq6DkA1owk4zXc4csNFWqhiH\"}, :nextjournal/render-opts {:id \"solutions.2022.day12/anon-expr-5dtfMCTsTFJbhqyity18hPv7aJ3pwU-result\"}, :nextjournal/visibility {:code :hide, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day12/markdown-5drdKMgSmPmRK3QQM7MifWATnrFfup\"} [\"h2\" {:id \"solution\"} [:<> \"Solution\"]] [:p [:<> \"I was dreading this day, not a fan of these. But there's always a Dijsktra day...\"]] [:p [:<> \"Today's problem is a case of finding the shortest path from one or many\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"node(s) to another given node. Both parts differ slightly and I was able to\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"luck out and guess part 2, meaning no refactor!\"]] [:p [:<> \"Not much more to say about it, we just compute the shortest path from start\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"to end by adding up all the valid neighbours and finding the shortest route.\"]] [:p [:<> \"Ended up borrowing a lot of code from \"] [:a {:href \"https://elken.github.io/aoc/src/solutions/2022/day08.html\"} [:<> \"Day 8\"]] [:<> \" which helped.\"]] [:p [:<> \"First we need a function to convert a character to a \\\"height\\\" value, which\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"mostly boils down to the char code; with the \"] [:code [:<> \"S\"]] [:<> \"tart and \"] [:code [:<> \"E\"]] [:<> \"nd values being\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:code [:<> \"0\"]] [:<> \" and \"] [:code [:<> \"25\"]] [:<> \" respectively.\"]]], :nextjournal/render-opts {:id \"solutions.2022.day12/markdown-5drdKMgSmPmRK3QQM7MifWATnrFfup\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe\"}} {:path [], :nextjournal/value \"(defn elevation->height [elevation]\\n  (condp = elevation\\n    \\\\S 0\\n    \\\\E 25\\n    (- (int elevation) (int \\\\a))))\", :nextjournal/render-opts {:loc {:line 30, :end-line 34, :column 1, :end-column 35}, :id \"solutions.2022.day12/elevation->height-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day12/markdown-5dsM6e3JBhwQWtNzXqtmxjA1X3F8ee\"} [:p [:<> \"Similar to \"] [:a {:href \"https://elken.github.io/aoc/src/solutions/2022/day08.html\"} [:<> \"Day 8\"]] [:<> \", we parse the\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"list of values into a map that looks like\"]]], :nextjournal/render-opts {:id \"solutions.2022.day12/markdown-5dsM6e3JBhwQWtNzXqtmxjA1X3F8ee\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [{:path [0], :nextjournal/value [{:path [0 0], :nextjournal/value [{:path [0 0 0], :nextjournal/value 0, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5dr3R1ZvHCoRHpxsQq4D4ARv9BQC7o\"}} {:path [0 0 1], :nextjournal/value 0, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5dr3R1ZvHCoRHpxsQq4D4ARv9BQC7o\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/vector-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-coll, :opening-paren \"[\", :closing-paren (\"]\"), :page-size 20, :hash \"5dsD1KJESfc8Dy8gPeGQfZCX2ayE8f\"}} {:path [0 1], :nextjournal/value [{:path [0 1 0], :nextjournal/value [{:path [0 1 0 0], :nextjournal/value :char, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dts2SRXNA1ht5BQcLChhdx5xPTzPs\"}} {:path [0 1 0 1], :nextjournal/value \\S, :nextjournal/viewer {:name nextjournal.clerk.viewer/char-viewer, :render-fn #viewer-fn (fn [c] [:span.cmt-string.inspected-value \"\\\\\" c]), :hash \"5duCj6jYdupcT2DMBvQ9mb7aQERDFJ\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5dqyTNw28UdNWoTQKDxLARS6iqJB1N\"}} {:path [0 1 1], :nextjournal/value [{:path [0 1 1 0], :nextjournal/value :elevation, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dts2SRXNA1ht5BQcLChhdx5xPTzPs\"}} {:path [0 1 1 1], :nextjournal/value 0, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5dr3R1ZvHCoRHpxsQq4D4ARv9BQC7o\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5dqyTNw28UdNWoTQKDxLARS6iqJB1N\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-map, :opening-paren \"{\", :closing-paren (\"}\" \"}\"), :page-size 10, :hash \"5drc3ac5ux7kS4h2vozdxwsrKDqSmn\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5dqyTNw28UdNWoTQKDxLARS6iqJB1N\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-map, :opening-paren \"{\", :page-size 10, :hash \"5drc3ac5ux7kS4h2vozdxwsrKDqSmn\"}, :nextjournal/render-opts {:id \"solutions.2022.day12/anon-expr-5dtmfUScMBAFEP75VyeugSCyo8dctL-result\"}}, :nextjournal/blob-id \"5dtEJgmmYPaVaq54UBAKZefPjv1sES\"}, :nextjournal/render-opts {:id \"solutions.2022.day12/anon-expr-5dtmfUScMBAFEP75VyeugSCyo8dctL-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn range->coords\\n  [matrix]\\n  (into {}\\n        (for [x (range (count matrix))\\n              y (range (count (first matrix)))\\n              :let [c (get (get matrix x) y)\\n                    e (elevation->height c)]]\\n          [[x y] {:elevation e\\n                  :char c}])))\", :nextjournal/render-opts {:loc {:line 43, :end-line 51, :column 1, :end-column 31}, :id \"solutions.2022.day12/range->coords-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day12/markdown-5duEPPreDS77YdExUSimBQPsoQNX7n\"} [:p [:<> \"Now we can parse out input\"]]], :nextjournal/render-opts {:id \"solutions.2022.day12/markdown-5duEPPreDS77YdExUSimBQPsoQNX7n\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe\"}} {:path [], :nextjournal/value \"(def input (->> (slurp (io/resource \\\"inputs/2022/day12.txt\\\")) ;; Load the resource\\n                str/split-lines                               ;; Split into lines\\n                range->coords))                               ;; Parse to matrix\", :nextjournal/render-opts {:loc {:line 54, :end-line 56, :column 1, :end-column 32}, :id \"solutions.2022.day12/input-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day12/markdown-5dsqop9vt4GjdgzAhb3y4UAyy7LQzs\"} [:p [:<> \"The main \\\"computation\\\" function that uses a \"] [:a {:href \"https://github.com/danielmiladinov/joy-of-clojure/blob/master/src/joy-of-clojure/chapter5/how_to_use_persistent_queues.clj\"} [:<> \"PersistentQueue\"]] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"that I was lucky enough to have a physical copy of the associated book in front of me.\"]] [:p [:<> \"The basic iteration for each loop looks like:\"]] [:ul [:li [:<> [:<> \"Get the first node in the list of nodes to check\"]]] [:li [:<> [:<> \"Return the \"] [:code [:<> \"seen\"]] [:<> \" value if it's the last node\"]]] [:li [:<> [:<> \"Otherwise get all the neighbours by checking the cardinal directions for\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"unseen, unvisited nodes we can move to\"]]] [:li [:<> [:<> \"Recur with these valid neighbours applied and update the \"] [:code [:<> \"seen\"]] [:<> \" values\"]]]]], :nextjournal/render-opts {:id \"solutions.2022.day12/markdown-5dsqop9vt4GjdgzAhb3y4UAyy7LQzs\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe\"}} {:path [], :nextjournal/value \"(defn find-shortest-path [input from to]\\n  (loop [unvisited (reduce conj clojure.lang.PersistentQueue/EMPTY from)\\n         seen (zipmap from (repeat 0))]\\n    (let [node (peek unvisited)]\\n      (if (= to node)\\n        (seen node)\\n        (let [neighbours (->> neighbour\\n                             (for [direction [[-1 0] [1 0] [0 -1] [0 1]]\\n                                   :let [neighbour (mapv + node direction)]\\n                                   :when (and (input neighbour)\\n                                              (not (seen neighbour))\\n                                              (not (.contains neighbour unvisited))\\n                                              (>=\\n                                               (:elevation (input node))\\n                                               (dec (:elevation (input neighbour)))))])\\n                             vec)]\\n          (recur (into (pop unvisited) neighbours)\\n                 (merge seen (zipmap neighbours (repeat (inc (seen node)))))))))))\", :nextjournal/render-opts {:loc {:line 67, :end-line 84, :column 1, :end-column 83}, :id \"solutions.2022.day12/find-shortest-path-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day12/markdown-5drbKEzaJDG3y8tX8B1pbRMs2hF9D2\"} [:p [:<> \"Lastly we need a small helper method to give us the locations of all\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"instances of a given set of characters\"]]], :nextjournal/render-opts {:id \"solutions.2022.day12/markdown-5drbKEzaJDG3y8tX8B1pbRMs2hF9D2\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe\"}} {:path [], :nextjournal/value \"(defn find-chars [input & chars]\\n  (keys\\n   (first ((juxt filter remove)\\n           (fn [[_ v]] (.contains chars (:char v))) input))))\", :nextjournal/render-opts {:loc {:line 88, :end-line 91, :column 1, :end-column 62}, :id \"solutions.2022.day12/find-chars-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day12/markdown-5dsnmCCXajFuc7h8Dr1ZZXX9ot1QFP\"} [:p [:<> \"Part 1 is just a simple case of finding the path from \"] [:code [:<> \"S\"]] [:<> \" to \"] [:code [:<> \"E\"]]]], :nextjournal/render-opts {:id \"solutions.2022.day12/markdown-5dsnmCCXajFuc7h8Dr1ZZXX9ot1QFP\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe\"}} {:path [], :nextjournal/value \"(defn part-1\\n  [input]\\n  (find-shortest-path\\n   input\\n   (find-chars input \\\\S)\\n   (first (find-chars input \\\\E))))\", :nextjournal/render-opts {:loc {:line 95, :end-line 100, :column 1, :end-column 35}, :id \"solutions.2022.day12/part-1-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day12/markdown-5dspMqxdw3uNK6Pgan8eaYi57sm4wP\"} [:p [:<> \"Which gives our answer\"]]], :nextjournal/render-opts {:id \"solutions.2022.day12/markdown-5dspMqxdw3uNK6Pgan8eaYi57sm4wP\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value 383, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5dr3R1ZvHCoRHpxsQq4D4ARv9BQC7o\"}, :nextjournal/render-opts {:id \"solutions.2022.day12/anon-expr-5dshGnyCYVfgr3cV4vKRqeFt2v8Fqp-result\"}}, :nextjournal/blob-id \"5dqpZQMi3XC2rKL68Y2apz5hd79uGQ\"}, :nextjournal/render-opts {:id \"solutions.2022.day12/anon-expr-5dshGnyCYVfgr3cV4vKRqeFt2v8Fqp-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day12/markdown-5dtZ534V9SUQ1bTvwGhJVSsiCj3aec\"} [:p [:<> \"Part 2 is a little bit more involved, now we have to also consider all \"] [:code [:<> \"a\"]] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"paths as well as \"] [:code [:<> \"S\"]] [:<> \", but as above we lucked out and got this part for free.\"]]], :nextjournal/render-opts {:id \"solutions.2022.day12/markdown-5dtZ534V9SUQ1bTvwGhJVSsiCj3aec\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe\"}} {:path [], :nextjournal/value \"(defn part-2\\n  [input]\\n  (find-shortest-path\\n   input\\n   (find-chars input \\\\a \\\\S)\\n   (first (find-chars input \\\\E))))\", :nextjournal/render-opts {:loc {:line 109, :end-line 114, :column 1, :end-column 35}, :id \"solutions.2022.day12/part-2-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2022.day12/markdown-5dspMqxdw3uNK6Pgan8eaYi57sm4wP#2\"} [:p [:<> \"Which gives our answer\"]]], :nextjournal/render-opts {:id \"solutions.2022.day12/markdown-5dspMqxdw3uNK6Pgan8eaYi57sm4wP#2\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value 377, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5dr3R1ZvHCoRHpxsQq4D4ARv9BQC7o\"}, :nextjournal/render-opts {:id \"solutions.2022.day12/anon-expr-5ds3NJhiXAVBTLsVFex2mJDuuDv1Lr-result\"}}, :nextjournal/blob-id \"5drQR8Z98tioEcyAvmpHJFeeU4zrbN\"}, :nextjournal/render-opts {:id \"solutions.2022.day12/anon-expr-5ds3NJhiXAVBTLsVFex2mJDuuDv1Lr-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}}]}, :nextjournal/viewer {:name nextjournal.clerk.viewer/notebook-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-notebook, :hash \"5duAFDxE4sCnRX71Wo6zeCpC9C3djE\"}}}, :current-path \"src/solutions/2022/day12\", :resource->url {\"/js/viewer.js\" \"https://storage.clerk.garden/nextjournal/clerk-assets@3gzDSuxacxY4YqqmkkG2DNy4Rkux/viewer.js?immutable=true\", \"/css/viewer.css\" \"_data/8VsuB17ZykScJpXQavsNhPqKdep1WsCo4jHpscxg1n8oShucdSKWsgG2d7eBNNtHFCDmG5aRaKoBxBbzR15CidaGxN.css\"}, :index \"src/index.clj\", :html \"<div class=\\\"flex\\\"><div class=\\\"fixed top-2 left-2 md:left-auto md:right-2 z-10\\\"><div class=\\\"relative dark-mode-toggle\\\"><button class=\\\"text-slate-400 hover:text-slate-600 dark:hover:text-white cursor-pointer\\\"><svg class=\\\"w-5 h-5 md:w-4 md:h-4\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"11.9998\\\" cy=\\\"11.9998\\\" r=\\\"5.75375\\\" fill=\\\"currentColor\\\"></circle><g><circle cx=\\\"3.08982\\\" cy=\\\"6.85502\\\" r=\\\"1.71143\\\" transform=\\\"rotate(-60 3.08982 6.85502)\\\" fill=\\\"currentColor\\\"></circle><circle cx=\\\"3.0903\\\" cy=\\\"17.1436\\\" r=\\\"1.71143\\\" transform=\\\"rotate(-120 3.0903 17.1436)\\\" fill=\\\"currentColor\\\"></circle><circle cx=\\\"12\\\" cy=\\\"22.2881\\\" r=\\\"1.71143\\\" fill=\\\"currentColor\\\"></circle><circle cx=\\\"20.9101\\\" cy=\\\"17.1436\\\" r=\\\"1.71143\\\" transform=\\\"rotate(-60 20.9101 17.1436)\\\" fill=\\\"currentColor\\\"></circle><circle cx=\\\"20.9101\\\" cy=\\\"6.8555\\\" r=\\\"1.71143\\\" transform=\\\"rotate(-120 20.9101 6.8555)\\\" fill=\\\"currentColor\\\"></circle><circle cx=\\\"12\\\" cy=\\\"1.71143\\\" r=\\\"1.71143\\\" fill=\\\"currentColor\\\"></circle></g></svg></button></div></div><div class=\\\"flex-auto w-screen scroll-container\\\"><div class=\\\"flex flex-col items-center notebook-viewer flex-auto\\\" style=\\\"margin-left:0px\\\"><div class=\\\"viewer w-full max-w-prose px-8 not-prose mt-3\\\"><div class=\\\"mb-8 text-xs sans-serif text-slate-400\\\"><a href=\\\"./../../../../\\\" class=\\\"font-medium border-b border-dotted border-slate-300 hover:text-indigo-500 hover:border-indigo-500 dark:border-slate-500 dark:hover:text-white dark:hover:border-white transition\\\">Index</a><span class=\\\"mx-2\\\">â€¢</span><span>Generated with <a href=\\\"https://clerk.vision\\\" class=\\\"font-medium border-b border-dotted border-slate-300 hover:text-indigo-500 hover:border-indigo-500 dark:border-slate-500 dark:hover:text-white dark:hover:border-white transition\\\">Clerk</a> from <a class=\\\"font-medium border-b border-dotted border-slate-300 hover:text-indigo-500 hover:border-indigo-500 dark:border-slate-500 dark:hover:text-white dark:hover:border-white transition\\\">src/solutions/2022/day12.clj</a></span></div></div><div class=\\\"result-viewer viewer html-viewer w-full max-w-prose px-8\\\" data-block-id=\\\"solutions.2022.day12/anon-expr-5dtfMCTsTFJbhqyity18hPv7aJ3pwU-result\\\"><div class=\\\"relative\\\"><div class=\\\"overflow-x-auto\\\"><div><article class=\\\"day-desc\\\"><h2>--- Day 12: Hill Climbing Algorithm ---</h2><p>You try contacting the Elves using your <span title=\\\"When you look up the specs for your handheld device, every field just says &quot;plot&quot;.\\\">handheld device</span>, but the river you're following must be too low to get a decent signal.</p>\\n<p>You ask the device for a heightmap of the surrounding area (your puzzle input). The heightmap shows the local area from above broken into a grid; the elevation of each square of the grid is given by a single lowercase letter, where <code>a</code> is the lowest elevation, <code>b</code> is the next-lowest, and so on up to the highest elevation, <code>z</code>.</p>\\n<p>Also included on the heightmap are marks for your current position (<code>S</code>) and the location that should get the best signal (<code>E</code>). Your current position (<code>S</code>) has elevation <code>a</code>, and the location that should get the best signal (<code>E</code>) has elevation <code>z</code>.</p>\\n<p>You'd like to reach <code>E</code>, but to save energy, you should do it in <em>as few steps as possible</em>. During each step, you can move exactly one square up, down, left, or right. To avoid needing to get out your climbing gear, the elevation of the destination square can be <em>at most one higher</em> than the elevation of your current square; that is, if your current elevation is <code>m</code>, you could step to elevation <code>n</code>, but not to elevation <code>o</code>. (This also means that the elevation of the destination square can be much lower than the elevation of your current square.)</p>\\n<p>For example:</p>\\n<pre><code><em>S</em>abqponm\\nabcryxxl\\naccsz<em>E</em>xk\\nacctuvwj\\nabdefghi\\n</code></pre>\\n<p>Here, you start in the top-left corner; your goal is near the middle. You could start by moving down or right, but eventually you'll need to head toward the <code>e</code> at the bottom. From there, you can spiral around to the goal:</p>\\n<pre><code>v..v&lt;&lt;&lt;&lt;\\n&gt;v.vv&lt;&lt;^\\n.&gt;vv&gt;E^^\\n..v&gt;&gt;&gt;^^\\n..&gt;&gt;&gt;&gt;&gt;^\\n</code></pre>\\n<p>In the above diagram, the symbols indicate whether the path exits each square moving up (<code>^</code>), down (<code>v</code>), left (<code>&lt;</code>), or right (<code>&gt;</code>). The location that should get the best signal is still <code>E</code>, and <code>.</code> marks unvisited squares.</p>\\n<p>This path reaches the goal in <code><em>31</em></code> steps, the fewest possible.</p>\\n<p><em>What is the fewest steps required to move from your current position to the location that should get the best signal?</em></p>\\n</article><article class=\\\"day-desc\\\"><h2 id=\\\"part2\\\">--- Part Two ---</h2><p>As you walk up the hill, you suspect that the Elves will want to turn this into a hiking trail. The beginning isn't very scenic, though; perhaps you can find a better starting point.</p>\\n<p>To maximize exercise while hiking, the trail should start as low as possible: elevation <code>a</code>. The goal is still the square marked <code>E</code>. However, the trail should still be direct, taking the fewest steps to reach its goal. So, you'll need to find the shortest path from <em>any square at elevation <code>a</code></em> to the square marked <code>E</code>.</p>\\n<p>Again consider the example from above:</p>\\n<pre><code><em>S</em>abqponm\\nabcryxxl\\naccsz<em>E</em>xk\\nacctuvwj\\nabdefghi\\n</code></pre>\\n<p>Now, there are six choices for starting position (five marked <code>a</code>, plus the square marked <code>S</code> that counts as being at elevation <code>a</code>). If you start at the bottom-left square, you can reach the goal most quickly:</p>\\n<pre><code>...v&lt;&lt;&lt;&lt;\\n...vv&lt;&lt;^\\n...v&gt;E^^\\n.&gt;v&gt;&gt;&gt;^^\\n&gt;^&gt;&gt;&gt;&gt;&gt;^\\n</code></pre>\\n<p>This path reaches the goal in only <code><em>29</em></code> steps, the fewest possible.</p>\\n<p><em>What is the fewest steps required to move starting from any square with elevation <code>a</code> to the location that should get the best signal?</em></p>\\n</article></div></div></div></div><div data-block-id=\\\"solutions.2022.day12/markdown-5drdKMgSmPmRK3QQM7MifWATnrFfup\\\" class=\\\"viewer markdown-viewer w-full max-w-prose px-8\\\"><h2 id=\\\"solution\\\">Solution</h2><p>I was dreading this day, not a fan of these. But there&#x27;s always a Dijsktra day...</p><p>Today&#x27;s problem is a case of finding the shortest path from one or many<!-- --> <!-- -->node(s) to another given node. Both parts differ slightly and I was able to<!-- --> <!-- -->luck out and guess part 2, meaning no refactor!</p><p>Not much more to say about it, we just compute the shortest path from start<!-- --> <!-- -->to end by adding up all the valid neighbours and finding the shortest route.</p><p>Ended up borrowing a lot of code from <a href=\\\"https://elken.github.io/aoc/src/solutions/2022/day08.html\\\">Day 8</a> which helped.</p><p>First we need a function to convert a character to a &quot;height&quot; value, which<!-- --> <!-- -->mostly boils down to the char code; with the <code>S</code>tart and <code>E</code>nd values being<!-- --> <code>0</code> and <code>25</code> respectively.</p></div><div data-block-id=\\\"solutions.2022.day12/elevation-&gt;height-code\\\" class=\\\"viewer code-viewer w-full max-w-wide\\\"><div class=\\\"cm-editor\\\"><cm-scroller><div class=\\\"cm-content whitespace-pre\\\"><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">(<span class=\\\"cmt-keyword\\\">defn</span> <span class=\\\"cmt-variableName\\\">elevation-&gt;height</span> [elevation]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">  (<span class=\\\"cmt-keyword\\\">condp</span> = elevation</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">    \\\\S <span class=\\\"cmt-literal\\\">0</span></div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">    \\\\E <span class=\\\"cmt-literal\\\">25</span></div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">    (<span class=\\\"cmt-keyword\\\">-</span> (<span class=\\\"cmt-keyword\\\">int</span> elevation) (<span class=\\\"cmt-keyword\\\">int</span> \\\\a))))</div></div></cm-scroller></div></div><div data-block-id=\\\"solutions.2022.day12/markdown-5dsM6e3JBhwQWtNzXqtmxjA1X3F8ee\\\" class=\\\"viewer markdown-viewer w-full max-w-prose px-8\\\"><p>Similar to <a href=\\\"https://elken.github.io/aoc/src/solutions/2022/day08.html\\\">Day 8</a>, we parse the<!-- --> <!-- -->list of values into a map that looks like</p></div><div class=\\\"result-viewer viewer map-viewer w-full max-w-prose px-8\\\" data-block-id=\\\"solutions.2022.day12/anon-expr-5dtmfUScMBAFEP75VyeugSCyo8dctL-result\\\"><div class=\\\"relative\\\"><div class=\\\"overflow-x-auto\\\"><span class=\\\"inspected-value whitespace-nowrap\\\"><span><span>{</span><span class=\\\"inspected-value whitespace-nowrap\\\"><span><span class=\\\"group hover:bg-indigo-100 rounded-sm hover:shadow cursor-pointer\\\"><span class=\\\"text-slate-400 group-hover:text-indigo-700\\\"><svg viewBox=\\\"0 0 100 100\\\" class=\\\"w-[7px] h-[7px] fill-current inline-block transition-all mr-[1px] -mt-[2px] rotate-90\\\"><polygon points=\\\"5.9,88.2 50,11.8 94.1,88.2 \\\"></polygon></svg></span><span class=\\\"group-hover:text-indigo-700\\\">[</span></span><span class=\\\"cmt-number inspected-value\\\">0</span> <span class=\\\"cmt-number inspected-value\\\">0</span><span>]</span></span></span> <span class=\\\"inspected-value whitespace-nowrap\\\"><span><span class=\\\"group hover:bg-indigo-100 rounded-sm hover:shadow cursor-pointer\\\"><span class=\\\"text-slate-400 group-hover:text-indigo-700\\\"><svg viewBox=\\\"0 0 100 100\\\" class=\\\"w-[7px] h-[7px] fill-current inline-block transition-all mr-[1px] -mt-[2px] rotate-90\\\"><polygon points=\\\"5.9,88.2 50,11.8 94.1,88.2 \\\"></polygon></svg></span><span class=\\\"group-hover:text-indigo-700\\\">{</span></span><span class=\\\"cmt-atom inspected-value\\\">:char</span> <span class=\\\"cmt-string inspected-value\\\">\\\\<!-- -->S</span> <span class=\\\"cmt-atom inspected-value\\\">:elevation</span> <span class=\\\"cmt-number inspected-value\\\">0</span>}<!-- -->}</span></span></span></span></div></div></div><div data-block-id=\\\"solutions.2022.day12/range-&gt;coords-code\\\" class=\\\"viewer code-viewer w-full max-w-wide\\\"><div class=\\\"cm-editor\\\"><cm-scroller><div class=\\\"cm-content whitespace-pre\\\"><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">(<span class=\\\"cmt-keyword\\\">defn</span> <span class=\\\"cmt-variableName\\\">range-&gt;coords</span></div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">  [matrix]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">  (<span class=\\\"cmt-keyword\\\">into</span> {}</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">        (<span class=\\\"cmt-keyword\\\">for</span> [x (<span class=\\\"cmt-keyword\\\">range</span> (<span class=\\\"cmt-keyword\\\">count</span> matrix))</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">              y (<span class=\\\"cmt-keyword\\\">range</span> (<span class=\\\"cmt-keyword\\\">count</span> (<span class=\\\"cmt-keyword\\\">first</span> matrix)))</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">              <span class=\\\"cmt-atom\\\">:let</span> [c (<span class=\\\"cmt-keyword\\\">get</span> (<span class=\\\"cmt-keyword\\\">get</span> matrix x) y)</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">                    e (<span class=\\\"cmt-keyword\\\">elevation-&gt;height</span> c)]]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">          [[x y] {<span class=\\\"cmt-atom\\\">:elevation</span> e</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">                  <span class=\\\"cmt-atom\\\">:char</span> c}])))</div></div></cm-scroller></div></div><div data-block-id=\\\"solutions.2022.day12/markdown-5duEPPreDS77YdExUSimBQPsoQNX7n\\\" class=\\\"viewer markdown-viewer w-full max-w-prose px-8\\\"><p>Now we can parse out input</p></div><div data-block-id=\\\"solutions.2022.day12/input-code\\\" class=\\\"viewer code-viewer w-full max-w-wide\\\"><div class=\\\"cm-editor\\\"><cm-scroller><div class=\\\"cm-content whitespace-pre\\\"><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">(<span class=\\\"cmt-keyword\\\">def</span> <span class=\\\"cmt-variableName\\\">input</span> (<span class=\\\"cmt-keyword\\\">-&gt;&gt;</span> (<span class=\\\"cmt-keyword\\\">slurp</span> (<span class=\\\"cmt-keyword\\\">io/resource</span> <span class=\\\"cmt-string\\\">&quot;</span><span class=\\\"cmt-string\\\">inputs/2022/day12.txt</span><span class=\\\"cmt-string\\\">&quot;</span>)) <span class=\\\"cmt-comment\\\">;; Load the resource</span></div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">                str/split-lines                               <span class=\\\"cmt-comment\\\">;; Split into lines</span></div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">                range-&gt;coords))                               <span class=\\\"cmt-comment\\\">;; Parse to matrix</span></div></div></cm-scroller></div></div><div data-block-id=\\\"solutions.2022.day12/markdown-5dsqop9vt4GjdgzAhb3y4UAyy7LQzs\\\" class=\\\"viewer markdown-viewer w-full max-w-prose px-8\\\"><p>The main &quot;computation&quot; function that uses a <a href=\\\"https://github.com/danielmiladinov/joy-of-clojure/blob/master/src/joy-of-clojure/chapter5/how_to_use_persistent_queues.clj\\\">PersistentQueue</a> <!-- -->that I was lucky enough to have a physical copy of the associated book in front of me.</p><p>The basic iteration for each loop looks like:</p><ul><li>Get the first node in the list of nodes to check</li><li>Return the <code>seen</code> value if it&#x27;s the last node</li><li>Otherwise get all the neighbours by checking the cardinal directions for<!-- --> <!-- -->unseen, unvisited nodes we can move to</li><li>Recur with these valid neighbours applied and update the <code>seen</code> values</li></ul></div><div data-block-id=\\\"solutions.2022.day12/find-shortest-path-code\\\" class=\\\"viewer code-viewer w-full max-w-wide\\\"><div class=\\\"cm-editor\\\"><cm-scroller><div class=\\\"cm-content whitespace-pre\\\"><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">(<span class=\\\"cmt-keyword\\\">defn</span> <span class=\\\"cmt-variableName\\\">find-shortest-path</span> [input from to]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">  (<span class=\\\"cmt-keyword\\\">loop</span> [unvisited (<span class=\\\"cmt-keyword\\\">reduce</span> conj clojure.lang.PersistentQueue/EMPTY from)</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">         seen (<span class=\\\"cmt-keyword\\\">zipmap</span> from (<span class=\\\"cmt-keyword\\\">repeat</span> <span class=\\\"cmt-literal\\\">0</span>))]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">    (<span class=\\\"cmt-keyword\\\">let</span> [node (<span class=\\\"cmt-keyword\\\">peek</span> unvisited)]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">      (<span class=\\\"cmt-keyword\\\">if</span> (<span class=\\\"cmt-keyword\\\">=</span> to node)</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">        (<span class=\\\"cmt-keyword\\\">seen</span> node)</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">        (<span class=\\\"cmt-keyword\\\">let</span> [neighbours (<span class=\\\"cmt-keyword\\\">-&gt;&gt;</span> neighbour</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">                             (<span class=\\\"cmt-keyword\\\">for</span> [direction [[<span class=\\\"cmt-literal\\\">-1</span> <span class=\\\"cmt-literal\\\">0</span>] [<span class=\\\"cmt-literal\\\">1</span> <span class=\\\"cmt-literal\\\">0</span>] [<span class=\\\"cmt-literal\\\">0</span> <span class=\\\"cmt-literal\\\">-1</span>] [<span class=\\\"cmt-literal\\\">0</span> <span class=\\\"cmt-literal\\\">1</span>]]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">                                   <span class=\\\"cmt-atom\\\">:let</span> [neighbour (<span class=\\\"cmt-keyword\\\">mapv</span> + node direction)]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">                                   <span class=\\\"cmt-atom\\\">:when</span> (<span class=\\\"cmt-keyword\\\">and</span> (<span class=\\\"cmt-keyword\\\">input</span> neighbour)</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">                                              (<span class=\\\"cmt-keyword\\\">not</span> (<span class=\\\"cmt-keyword\\\">seen</span> neighbour))</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">                                              (<span class=\\\"cmt-keyword\\\">not</span> (<span class=\\\"cmt-keyword\\\">.contains</span> neighbour unvisited))</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">                                              (<span class=\\\"cmt-keyword\\\">&gt;=</span></div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">                                               (<span class=\\\"cmt-atom\\\">:elevation</span> (<span class=\\\"cmt-keyword\\\">input</span> node))</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">                                               (<span class=\\\"cmt-keyword\\\">dec</span> (<span class=\\\"cmt-atom\\\">:elevation</span> (<span class=\\\"cmt-keyword\\\">input</span> neighbour)))))])</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">                             vec)]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">          (<span class=\\\"cmt-keyword\\\">recur</span> (<span class=\\\"cmt-keyword\\\">into</span> (<span class=\\\"cmt-keyword\\\">pop</span> unvisited) neighbours)</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">                 (<span class=\\\"cmt-keyword\\\">merge</span> seen (<span class=\\\"cmt-keyword\\\">zipmap</span> neighbours (<span class=\\\"cmt-keyword\\\">repeat</span> (<span class=\\\"cmt-keyword\\\">inc</span> (<span class=\\\"cmt-keyword\\\">seen</span> node)))))))))))</div></div></cm-scroller></div></div><div data-block-id=\\\"solutions.2022.day12/markdown-5drbKEzaJDG3y8tX8B1pbRMs2hF9D2\\\" class=\\\"viewer markdown-viewer w-full max-w-prose px-8\\\"><p>Lastly we need a small helper method to give us the locations of all<!-- --> <!-- -->instances of a given set of characters</p></div><div data-block-id=\\\"solutions.2022.day12/find-chars-code\\\" class=\\\"viewer code-viewer w-full max-w-wide\\\"><div class=\\\"cm-editor\\\"><cm-scroller><div class=\\\"cm-content whitespace-pre\\\"><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">(<span class=\\\"cmt-keyword\\\">defn</span> <span class=\\\"cmt-variableName\\\">find-chars</span> [input &amp; chars]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">  (<span class=\\\"cmt-keyword\\\">keys</span></div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">   (<span class=\\\"cmt-keyword\\\">first</span> ((<span class=\\\"cmt-keyword\\\">juxt</span> filter remove)</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">           (<span class=\\\"cmt-keyword\\\">fn</span> [[_ v]] (<span class=\\\"cmt-keyword\\\">.contains</span> chars (<span class=\\\"cmt-atom\\\">:char</span> v))) input))))</div></div></cm-scroller></div></div><div data-block-id=\\\"solutions.2022.day12/markdown-5dsnmCCXajFuc7h8Dr1ZZXX9ot1QFP\\\" class=\\\"viewer markdown-viewer w-full max-w-prose px-8\\\"><p>Part 1 is just a simple case of finding the path from <code>S</code> to <code>E</code></p></div><div data-block-id=\\\"solutions.2022.day12/part-1-code\\\" class=\\\"viewer code-viewer w-full max-w-wide\\\"><div class=\\\"cm-editor\\\"><cm-scroller><div class=\\\"cm-content whitespace-pre\\\"><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">(<span class=\\\"cmt-keyword\\\">defn</span> <span class=\\\"cmt-variableName\\\">part-1</span></div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">  [input]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">  (<span class=\\\"cmt-keyword\\\">find-shortest-path</span></div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">   input</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">   (<span class=\\\"cmt-keyword\\\">find-chars</span> input \\\\S)</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">   (<span class=\\\"cmt-keyword\\\">first</span> (<span class=\\\"cmt-keyword\\\">find-chars</span> input \\\\E))))</div></div></cm-scroller></div></div><div data-block-id=\\\"solutions.2022.day12/markdown-5dspMqxdw3uNK6Pgan8eaYi57sm4wP\\\" class=\\\"viewer markdown-viewer w-full max-w-prose px-8\\\"><p>Which gives our answer</p></div><div class=\\\"result-viewer viewer number-viewer w-full max-w-prose px-8\\\" data-block-id=\\\"solutions.2022.day12/anon-expr-5dshGnyCYVfgr3cV4vKRqeFt2v8Fqp-result\\\"><div class=\\\"relative\\\"><div class=\\\"overflow-x-auto\\\"><span class=\\\"cmt-number inspected-value\\\">383</span></div></div></div><div data-block-id=\\\"solutions.2022.day12/markdown-5dtZ534V9SUQ1bTvwGhJVSsiCj3aec\\\" class=\\\"viewer markdown-viewer w-full max-w-prose px-8\\\"><p>Part 2 is a little bit more involved, now we have to also consider all <code>a</code> <!-- -->paths as well as <code>S</code>, but as above we lucked out and got this part for free.</p></div><div data-block-id=\\\"solutions.2022.day12/part-2-code\\\" class=\\\"viewer code-viewer w-full max-w-wide\\\"><div class=\\\"cm-editor\\\"><cm-scroller><div class=\\\"cm-content whitespace-pre\\\"><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">(<span class=\\\"cmt-keyword\\\">defn</span> <span class=\\\"cmt-variableName\\\">part-2</span></div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">  [input]</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">  (<span class=\\\"cmt-keyword\\\">find-shortest-path</span></div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">   input</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">   (<span class=\\\"cmt-keyword\\\">find-chars</span> input \\\\a \\\\S)</div><div style=\\\"padding:0;line-height:1.6;font-size:15px;font-family:&quot;Fira Mono&quot;, monospace\\\" class=\\\"cm-line\\\">   (<span class=\\\"cmt-keyword\\\">first</span> (<span class=\\\"cmt-keyword\\\">find-chars</span> input \\\\E))))</div></div></cm-scroller></div></div><div data-block-id=\\\"solutions.2022.day12/markdown-5dspMqxdw3uNK6Pgan8eaYi57sm4wP#2\\\" class=\\\"viewer markdown-viewer w-full max-w-prose px-8\\\"><p>Which gives our answer</p></div><div class=\\\"result-viewer viewer number-viewer w-full max-w-prose px-8\\\" data-block-id=\\\"solutions.2022.day12/anon-expr-5ds3NJhiXAVBTLsVFex2mJDuuDv1Lr-result\\\"><div class=\\\"relative\\\"><div class=\\\"overflow-x-auto\\\"><span class=\\\"cmt-number inspected-value\\\">377</span></div></div></div></div></div></div><div class=\\\"fixed w-full z-20 top-0 left-0 w-full\\\"></div>\\n\"}".replaceAll('nextjournal.clerk.view/escape-closing-script-tag', 'script')
viewer.init(viewer.read_string(state))
</script></body></html>