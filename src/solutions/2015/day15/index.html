<!DOCTYPE html>
<html><head><meta charset="UTF-8"><meta content="width=device-width, initial-scale=1" name="viewport"><meta content="Today&apos;s problem has us solving a constraints problem. Under the guise of building the perfect recipe (44 teaspoons of butterscotch?!), we have to find the optimal constraints to satisfy several constraints:" property="og:description"><meta content="Problem" property="og:title"><meta content="article:clerk" property="og:type"><meta content="summary_large_image" name="twitter:card"><link href="./../../../../_data/8VwV28rwGucVsymC7xAxLHYmRrTe7rCGL6Z2GkDMWKHZwmBdrd8iRZtTJgwWnXnPsTofN8GQhMnYNeXBdo1D524JjG.css" rel="stylesheet" type="text/css"><script src="https://storage.clerk.garden/nextjournal/clerk-assets@43sknWSpfsWGp1HAfZe1dLuBjmWH/viewer.js?immutable=true" type="module"></script><link href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css" rel="stylesheet" type="text/css"><link href="https://fonts.bunny.net" rel="preconnect"><link href="https://fonts.bunny.net/css?family=fira-mono:400,700%7Cfira-sans:400,400i,500,500i,700,700i%7Cfira-sans-condensed:700,700i%7Cpt-serif:400,400i,700,700i" rel="stylesheet" type="text/css"><style id="extra-styles">em {
    font-style: normal !important;
}

html:not(.dark) pre {
    background-color: #f1f5f9 !important;
    color: #7aaac4 !important;
}

.dark em {
    color: #fff !important;
    text-shadow: 0 0 5px #fff !important;
}

.dark pre {
    background-color: rgb(31 41 55 / var(--tw-bg-opacity)) !important;
}

html:not(.dark) em {
    color: #000 !important;
    text-shadow: 0 0 2px #000 !important;
}

.viewer-result:first-child {
    display: none !important;
}
</style></head><body class="dark:bg-gray-900"><div id="clerk"></div><script type="module">let viewer = nextjournal.clerk.sci_env
let state = "{:bundle? false, :path->doc {\"src/solutions/2015/day15\" {:path [], :nextjournal/value {:toc [{:title \"Problem\", :emoji nil, :path \"#problem\", :items []} {:title \"Solution\", :emoji nil, :path \"#solution\", :items [{:title \"Functions\", :emoji nil, :path \"#functions\", :items [{:title \"combinations-to-sum\", :emoji nil, :path \"#combinations-to-sum\", :items []} {:title \"calculate-properties\", :emoji nil, :path \"#calculate-properties\", :items []} {:title \"property-score\", :emoji nil, :path \"#property-score\", :items []} {:title \"too-calorific?\", :emoji nil, :path \"#too-calorific?\", :items []} {:title \"solve\", :emoji nil, :path \"#solve\", :items []}]} {:title \"Part 1\", :emoji nil, :path \"#part-1\", :items []} {:title \"Part 2\", :emoji nil, :path \"#part-2\", :items []}]}], :sidenotes? false, :toc-visibility true, :atom-var-name->state #viewer-eval (nextjournal.clerk.render/intern-atoms! {}), :ns #viewer-eval (ns solutions.2015.day15), :file \"src/solutions/2015/day15.clj\", :scope solutions.2015.day15, :bundle? false, :header {:path [], :nextjournal/value [:div.viewer.w-full.max-w-prose.px-8.not-prose.mt-3 [:div.mb-8.text-xs.sans-serif.text-slate-400 nil [:<> [:a.font-medium.border-b.border-dotted.border-slate-300.hover:text-indigo-500.hover:border-indigo-500.dark:border-slate-500.dark:hover:text-white.dark:hover:border-white.transition {:href \"./../../../../\"} \"Index\"] [:span.mx-2 \"â€¢\"]] [:span \"Served from \" [:a.font-medium.border-b.border-dotted.border-slate-300.hover:text-indigo-500.hover:border-indigo-500.dark:border-slate-500.dark:hover:text-white.dark:hover:border-white.transition {:href \"https://clerk.vision\"} \"Clerk\"] nil]]], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}, :open-graph {:type \"article:clerk\", :title \"Problem\", :description \"Today's problem has us solving a constraints problem. Under the guise of building the perfect recipe (44 teaspoons of butterscotch?!), we have to find the optimal constraints to satisfy several constraints:\"}, :title \"Problem\", :blocks [{:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2015.day15/markdown-5dqq5acBASUPKy7JX3Uoyxc1KPMN9A\"} [\"h1\" {:id \"problem\"} [:<> \"Problem\"]]], :nextjournal/render-opts {:id \"solutions.2015.day15/markdown-5dqq5acBASUPKy7JX3Uoyxc1KPMN9A\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [:div {:dangerouslySetInnerHTML {:__html \"<article class=\\\"day-desc\\\"><h2>--- Day 15: Science for Hungry People ---</h2><p>Today, you set out on the task of perfecting your milk-dunking cookie recipe.  All you have to do is find the right balance of ingredients.</p>\\n<p>Your recipe leaves room for exactly <code>100</code> teaspoons of ingredients.  You make a list of the <em>remaining ingredients you could use to finish the recipe</em> (your puzzle input) and their <em>properties per teaspoon</em>:</p>\\n<ul>\\n<li><code>capacity</code> (how well it helps the cookie absorb milk)</li>\\n<li><code>durability</code> (how well it keeps the cookie intact when full of milk)</li>\\n<li><code>flavor</code> (how tasty it makes the cookie)</li>\\n<li><code>texture</code> (how it improves the feel of the cookie)</li>\\n<li><code>calories</code> (how many calories it adds to the cookie)</li>\\n</ul>\\n<p>You can only measure ingredients in whole-teaspoon amounts accurately, and you have to be accurate so you can reproduce your results in the future.  The <em>total score</em> of a cookie can be found by adding up each of the properties (negative totals become <code>0</code>) and then multiplying together everything except calories.</p>\\n<p>For instance, suppose you have <span title=\\\"* I know what your preference is, but...\\\">these two ingredients</span>:</p>\\n<pre><code>Butterscotch: capacity -1, durability -2, flavor 6, texture 3, calories 8\\nCinnamon: capacity 2, durability 3, flavor -2, texture -1, calories 3\\n</code></pre>\\n<p>Then, choosing to use <code>44</code> teaspoons of butterscotch and <code>56</code> teaspoons of cinnamon (because the amounts of each ingredient must add up to <code>100</code>) would result in a cookie with the following properties:</p>\\n<ul>\\n<li>A <code>capacity</code> of <code>44*-1 + 56*2 = 68</code></li>\\n<li>A <code>durability</code> of <code>44*-2 + 56*3 = 80</code></li>\\n<li>A <code>flavor</code> of <code>44*6 + 56*-2 = 152</code></li>\\n<li>A <code>texture</code> of <code>44*3 + 56*-1 = 76</code></li>\\n</ul>\\n<p>Multiplying these together (<code>68 * 80 * 152 * 76</code>, ignoring <code>calories</code> for now) results in a total score of  <code>62842880</code>, which happens to be the best score possible given these ingredients.  If any properties had produced a negative total, it would have instead become zero, causing the whole score to multiply to zero.</p>\\n<p>Given the ingredients in your kitchen and their properties, what is the <em>total score</em> of the highest-scoring cookie you can make?</p>\\n</article><article class=\\\"day-desc\\\"><h2 id=\\\"part2\\\">--- Part Two ---</h2><p>Your cookie recipe becomes wildly popular!  Someone asks if you can make another recipe that has exactly <code>500</code> calories per cookie (so they can use it as a meal replacement).  Keep the rest of your award-winning process the same (100 teaspoons, same ingredients, same scoring system).</p>\\n<p>For example, given the ingredients above, if you had instead selected <code>40</code> teaspoons of butterscotch and <code>60</code> teaspoons of cinnamon (which still adds to <code>100</code>), the total calorie count would be <code>40*8 + 60*3 = 500</code>.  The total score would go down, though: only <code>57600000</code>, the best you can do in such trying circumstances.</p>\\n<p>Given the ingredients in your kitchen and their properties, what is the <em>total score</em> of the highest-scoring cookie you can make with a calorie total of <code>500</code>?</p>\\n</article>\"}}], :nextjournal/visibility {:code :hide, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}, :nextjournal/render-opts {:id \"solutions.2015.day15/anon-expr-5dteFZe7p7meZbWpWvHf6MfbW34HyA-result\"}}, :nextjournal/blob-id \"5dtgFvpbwVKEPX3dAM5KubuF7atB8C\", :nextjournal/fetch-opts {:blob-id \"5dtgFvpbwVKEPX3dAM5KubuF7atB8C\"}, :nextjournal/hash \"8VuvRhA6RWi4kfFm77VE6WU4PZjsxU5FmCMriYfA451Sqh5DxxnpVmyMwA2LGbajYr3MYuqJTLMjWXbmb6udE4AZ4v\"}, :nextjournal/render-opts {:id \"solutions.2015.day15/anon-expr-5dteFZe7p7meZbWpWvHf6MfbW34HyA-result\"}, :nextjournal/visibility {:code :hide, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2015.day15/markdown-5drDSUcEeTyks3Ajic7b5skWdwHuDa\"} [\"h1\" {:id \"solution\"} [:<> \"Solution\"]] [:p [:<> \"Today's problem has us solving a constraints problem. Under the\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"guise of building the perfect recipe (44 \"] [:em [:<> \"teaspoons\"]] [:<> \" of\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"butterscotch?!), we have to find the optimal constraints to satisfy\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"several constraints:\"]] [:ul [:li [:p [:<> \"We can't use more than 100 total teaspoons\"]]] [:li [:p [:<> \"If any property sum is negative, it becomes zero and thus\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"multiplying by 0 means the iteration is out\"]]] [:li [:p [:<> \"Each ingredient must be used (it doesn't explicity say this, but\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"if you multiply one of them by 0 you hit the zero constraint)\"]]] [:li [:p [:<> \"In the context of part 2, we also have to ensure we don't make it\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"have more than 500 calories\"]]]] [:p [:<> \"In the case of both parts, we have to find the ratio of ingredients\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"that, when summed and multiplied, produce the biggest number.\"]] [:p [:<> \"First things first, let's load our input and parse it\"]]], :nextjournal/render-opts {:id \"solutions.2015.day15/markdown-5drDSUcEeTyks3Ajic7b5skWdwHuDa\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(defn parse-input [input]\\n  (map #(map parse-long (re-seq #\\\"\\\\-?\\\\d+\\\" %)) input))\", :nextjournal/render-opts {:loc {:line 36, :end-line 37, :column 1, :end-column 54}, :id \"solutions.2015.day15/parse-input-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[solutions.2015.day15$parse_input 0x9b150b1 \\\"solutions.2015.day15$parse_input@9b150b1\\\"]\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (nextjournal.clerk.viewer/read-string-without-tag-table x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5du3nEWKL6ov9p2VcYkP5JLW7a9Hwz\"}, :nextjournal/render-opts {:id \"solutions.2015.day15/parse-input-result\"}}, :nextjournal/blob-id nil}, :nextjournal/render-opts {:id \"solutions.2015.day15/parse-input-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value \"(def input (->> (slurp (io/resource \\\"inputs/2015/day15.txt\\\")) ;; Load the resource\\n                str/split-lines                               ;; Split into lines\\n                parse-input                                   ;; Parse into lists\\n                (apply mapv vector)))                         ;; Transpose to give all the properties as pair lists\", :nextjournal/render-opts {:loc {:line 39, :end-line 42, :column 1, :end-column 38}, :id \"solutions.2015.day15/input-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [{:path [0], :nextjournal/value [{:path [0 0], :nextjournal/value 4, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5drsU4XXFvRiNxHZXiNRRP4gBX7jiW\"}} {:path [0 1], :nextjournal/value 0, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5drsU4XXFvRiNxHZXiNRRP4gBX7jiW\"}} {:path [0 2], :nextjournal/value -1, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5drsU4XXFvRiNxHZXiNRRP4gBX7jiW\"}} {:path [0 3], :nextjournal/value 0, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5drsU4XXFvRiNxHZXiNRRP4gBX7jiW\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/vector-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-coll, :opening-paren \"[\", :closing-paren (\"]\"), :page-size 20, :hash \"5dsPqhnXQ6NY7bfSdVZe5SH2Voaoff\"}} {:path [1], :nextjournal/value [{:path [1 0], :nextjournal/value -2, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5drsU4XXFvRiNxHZXiNRRP4gBX7jiW\"}} {:path [1 1], :nextjournal/value 5, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5drsU4XXFvRiNxHZXiNRRP4gBX7jiW\"}} {:path [1 2], :nextjournal/value 0, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5drsU4XXFvRiNxHZXiNRRP4gBX7jiW\"}} {:path [1 3], :nextjournal/value 0, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5drsU4XXFvRiNxHZXiNRRP4gBX7jiW\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/vector-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-coll, :opening-paren \"[\", :closing-paren (\"]\"), :page-size 20, :hash \"5dsPqhnXQ6NY7bfSdVZe5SH2Voaoff\"}} {:path [2], :nextjournal/value [{:path [2 0], :nextjournal/value 0, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5drsU4XXFvRiNxHZXiNRRP4gBX7jiW\"}} {:path [2 1], :nextjournal/value -1, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5drsU4XXFvRiNxHZXiNRRP4gBX7jiW\"}} {:path [2 2], :nextjournal/value 5, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5drsU4XXFvRiNxHZXiNRRP4gBX7jiW\"}} {:path [2 3], :nextjournal/value -2, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5drsU4XXFvRiNxHZXiNRRP4gBX7jiW\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/vector-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-coll, :opening-paren \"[\", :closing-paren (\"]\"), :page-size 20, :hash \"5dsPqhnXQ6NY7bfSdVZe5SH2Voaoff\"}} {:path [3], :nextjournal/value [{:path [3 0], :nextjournal/value 0, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5drsU4XXFvRiNxHZXiNRRP4gBX7jiW\"}} {:path [3 1], :nextjournal/value 0, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5drsU4XXFvRiNxHZXiNRRP4gBX7jiW\"}} {:path [3 2], :nextjournal/value 0, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5drsU4XXFvRiNxHZXiNRRP4gBX7jiW\"}} {:path [3 3], :nextjournal/value 2, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5drsU4XXFvRiNxHZXiNRRP4gBX7jiW\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/vector-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-coll, :opening-paren \"[\", :closing-paren (\"]\"), :page-size 20, :hash \"5dsPqhnXQ6NY7bfSdVZe5SH2Voaoff\"}} {:path [4], :nextjournal/value [{:path [4 0], :nextjournal/value 5, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5drsU4XXFvRiNxHZXiNRRP4gBX7jiW\"}} {:path [4 1], :nextjournal/value 8, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5drsU4XXFvRiNxHZXiNRRP4gBX7jiW\"}} {:path [4 2], :nextjournal/value 6, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5drsU4XXFvRiNxHZXiNRRP4gBX7jiW\"}} {:path [4 3], :nextjournal/value 1, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5drsU4XXFvRiNxHZXiNRRP4gBX7jiW\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/vector-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-coll, :opening-paren \"[\", :closing-paren (\"]\" \"]\"), :page-size 20, :hash \"5dsPqhnXQ6NY7bfSdVZe5SH2Voaoff\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/vector-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-coll, :opening-paren \"[\", :page-size 20, :hash \"5dsPqhnXQ6NY7bfSdVZe5SH2Voaoff\"}, :nextjournal/render-opts {:id \"solutions.2015.day15/input-result\"}}, :nextjournal/blob-id \"5dtVmNkQ3kGPjJb9ihX4eN5SWQ27HA\", :nextjournal/fetch-opts {:blob-id \"5dtVmNkQ3kGPjJb9ihX4eN5SWQ27HA\"}, :nextjournal/hash \"8VuuAJPRUouG38YkD84C1hsJLELLA4aBsSKZVnMY3dx27Zha1gqAFEmTMyM5RmCq1H95nXyRn1MBKsLi5QPNL2AVv1\"}, :nextjournal/render-opts {:id \"solutions.2015.day15/input-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2015.day15/markdown-5dsA7ZYih94Ba4Nt3zwoHBWA1wDPbr\"} [\"h2\" {:id \"functions\"} [:<> \"Functions\"]] [\"h3\" {:id \"combinations-to-sum\"} [:<> \"combinations-to-sum\"]] [:p [:<> \"Given a total some, generate a list of all the possible numbers\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"that add up to that number. 1 per property, and since we handle\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"calories differently we never directly handle it.\"]]], :nextjournal/render-opts {:id \"solutions.2015.day15/markdown-5dsA7ZYih94Ba4Nt3zwoHBWA1wDPbr\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(defn combinations-to-sum\\n  [target-sum]\\n  (for [a (range (inc target-sum))\\n        b (range (inc (- target-sum a)))\\n        c (range (inc (- target-sum a b)))\\n        :let [d (- target-sum a b c)]\\n        :when (<= d target-sum)]\\n    [a b c d]))\", :nextjournal/render-opts {:loc {:line 51, :end-line 58, :column 1, :end-column 16}, :id \"solutions.2015.day15/combinations-to-sum-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2015.day15/markdown-5ds2WYtA5mb5VLSw68ABAJPRgVv2QK\"} [\"h3\" {:id \"calculate-properties\"} [:<> \"calculate-properties\"]] [:p [:<> \"Given the ratios in amounts, calculate the property scores and add\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"them up.\"]]], :nextjournal/render-opts {:id \"solutions.2015.day15/markdown-5ds2WYtA5mb5VLSw68ABAJPRgVv2QK\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(defn calculate-properties [amounts properties]\\n  (apply + (map * amounts properties)))\", :nextjournal/render-opts {:loc {:line 64, :end-line 65, :column 1, :end-column 40}, :id \"solutions.2015.day15/calculate-properties-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2015.day15/markdown-5ds5ZR6ZBPujuEYnwMVqNBki4cr77j\"} [\"h3\" {:id \"property-score\"} [:<> \"property-score\"]] [:p [:<> \"Calculate the property score for a given set of quantities and\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"properties. If any of them end up being negative, we clamp to\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"zero.\"]]], :nextjournal/render-opts {:id \"solutions.2015.day15/markdown-5ds5ZR6ZBPujuEYnwMVqNBki4cr77j\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(defn property-score [amounts properties]\\n  (max 0 (calculate-properties amounts properties)))\", :nextjournal/render-opts {:loc {:line 72, :end-line 73, :column 1, :end-column 53}, :id \"solutions.2015.day15/property-score-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2015.day15/markdown-5drcZd8TagvNr8JzuDfQ2Yyuxz9vVV\"} [\"h3\" {:id \"too-calorific?\"} [:<> \"too-calorific?\"]] [:p [:<> \"Predicate function to test if the recipe we'll produce will be too\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"calorific. Eliminates all the bad ones for part 2.\"]]], :nextjournal/render-opts {:id \"solutions.2015.day15/markdown-5drcZd8TagvNr8JzuDfQ2Yyuxz9vVV\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(defn too-calorific? [properties amounts]\\n  (>= 500 (calculate-properties amounts (map last properties))))\", :nextjournal/render-opts {:loc {:line 79, :end-line 80, :column 1, :end-column 65}, :id \"solutions.2015.day15/too-calorific?-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2015.day15/markdown-5dsZvzAeif7t2F46mVMgPLaVFqLAJL\"} [\"h3\" {:id \"solve\"} [:<> \"solve\"]] [:p [:<> \"The general solver since both parts are solved the same.\"]] [:p [:<> \"Take all the valid combinations and calculate the scores for all\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"the properties except calories (the last item). Since 0 is negative\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"in Clojure (don't @ me, mathematicians) we can just filter out any\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"of these that have a single negative value and get the product of\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"the rest.\"]]], :nextjournal/render-opts {:id \"solutions.2015.day15/markdown-5dsZvzAeif7t2F46mVMgPLaVFqLAJL\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(defn solve [input combinations]\\n  (->> combinations\\n       (map\\n        (fn [[a b c d]]\\n          (map (partial property-score [a b c d]) (butlast input))))\\n       (filter (partial every? pos?))\\n       (map (partial reduce *))\\n       (apply max)))\", :nextjournal/render-opts {:loc {:line 91, :end-line 98, :column 1, :end-column 21}, :id \"solutions.2015.day15/solve-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2015.day15/markdown-5dss1KcVjKtzuVLnXQcyNWWqAxR1x7\"} [\"h2\" {:id \"part-1\"} [:<> \"Part 1\"]] [:p [:<> \"Part 1 just wants us to get the highest for any combination\"]]], :nextjournal/render-opts {:id \"solutions.2015.day15/markdown-5dss1KcVjKtzuVLnXQcyNWWqAxR1x7\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(defn part-1\\n  [input]\\n  (solve input (combinations-to-sum 100)))\", :nextjournal/render-opts {:loc {:line 103, :end-line 105, :column 1, :end-column 43}, :id \"solutions.2015.day15/part-1-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2015.day15/markdown-5dsCmyHsvB8C19ZLVyDeAMusv11HXT\"} [:p [:<> \"Which gives our answer\"]]], :nextjournal/render-opts {:id \"solutions.2015.day15/markdown-5dsCmyHsvB8C19ZLVyDeAMusv11HXT\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value 18965440, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5drsU4XXFvRiNxHZXiNRRP4gBX7jiW\"}, :nextjournal/render-opts {:id \"solutions.2015.day15/anon-expr-5dqyLURFdt23SKEykkvPQp381ApJNL-result\"}}, :nextjournal/blob-id \"5dsNTBrM7r5TwEVtxdswu7RaePnzAM\", :nextjournal/fetch-opts {:blob-id \"5dsNTBrM7r5TwEVtxdswu7RaePnzAM\"}, :nextjournal/hash \"8VxBwLyGCkhaCuNo9RHugrnrKxNny2YghxpApjWpewKKWszYE2wYbaFAQu79hgmcGTvTtTVDndxZPJ676nZ5qn6gwN\"}, :nextjournal/render-opts {:id \"solutions.2015.day15/anon-expr-5dqyLURFdt23SKEykkvPQp381ApJNL-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2015.day15/markdown-5dsVJx62VdxCXcZcWjp8cvfsRQL7K2\"} [\"h2\" {:id \"part-2\"} [:<> \"Part 2\"]] [:p [:<> \"Part 2 we filter out any combinations that will produce something\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"too calorific first\"]]], :nextjournal/render-opts {:id \"solutions.2015.day15/markdown-5dsVJx62VdxCXcZcWjp8cvfsRQL7K2\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(defn part-2\\n  [input]\\n  (solve input (filter (partial too-calorific? input) (combinations-to-sum 100))))\", :nextjournal/render-opts {:loc {:line 116, :end-line 118, :column 1, :end-column 83}, :id \"solutions.2015.day15/part-2-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"solutions.2015.day15/markdown-5dsCmyHsvB8C19ZLVyDeAMusv11HXT#2\"} [:p [:<> \"Which gives our answer\"]]], :nextjournal/render-opts {:id \"solutions.2015.day15/markdown-5dsCmyHsvB8C19ZLVyDeAMusv11HXT#2\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value 18965440, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5drsU4XXFvRiNxHZXiNRRP4gBX7jiW\"}, :nextjournal/render-opts {:id \"solutions.2015.day15/anon-expr-5dstDS4zmbArT87H81wfsNt68WWiqo-result\"}}, :nextjournal/blob-id \"5dridxqvVzc5DxPpViwhxjNqrGssYd\", :nextjournal/fetch-opts {:blob-id \"5dridxqvVzc5DxPpViwhxjNqrGssYd\"}, :nextjournal/hash \"8VwtdnnmZgwVeRP7KSSAkgxLdXrAYgYpeXUPVLyskEkmHVESeRDfZAydHvazUi7T2t5CgWQAFitnc1Qa6fKgQhZ9CR\"}, :nextjournal/render-opts {:id \"solutions.2015.day15/anon-expr-5dstDS4zmbArT87H81wfsNt68WWiqo-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}}]}, :nextjournal/viewer {:name nextjournal.clerk.viewer/notebook-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-notebook, :hash \"5dsiHybTyGGTEpReRaV7nfNxoDgnKx\"}}}, :current-path \"src/solutions/2015/day15\", :resource->url {\"/js/viewer.js\" \"https://storage.clerk.garden/nextjournal/clerk-assets@43sknWSpfsWGp1HAfZe1dLuBjmWH/viewer.js?immutable=true\", \"/css/viewer.css\" \"_data/8VwV28rwGucVsymC7xAxLHYmRrTe7rCGL6Z2GkDMWKHZwmBdrd8iRZtTJgwWnXnPsTofN8GQhMnYNeXBdo1D524JjG.css\"}, :index \"src/index.clj\"}".replaceAll('nextjournal.clerk.view/escape-closing-script-tag', 'script')
viewer.init(viewer.read_string(state))
</script></body></html>